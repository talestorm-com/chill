(function(){var H=null,MC='MediaImage_editor_pixlr',MD='MediaImage_editor_pixlr598b8e943a1c023b8b2f0c4cca14fe94',FQCN='media.image_editor_pixlr',Y=window.Eve.EFO.Com(),imports=[]
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,PAR=EFO.windowController,PARP=PAR.prototype,APS=Array.prototype.slice,TPLS=null,TPLS={main:"<div class=\"CommonAdminLayoutForm {{getCssClass}}Form\">\n    <div class=\"CommonAdminLayoutEditorPasswordStub\">        \n        <div class=\"CommonAdminLayoutEditorPasswordStubinner\">        \n            <label for=\"{{MD}}commonfakelogin0\">email<\/label>\n            <label for=\"{{MD}}commonfakelogin0\">login<\/label>\n            <label for=\"{{MD}}commonfakelogin0\">\u043b\u043e\u0433\u0438\u043d<\/label>\n            <label for=\"{{MD}}commonfakelogin0\">email<\/label>\n            <label for=\"{{MD}}commonfalepassword\">password<\/label>\n            <label for=\"{{MD}}commonfalepassword\">\u041f\u0430\u0440\u043e\u043b\u044c<\/label>        \n            <input type=\"text\" autocomplete=\"off\" name=\"login\" data-fake=\"login\" id=\"{{MD}}commonfakelogin0\" \/>\n            <input type=\"password\" autocomplete=\"off\" name=\"password\" id=\"{{MD}}commonfalepassword\" \/>\n            <input type=\"text\" name=\"login\"  autocomplete=\"off\" id=\"{{MD}}commonfakelogin\" \/>\n            <input type=\"text\" autocomplete=\"off\" id=\"a{{MD}}00login\" data-field=\"xxlogin\" data-monitor=\"xxlogin\" \/>\n        <\/div>\n    <\/div>\n    <div class=\"CommonAdminLayoutFormInner {{getCssClass}}FrameWrapper\" >\n        <iframe src=\"\" frameborder=\"0\" data-role=\"frame\"><\/iframe>\n    <\/div>   \n<\/div>"};EFO.TemplateManager().addObject(TPLS,MC);var STYLE=null;STYLE={id:"MediaImage_editor_pixlr",css:".CommonAdminLayoutForm.MediaImage_editor_pixlrForm{box-sizing:border-box;padding:0;margin:0;overflow:hidden}.CommonAdminLayoutFormInner.MediaImage_editor_pixlrFrameWrapper{box-sizing:border-box;background:whitesmoke;overflow:hidden}.EFOWindow.MediaImage_editor_pixlrWindow{padding-bottom:0}.EFOFooter.MediaImage_editor_pixlrFooter{border-top:0;height:0;overflow:visible}.CommonAdminLayoutFormInner.MediaImage_editor_pixlrFrameWrapper iframe{box-sizing:border-box;width:100%;height:100%;background:rgba(0,0,0,0);margin:0;padding:0;min-height:100%;max-height:100%;min-width:100%;max-width:100%;overflow:hidden}"};EFO.SStyleDriver().registerStyleOInstall(STYLE)
function F(){return F.is(H)?H:(F.is(this)?this.init():F.F())};F.xInheritE(PAR);F.mixines=['Roleable','Loaderable','Commandable','Callbackable','Sizeable'];U.initMixines(F);F.prototype.MD=MD;F.prototype.sizeable_getParams=function(){var w=this.sizeable_defaultWidth(),h=this.sizeable_defaultHeight();try{var u=JSON.parse(localStorage.getItem(MC+'rsz'));if(U.isObject(u)&&('w'in u)&&('h'in u)&&typeof(u.h)==='number'&&!isNaN(u.h)&&typeof(u.w)==='number'&&!isNaN(u.w)){w=u.w;h=u.h}}catch(e){w=this.sizeable_defaultWidth();h=this.sizeable_defaultHeight()};return{w:w,h:h}};F.prototype.sizeable_setParams=function(x){if(U.isObject(x))if(('w'in x)&&('h'in x)&&typeof(x.w)==='number'&&typeof(x.h)==='number'&&!isNaN(x.w)&&!isNaN(x.h))try{localStorage.setItem(MC+'rsz',JSON.stringify(x))}catch(e){};return this};F.prototype.sizeable_scaleFactor=function(){return 2};F.prototype.sizeable_defaultWidth=function(){return 100};F.prototype.sizeable_defaultHeight=function(){return 100};F.prototype.onInit=function(){H=this;PARP.onInit.apply(this,APS.call(arguments));this.LEM.On('NEED_POSITE',this,this.placeAtCenter);return this};F.prototype.onAfterShow=function(){PARP.onAfterShow.apply(this,APS.call(arguments));this.placeAtCenter();return this};F.prototype.getContentTemplate=function(){return EFO.TemplateManager().get([MC,'Main'].join('.'))};F.prototype.getControllerAlias=function(){return MC};F.prototype.getCssClass=function(){return MC};F.prototype.getFooterButtons=function(){return[]};F.prototype.getDefaultTitle=function(){return"Редактор изображений"};F.prototype.load=function(context,owner_id,image){this.clear();if(!this._callback_name){this._callback_name=[MD,'callback'].join('');window[this._callback_name]=this.on_frame_callback.bindToObject(this)};this.getRole('frame').get(0).removeEventListener('error',this.on_frame_error.bindToObject(this));this.getRole('frame').get(0).src='';this.getRole('frame').get(0).addEventListener('error',this.on_frame_error.bindToObject(this),true);var url=["/MediaAPI/ImageFly/get_editor?context=",context,'&owner_id=',owner_id,'&image=',image,'&naq=',(new Date()).getTime(),'&callback=',encodeURIComponent(this._callback_name)].join('');this.showLoader();this.getRole('frame').get(0).src=url;return this};F.prototype.on_frame_error=function(){};F.prototype.on_frame_callback=function(error_info){this.hideLoader();if(error_info);return this};F.prototype.clear=function(){this.getRole('frame').get(0).removeEventListener('error',this.on_frame_error.bindToObject(this));this.LEM.Run('RESET_CONTENT');this.clearCallbacks();this.getRole('frame').attr('src','');return this};F.prototype.hideclear=function(){return this.hide().clear()};F.prototype.onCommandCancel=function(){this.runCallback();return this.hideclear()};F.prototype.onRequiredComponentFail=function(){U.TError("component load error")};Y.reportSuccess(FQCN,F())};if(imports.length){window.Eve.EFO.EFOPromise.waitForArray(imports).done(initPlugin).fail(function(){Y.report_fail(FQCN,"Ошибке при загрузке зависимости")})}else initPlugin()})()