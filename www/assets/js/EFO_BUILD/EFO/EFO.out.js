/*=====GENERATING: 19.03.2019 15:08:56=======*/;
;/*========== INCLUDE @Utils/Utils========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.U?false:initPlugin()
function initPlugin(){var C=0,FN=0,U={},SW=null,EFO=window.Eve.EFO,SWH=null
function functionUID(){return'F'+(++FN)}
function UID(xp){xp&&typeof xp==='string'&&xp.length?false:xp='uid_';return xp+(++C)}
function RUID(xp){xp&&typeof xp==='string'&&xp.length?false:xp='uid_';return xp+C}
function NUID(){return(++C)}
function RNUID(){return C+0}
function UUID(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=='x'?r:(r&0x3|0x8);return v.toString(16)})}
function isCallable(x){return x&&typeof x==='function'?true:false}
function isObject(x){return x&&typeof x==='object'?true:false}
function isArray(x){return isObject(x)&&(x instanceof Array)?true:false}
function safeArray(x){return isArray(x)?x:[]}
function NEArray(x,def){return isArray(x)&&x.length?x:def}
function safeObject(x){return isObject(x)?x:{}}
function isError(x){return U.isObject(x)&&(x instanceof Error)?true:false}
function isDOM(x){return(isObject(x)&&(x instanceof HTMLElement))}
function isJQuery(x){return(isObject(x)&&(window.jQuery)&&(x instanceof jQuery))}
function safeError(x){if(isError(x))return x;try{return new Error(x.toString())}catch(e){return e}}
function normalizeConstructor(x){if(isCallable(x)){x.is=function(xx){return isObject(xx)&&(xx instanceof x)?true:false};x.F=function(a,b,c,d,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,xx,y,w,v,z){return new x(a,b,c,d,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,xx,y,w,v,z)}};return x}
function bindTo(obj,func){if(!isCallable(func))throw new Error("bind of non callable");if(!isObject(obj))throw new Error("bind to non object");if(!isCallable(func._Eve_EFO_getFUID))throw new Error("First generation function - cant bind");isObject(obj._Eve_EFO_binds)?false:obj._Eve_EFO_binds={};(func._Eve_EFO_getFUID()in obj._Eve_EFO_binds)?false:obj._Eve_EFO_binds[func._Eve_EFO_getFUID()]=function(){return func.apply(obj,Array.prototype.slice.call(arguments))};return obj._Eve_EFO_binds[func._Eve_EFO_getFUID()]}
function bindToWP(obj,func){if(!isCallable(func))throw new Error("bind of non callable");if(!isObject(obj))throw new Error("bind to non object");if(!isCallable(func._Eve_EFO_getFUID))throw new Error("First generation function - cant bind");isObject(obj._Eve_EFO_binds_wp)?false:obj._Eve_EFO_binds_wp={};(func._Eve_EFO_getFUID()in obj._Eve_EFO_binds_wp)?false:obj._Eve_EFO_binds_wp[func._Eve_EFO_getFUID()]=function(){return func.apply(obj,[this].concat(Array.prototype.slice.call(arguments)))};return obj._Eve_EFO_binds_wp[func._Eve_EFO_getFUID()]}
function objectCreate2(COP){if(!isCallable(COP))throw new Error("invalid object create call:need function")
function F(){};F.prototype=COP.prototype;var ro=new F();return ro}
function initMixines(x){if(isCallable(x)){var mixs=isArray(x.mixines)?x.mixines:[],emix=safeArray(x.prototype.__default_mixines);mixs=mixs.concat(emix);var umix={};x.prototype.mixinesToInit=[];for(var i=0;i<mixs.length;i++)if(!(mixs[i]in umix)){var mixc=U.getItemOnPath(EFO.Mixines,mixs[i],null);if(isCallable(mixc)){for(var k in mixc.prototype)if(mixc.prototype.hasOwnProperty(k)&&isCallable(mixc.prototype[k]))k==='init'?false:x.prototype[k]=mixc.prototype[k];x.prototype.mixinesToInit.push(mixc.prototype.init)};umix[mixs[i]]=mixs[i]}};return x}
function ScrollWidthDetector(){return ScrollWidthDetector.is(SWH)?SWH:ScrollWidthDetector.is(this)?this.init():ScrollWidthDetector.F()};normalizeConstructor(ScrollWidthDetector);ScrollWidthDetector.prototype._w=null;ScrollWidthDetector.prototype.init=function(){SWH=this;return this};ScrollWidthDetector.prototype.get=function(){if(this._w===null)this.measure();return this._w};ScrollWidthDetector.prototype.mesaure=function(){var div=document.createElement('div');div.style.width="100px";div.style.height="100px";div.style.overflow="auto";div.style.position="absolute";div.style.top="-5000";div.style.left="-5000";var div2=document.createElement('div');div2.style.height="200px";div.appendChild(div2);this.getBody().appendChild(div);var delta=div.offsetWidth-div2.offsetWidth;div.remove();div=null;this._w=EFO.U.FloatMoreEqOr(delta,0,0);return this._w};ScrollWidthDetector.prototype.getBody=function(){var b=document.getElementsByTagName('body');return b&&b.length?b[0]:document.documentElement}
function mkArray(input,unique,separator){separator=U.defined(separator)?separator:',';unique=U.anyBool(unique,true);if(isArray(input))return input;if(U.NEString(input,'')){var inputA=safeArray(input.split(separator)),uq=unique?{}:null,o=[];for(var i=0;i<inputA.length;i++){var t=U.NEString(inputA[i],false);if(t&&(!unique||!(t in uq))){o.push(t);unique?uq[t]=t:false}};return o};return[]}
function adler32(data){var MOD_ADLER=65521,a=1,b=0,index;for(index=0;index<data.length;++index){a=(a+data.charCodeAt(index))%MOD_ADLER;b=(b+a)%MOD_ADLER};var adler=a|(b<<16);return["ADLR32:",adler].join('')};var isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return(isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows())}}
function _isMobile(){return isMobile.any()?true:false}
function StringArrayToHash(sa){var r={};if(isArray(sa))for(var i=0;i<sa.length;i++)typeof(sa[i])==='string'?r[sa[i]]=sa[i]:false;return r};U.UID=UID;U.RUID=RUID;U.isObject=isObject;U.isArray=isArray;U.safeArray=safeArray;U.NEArray=NEArray;U.safeObject=safeObject;U.isCallable=isCallable;U.bindTo=bindTo;U.initMixines=initMixines;U.isError=isError;U.mkArray=mkArray;U.fixCon=U.FixCon=U.fixConstructor=U.normalizeConstructor=normalizeConstructor;U.safeError=safeError;U.isDOM=U.isDom=isDOM;U.isJQuery=U.isJquery=U.isjQuery=isJQuery;U.UUID=UUID;U.NUID=NUID;U.RNUID=RNUID;U.ADLER32=adler32;U.isMobile=_isMobile;U.StringArrayToHash=StringArrayToHash;U.defined=function(x){return typeof x==='undefined'?false:true};U.coalesceDefined=function(){var args=Array.prototype.slice.call(arguments);for(var i=0;i<args.length;i++)if(this.defined(args[i]))return args[i];return void(0)};U.coalesce=function(){var args=Array.prototype.slice.call(arguments);for(var i=0;i<args.length;i++)if(this.defined(args[i])&&args[i]!==null)return args[i];return null};U.anyBool=function(x,def){def=this.defined(def)?def:false;if(x===1||x==='1'||x===true||x==='true'||x==='on')return true;if(x===0||x==='0'||x===false||x==='false'||x==='off')return false;try{if(x.toLowerCase()==='true'||x.toLowerCase()==='on')return true;if(x.toLowerCase()==='false'||x.toLowerCase()==='off')return false}catch(e){};return def};U.isInt=function(x){var r=parseInt(x);return typeof r==='number'&&!isNaN(r)?true:false};U.IntOr=function(test,def){def=this.defined(def)?def:null;var t=parseInt(test);return typeof t==='number'&&!isNaN(t)?t:def};U.IntMoreOr=function(test,more,def){def=this.defined(def)?def:null;more=this.IntOr(more,0);var result=this.IntOr(test,def);return this.isInt(result)&&result>more?result:def};U.NEString=function(x,def){def=this.defined(def)?def:null;var test=null;if(typeof x!=='string'){try{test=this.isObject(x)||isCallable(x)?def:x.toString()}catch(e){return def}}else test=x;test=this.trim(test);return test&&test.length?test:def};U.coalesceString=function(){var args=Array.prototype.slice.call(arguments);for(var i=0;i<args.length;i++)if(U.NEString(args[i],null))return args[i];return void(0)};U.coalesceObject=function(){var args=Array.prototype.slice.call(arguments);for(var i=0;i<args.length;i++)if(U.isObject(args[i]))return args[i];return void(0)};U.coalesceCallable=function(){var args=Array.prototype.slice.call(arguments);for(var i=0;i<args.length;i++)if(U.isCallable(args[i]))return args[i];return void(0)};U.FloatMoreOr=function(x,more,def){def=this.defined(def)?def:null;x=parseFloat(U.prepareFloat(x));return(typeof x==='number'&&!isNaN(x)&&x>more)?x:def};U.FloatMoreEqOr=function(x,more,def){def=this.defined(def)?def:null;x=parseFloat(this.prepareFloat(x));return(typeof x==='number'&&!isNaN(x)&&x>=more)?x:def};U.FloatOr=function(x,def){def=this.coalesceDefined(def,null);var test=parseFloat(this.prepareFloat(x));return typeof test==='number'&&!isNaN(test)?test:def};U.prepareFloat=function(x){try{return x.toString().replace(/\s/g,'').replace(/\,/g,'.')}catch(e){};return x};U.UCFirst=function(x){if(!(typeof x==='string'))try{x=x.toString()}catch(e){return x};var xa=x.split('');return[xa.slice(0,1).join('').toUpperCase(),xa.slice(1).join('')].join('')};U.trim=function(x){if(typeof x!=='string')try{return x.toString().trim()}catch(e){return''};return x.trim()};U.padLeft=function(w,l,f){try{var s=w.toString().split('');f=this.defined(f)?f:' ';while(s.length<l)s=[f].concat(s);return s.join('')}catch(e){};return w};U.padRight=function(w,l,f){try{var s=w.toString().split('');f=this.defined(f)?f:' ';while(s.length<l)s.push(f);return s.join('')}catch(e){};return w};U.parseSQLDateTime=function(x,def){def=this.defined(def)?def:null;try{var rx=/^\s{0,}(\d{2,4})-(\d{1,2})-(\d{1,2})(?:\s{0,}(\d{1,2})(?:\s{0,}:\s{0,}(\d{1,2})(?:\s{0,}:\s{0,}(\d{1,2})){0,1}){0,1}){0,1}$/,m=rx.exec(x);if(m){var D=new Date();D.setFullYear(parseInt(m[1]),parseInt(m[2])-1,parseInt(m[3]));D.setHours(this.IntMoreOr(m[4],0,0),this.IntMoreOr(m[5],0,0),this.IntMoreOr(m[6],0,0));return D}else return def}catch(e){};return def};U.scan=function(h,w){var R={};if(window.jQuery&&isCallable(window.jQuery)&&(h instanceof window.jQuery))h.find('[data-'+w+']').each(function(){var T=jQuery(this),N=U.NEString(T.data(w));N?R[N]=T:false});return R};U.scanFull=function(h,w){var R={};if(window.jQuery&&isCallable(window.jQuery)&&(h instanceof window.jQuery))h.find('[data-'+w+']').each(function(){var T=jQuery(this),N=U.NEString(T.data(w));N?R[N]=(R[N]?R[N].add(T):T):false});return R};U.hasProp=function(x,prp){prp=this.NEString(prp,null);return(this.isObject(x)&&prp&&(prp in x))?true:false};U.getProp=function(x,prp,def){def=this.coalesceDefined(def,null);return this.hasProp(x,prp)?x[prp]:def};U.path_exists=function(from,path){var spath=this.NEString(path,'').split('.');from=isObject(from)?from:null;if(!from||!spath.length)return false;var c=from;for(var i=0;i<spath.length-1;i++){if(U.isObject(c)&&this.NEString(spath[i])&&U.isObject(c[spath[i]])){c=c[spath[i]];continue};return false};var sp=this.NEString(spath[spath.length-1],null);return(U.isObject(c)&&sp&&U.hasProp(c,sp))?true:false};U.getItemOnPath=function(from,path,def){def=this.coalesceDefined(def,null);var spath=this.NEString(path,'').split('.');from=isObject(from)?from:null;if(!from||!spath.length)return def;var c=from;for(var i=0;i<spath.length-1;i++){if(U.isObject(c)&&this.NEString(spath[i])&&U.isObject(c[spath[i]])){c=c[spath[i]];continue};return def};var sp=this.NEString(spath[spath.length-1],null);return(U.isObject(c)&&sp&&U.hasProp(c,sp))?c[sp]:def};U.getItemOnPathGlobal=function(path,def){return this.getItemOnPath(window,path,def)};U.setItemOnPath=function(into,path,value){into=this.isObject(into)?into:null;var spath=this.NEString(path,'').split('.');if(!into||!spath.length)return;var c=into;for(var i=0;i<spath.length-1;i++){if(!this.NEString(spath[i],null)){this.THREAD_ERR("Invalid path:"+path);return};U.isObject(c[spath[i]])?false:c[spath[i]]={};c=c[spath[i]]};var sp=this.NEString(spath[spath.length-1],null);U.isObject(c)&&sp?c[sp]=value:this.THREAD_ERR("invalidPath:"+path)};U.getXpercentOfY=function(x,y){y=this.FloatOr(y,0);y=this.FloatOr(x,0);return(y/100)*x};U.getPercentsOfYisX=function(x,y){x=this.FloatOr(x,0);y=this.FloatOr(y,0);var pc1=Math.abs(y/100);return pc1===0?0:(Math.abs(x)/pc1)};U.getScrollWidth=function(){return ScrollWidthDetector().get()};U.AbstractError=function(){this.ERR("AbstractError")};U.ERR=function(message){throw new Error(message)};U.Error=function(x){if(isError(x))throw x;throw new Error(x)};U.TError=function(x){isError(x)?this.THREAD_ERRO(x):this.THREAD_ERR(x)};U.THREAD_ERR=function(message){var x=new Error(message);window.setTimeout(function(){throw x},0)};U.THREAD_ERRO=function(x){if(this.isObject(x)&&(x instanceof Error))window.setTimeout(function(){throw x},0)};Object.defineProperty(Function.prototype,'_Eve_EFO_getFUID',{enumerable:false,configurable:false,writable:false,value:function(){this._Eve_EFO_FUID?false:this._Eve_EFO_FUID=functionUID();return this._Eve_EFO_FUID}});Object.defineProperty(Object.prototype,'_Eve_EFO_binds',{enumerable:false,configurable:false,writable:true,value:null});if(!isCallable(Function.prototype.bindToObject))Object.defineProperty(Function.prototype,'bindToObject',{enumerable:false,configurable:false,writable:false,value:function(o){return bindTo(o,this)}});if(!isCallable(Function.prototype.bindToObjectWParam))Object.defineProperty(Function.prototype,'bindToObjectWParam',{enumerable:false,configurable:false,writeable:false,value:function(o){return bindToWP(o,this)}});if(!isCallable(Function.prototype.xInherit))Object.defineProperty(Function.prototype,'xInherit',{enumerable:false,configurable:false,writable:false,value:function(superFunc){this.prototype=objectCreate2(superFunc);this.prototype.constructor=this;return this}});if(!isCallable(Function.prototype.xInheritE))Object.defineProperty(Function.prototype,'xInheritE',{enumerable:false,configurable:false,writable:false,value:function(superFunc){this.prototype=objectCreate2(superFunc);this.prototype.constructor=this;return normalizeConstructor(this)}});window.Eve.EFO.U=U;if(!DocumentFragment.prototype.getElementById)Object.defineProperty(DocumentFragment.prototype,'getElementById',{enumerable:false,configurable:false,writable:false,value:function(o){function deepscan(node,id,result){if(!result.found)if(node.childNodes&&node.childNodes.length)for(var i=0;i<node.childNodes.length;i++){var cnode=node.childNodes[i];if(cnode.id&&cnode.id==id){result.found=cnode}else deepscan(cnode,id,result)}};var result={found:null};deepscan(this,o,result);return result.found}});if(!(Element.prototype.remove))Object.defineProperty(Element.prototype,'remove',{enumerable:false,configurable:false,writable:false,value:function(){if(this.parentNode)this.parentNode.removeChild(this)}})}})();
;/*========== INCLUDE @Utils/Checks========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Checks?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,T={clearDigits:function(x){try{return x.toString().replace(/\D/g,'')}catch(e){};return null},formatPhone:function(x){var y=this.clearDigits(x);try{var m=/^(\d{1,})(\d{3})(\d{3})(\d{2})(\d{2})$/.exec(y.toString());if(m)return['+',m[1],' (',m[2],') ',m.slice(3).join(' ')].join('')}catch(e){};return null},tryFormatPhone:function(x){var y=this.formatPhone(x);return y?y:x},isEmail:function(x){try{return/^[^@]{1,}@[^@]{1,}\.[^@\.]{1,}$/.test(x.toString())}catch(e){};return false},formatAccountNumber:function(x){try{var y=this.clearDigits(x),m=/^(\d{5})(\d{5})(\d{5})(\d{5})$/.exec(y.toString());return m?m.slice(1).join(' '):x}catch(e){};return x},isAccountNumber:function(x){try{var y=this.clearDigits(x),m=/^(\d{5})(\d{5})(\d{5})(\d{5})$/.exec(y.toString());return m?m.slice(1).join(' '):false}catch(e){};return false},prepareFloat:function(x){try{return x.toString().replace(/\s/g,'').replace(/\,/g,'.')}catch(e){};return x},formatPrice:function(num,dec){dec=U.IntMoreOr(dec,0,2);var val=parseFloat(this.prepareFloat(num));val=typeof val==='number'&&!isNaN(val)?val:0;return val.toFixed(dec).toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,'$1 ')},formatPriceNSD:function(num,dec){dec=U.IntMoreOr(dec,0,2);var val=parseFloat(this.prepareFloat(num));val=typeof val==='number'&&!isNaN(val)?val:0;var e=val.toFixed(dec).toString(),ae=e.split('.'),r=[ae[0].replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,'$1 ')];return[r,ae[1]?ae[1]:'0000'].join('.')},formatBic:function(x){try{var y=this.clearDigits(x),m=/^(\d{3})(\d{3})(\d{3})$/.exec(y.toString());return m?m.slice(1).join(' '):x}catch(e){return x}},isBIC:function(x){try{var y=this.clearDigits(x),m=/^(\d{3})(\d{3})(\d{3})$/.exec(y.toString());return m?m.slice(1).join(' '):false}catch(e){};return false},formatINN:function(x){try{var y=this.clearDigits(x);if(y.length===10){return this.checkINN10(y)}else if(y.length===12)return this.checkINN12(y)}catch(e){};return null},checkINN10:function(y){if(y.length==10){var ld=parseInt(y[9]),dd=[],ch=[2,4,10,3,5,9,4,6,8],crc=0;for(var i=0;i<9;i++)crc+=parseInt(y[i])*ch[i];crc=(crc%11)%10;return(crc==ld)?this.formatInn10(y):null};return null},checkINN12:function(y){if(y.length==12){var ld12=parseInt(y[11]),ld11=parseInt(y[10]),ch1=[7,2,4,10,3,5,9,4,6,8],ch2=[3,7,2,4,10,3,5,9,4,6,8],crc1=0,crc2=0;for(var i=0;i<11;i++){crc1+=i<10?parseInt(y[i])*ch1[i]:0;crc2+=parseInt(y[i])*ch2[i]};crc1=(crc1%11)%10;crc2=(crc2%11)%10;return(crc1==ld11&&crc2==ld12)?this.formatInn12(y):null};return null},formatInn10:function(y){var m=/^(\d{5})(\d{5})$/.exec(y);return m?m.slice(1).join(' '):null},formatInn12:function(y){var m=/^(\d{4})(\d{4})(\d{4})$/.exec(y);return m?m.slice(1).join(' '):null}};EFO.Checks=T}})();
;/*========== INCLUDE @Utils/TemplateManager========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.TemplateManager?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,H=null,T={}
function F(){return F.is(H)?H:(F.is(this)?this.init():F.F())};U.normalizeConstructor(F);F.prototype.base_url=null;F.prototype.init=function(){T={};H=this;return this};F.prototype.add=function(name,tpl,prefix){var key=this.prepareKey(name,prefix);T[key]=tpl;return this};F.prototype.addObject=function(x,prefix){if(U.isObject(x))for(var k in x)if(x.hasOwnProperty(k)&&typeof(x[k])==='string'){var key=this.prepareKey(k,prefix);T[key]=x[k]};return this};F.prototype.exists=function(x,prefix){try{var key=this.prepareKey(x,prefix);return(key in T)?true:false}catch(e){U.THREAD_ERRO(e);return false}};F.prototype.prepareKey=function(name,prefix){prefix=U.NEString(prefix,null);return(prefix?[prefix,name].join('.'):name).toLowerCase()};F.prototype.prepareTemplate=function(key){var ta=T[key];if(ta.k&&ta.c&&U.isArray(ta.k)){T[key]=this._runpreparer(ta.k,ta.c);return T[key]};return'Error prepare template'};F.prototype._runpreparer=function(keys,content){var mid=this._runVoc(keys,content);return this._runRle(mid)};F.prototype._runVoc=function(ka,c){var keys=this.prpepareKeysVocDec();return c.replace(/\f(.)/,function(n,w){U.IntMoreOr(w,-1,null)!==null?w=["s",w].join(''):false;return ka[keys[w]]})};F.prototype._runRle=function(mid){var keys=this.prepareRleKeys(),self=this;return mid.replace(/\b(.)(.)/,function(w,l,r){return self.strrep(l,keys[r])})};F.prototype.prepareRleKeys=function(){if(!this._rleKeys){var sk=this.prepareLinearKeys();this._rleKeys={};for(var i=0;i<sk.length;i++){var key=sk[i];U.IntMoreOr(key,-1,null)!==null?key=["s",key].join(''):false;this._rleKeys[key]=i+4}};return this._rleKeys};F.prototype.strrep=function(x,co){var t=[];for(var i=0;i<co;i++)t.push(x);return t.join('')};F.prototype.prepareLinearKeys=function(){if(!this._linearKeys){var s='abcdefghijklmnopqrstuvwxyz';s+=s.toUpperCase();s+='!@#$%^&*()_+={[}]|?.,:;<>~`1234567890';this._linearKeys=s.split('')};return this._linearKeys};F.prototype.prepareKeysVocDec=function(){if(!this._vocKeys){var $lin=this.prepareLinearKeys();this._vocKeys={};for(var i=0;i<$lin.length;i++){var k=$lin[i];U.IntMoreOr(k,-1,null)!==null?k=["s",k].join(''):false;this._vocKeys[k]=i}};return this._vocKeys};F.prototype.get=function(name,prefix){try{var key=this.prepareKey(name,prefix);if(key in T){if(U.isObject(T[key]))this.prepareTemplate(key);return T[key]};U.THREAD_ERR("No template: "+name);return''}catch(e){U.THREAD_ERRO(e)};return''};F.prototype.setBaseUrl=function(x){this.base_url=U.NEString(x,null);return this};F.prototype.load=function(name){var R=jQuery.Deferred(),self=this.onBeginLoading();jQuery.get(this.base_url+name).done(function(d){self.onTemplateLoaded(name,d,R)}).fail(function(){self.onTemplateLoadFail(name,R)}).always(this.onEndLoading.bindToObject(this));return R};F.prototype.onTemplateLoaded=function(name,d,R){this.add(name,d);R.resolve(this);return this};F.prototype.onTemplateLoadFail=function(name,R){R.reject();U.THREAD_ERRO(new Error("Error loading template: "+name));return this};F.prototype.onBeginLoading=function(){EFO.GEM().Run('ON_AJAX_REQUEST_BEGIN','TemplateManager');return this};F.prototype.onEndLoading=function(){EFO.GEM().Run('ON_AJAX_REQUEST_END','TemplateManager');return this};F.prototype.prepareSubKey=function(x){var xs=x.split('.'),o=[];for(var i=0;i<xs.length;i++)o.push(U.UCFirst(xs[i]));return o.join('')};EFO.TemplateManager=F}})();
;/*========== INCLUDE @Utils/GP========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.GP?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,H=null,GP=null
function F(x){return F.is(H)?H:(F.is(this)?this.init(x):F.F(x))};U.normalizeConstructor(F);F.prototype.savePath=null;F.prototype.init=function(x){H=this;this.savePath=U.NEString(x,this.getLocationPath());return this.load()};F.prototype.getLocationPath=function(){var p=window.location.pathname;p=U.NEString(p,'default_location');p=['EFOGP',p.replace(/\\\//g,'.')].join(':');return p};F.prototype.load=function(){var AG=null;try{AG=JSON.parse(window.localStorage.getItem(this.savePath));AG=U.isObject(AG)?AG:null}catch(e){AG=null;U.THREAD_ERRO(e)};GP=U.isObject(AG)?AG:{};return this};F.prototype.save=function(){GP=U.isObject(GP)?GP:{};try{window.localStorage.setItem(this.savePath,JSON.stringify(GP))}catch(E){U.THREAD_ERRO(E)};return this};F.prototype.get=function(path,def){return U.getItemOnPath(GP,path,def)};F.prototype.setSave=function(path,val){return this.set(path,val).save()};F.prototype.set=function(path,val){U.setItemOnPath(GP,path,val);return this};EFO.GP=F}})();
;/*========== INCLUDE @Utils/GLEM========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Events=window.Eve.EFO.Events||{};window.Eve.EFO.Events.GEM?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,H=null,C=0
function EID(){return(++C)}
function F(){return F.is(H)?H:(F.is(this)?this.init():F.F())};U.normalizeConstructor(F);F.prototype.IX=null;F.prototype.init=function(){H=this;this.IX={};return this};F.prototype.On=function(en,co,ca){var ev=EV(en,co,ca);if(ev.isValid()){U.isArray(this.IX[ev.name])?false:this.IX[ev.name]=[];this.IX[ev.name].push(ev);return ev};return null};F.prototype.Off=function(x){var IX=this.IX,euid=null;if(EV.is(x)){euid=x.id}else euid=U.IntMoreOr(x);if(euid)for(var K in this.IX)if(this.IX.hasOwnProperty(K)&&U.isArray(IX[K])){var T=[];for(var i=0;i<IX[K].length;i++)if(IX[K][i].id!==euid)T.push(IX[K][i]);IX[K]=T};return this};F.prototype.Run=function(en){var IX=this.IX,EN=EV.PEN(en);if(EN&&IX.hasOwnProperty(EN)&&U.isArray(IX[EN])&&IX[EN].length){var args=Array.prototype.slice.call(arguments,1);for(var i=0;i<IX[EN].length;i++)try{IX[EN][i].run(args)}catch(e){U.THREAD_ERRO(e)}};return this};F.prototype.trigger=F.prototype.Trigger=F.prototype.run=F.prototype.Raise=F.prototype.raise=F.prototype.Run;F.prototype.ON=F.prototype.on=F.prototype.addListener=F.prototype.listener=F.prototype.Listener=F.prototype.onEvent=F.prototype.onevent=F.prototype.On;F.prototype.OFF=F.prototype.off=F.prototype.removeListener=F.prototype.offEvent=F.prototype.OffEvent=F.prototype.Off
function LEM(){return LEM.is(this)?this.init():LEM.F()};LEM.xInheritE(F);LEM.prototype.init=function(){this.IX={};return this}
function EV(en,co,ca){return EV.is(this)?this.init(en,co,ca):EV.F().init(en,co,ca)};U.normalizeConstructor(EV);EV.PEN=function(x){return U.NEString(x)};EV.prototype.id=null;EV.prototype.name=null;EV.prototype.ca=null;EV.prototype.co=null;EV.prototype.a=true;EV.prototype.init=function(en,co,ca){this.id=EID();this.name=EV.PEN(en);this.co=U.isObject(co)?co:null;this.ca=U.isCallable(ca)?ca:null;return this};EV.prototype.isValid=function(){return this.id&&this.name&&this.ca?true:false};EV.prototype.enable=function(){this.a=true;return this};EV.prototype.disable=function(){this.a=false;return this};EV.prototype.run=function(args){this.a&&U.isCallable(this.ca)?(this.ca.apply((U.isObject(this.co)?this.co:this),(U.isArray(args)?args:[]))):false;return this};F.isEvent=EV.is;F.Event=EV;LEM.isEvent=EV.is;LEM.Event=EV;EFO.Events.GEM=F;EFO.Events.LEM=LEM}})();
;/*========== INCLUDE @Utils/DnDManager========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.DnDManager?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,H=null
function F(){return F.is(H)?H:F.is(this)?this.init():F.F()};U.normalizeConstructor(F);F.prototype.init=function(){H=this;this.LEM=EFO.Events.LEM();return this.setDragHandlers()};F.prototype._startX=null;F.prototype._startY=null;F.prototype._dragType=null;F.prototype._dragging=null;F.prototype._customData=null;F.prototype.clearSelection=function(){try{if(window.getSelection){if(window.getSelection().empty){window.getSelection().empty()}else if(window.getSelection().removeAllRanges)window.getSelection().removeAllRanges()}else if(document.selection)document.selection.empty()}catch(e){U.THREAD_ERRO(e)};return this};F.prototype.setDragHandlers=function(){jQuery(document).on('mousedown','.EFODraggable',this.onDragPreInit.bindToObject(this));return this};F.prototype.onDragPreInit=function(e){this._startX=e.pageX;this._startY=e.pageY;var element=jQuery(e.currentTarget);this._dragType=element.data('efodragtype');this._dragging=element;this._customData={};return this._dragType?this.runWatch(e):this};F.prototype.runWatch=function(e){jQuery(document).on('mousemove',this.checkDragStart.bindToObject(this));jQuery(document).on('mouseup',this.abortDragFull.bindToObject(this));return this.checkDragStart(e)};F.prototype.checkDragStart=function(e){var deltaX=Math.max(e.pageX,this._startX)-Math.min(e.pageX,this._startX),deltaY=Math.max(e.pageY,this._startY)-Math.min(e.pageY,this._startY),offset=Math.sqrt(Math.pow(deltaX,2)+Math.pow(deltaY,2));return(offset>15)?this.startDrag(e):this};F.prototype.startDrag=function(e){this.LEM.Run('ON_BEFORE_DRAG',this._dragType,this._dragging,this._customData,e);this.LEM.Run('ON_BEFORE_DRAG_'+this._dragType,this._dragging,this._customData,e);this.abortDrag();this.LEM.Run('ON_DRAG_STARTS',this._dragType,this._dragging,this._customData,e);this.LEM.Run('ON_DRAG_STARTS_'+this._dragType,this._dragging,this._customData,e);this.helper?false:this.createHelper();this.helper.show();jQuery('body').addClass('EFODragNow');this.positeHelper(e);jQuery(document).on('mouseup','.EFODropTarget',this.dragged.bindToObject(this));jQuery(document).on('mouseup',this.abortDragFull.bindToObject(this));jQuery(document).on('mouseenter','.EFODropTarget',this.dragOver.bindToObject(this));jQuery(document).on('mouseleave','.EFODropTarget',this.dragLeave.bindToObject(this));jQuery(document).on('mousemove',this.positeHelper.bindToObject(this));return this};F.prototype.createHelper=function(){this.helper=jQuery(EFO.TemplateManager().get('draghelper'));this.helper.appendTo('body');return this};F.prototype.positeHelper=function(e){this.helper.css({left:e.pageX+5+'px',top:e.pageY+5+'px'});return this};F.prototype.abortDrag=function(){this.helper?this.helper.hide():false;jQuery(document).off('mouseup','.EFODropTarget',this.dragged.bindToObject(this));jQuery(document).off('mouseup',this.abortDragFull.bindToObject(this));jQuery(document).off('mousemove',this.positeHelper.bindToObject(this));jQuery(document).off('mousemove',this.checkDragStart.bindToObject(this));jQuery(document).off('mouseenter','.EFODropTarget',this.dragOver.bindToObject(this));jQuery(document).off('mouseleave','.EFODropTarget',this.dragLeave.bindToObject(this));jQuery('body').removeClass('EFODragNow');this.LEM.Run('ABORT_DRAG_'+this._dragType);return this};F.prototype.clearDragData=function(){this._dragType=null;this._dragging=null;this._customData=null;return this};F.prototype.abortDragFull=function(){return this.abortDrag().clearDragData()};F.prototype.dragOver=function(e){var T=jQuery(e.currentTarget).addClass('EFODragOver');this.LEM.Run('ON_DRAG_OVER',this,T,e);this.LEM.Run('ON_DRAG_OVER_'+this._dragType,this,T,e);return this};F.prototype.dragLeave=function(e){var T=jQuery(e.currentTarget).removeClass('EFODragOver');this.LEM.Run('ON_DRAG_LEAVE',this,T,e);this.LEM.Run('ON_DRAG_LEAVE_'+this._dragType,this,T,e);return this};F.prototype.dragged=function(e){var T=jQuery(e.currentTarget),target_types=T.data('efodroptypes'),ta=target_types.split(','),r={};for(var i=0;i<ta.length;i++)r[ta[i]]=ta[i];if(this._dragType&&(this._dragType in r)){this.LEM.Run('ON_DROPPED',this,T,e);this.LEM.Run('ON_DROPPED_'+this._dragType,this,T,e)};return this.abortDragFull()};EFO.DnDManager=F}})();
;/*========== INCLUDE @Utils/CookieMonitor========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.CookieMonitor?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,APS=Array.prototype.slice
function CookieMonitor(){return(CookieMonitor.is(this)?this.init:CookieMonitor.F).apply(this,APS.call(arguments))};var F=U.FixCon(CookieMonitor),FP=F.prototype;FP._cookie_name=null;FP._callback=null;FP._context=null;FP._timeout=null;FP.init=function(cname,context,callback){this._cookie_name=U.NEString(cname,null);this._callback=U.isCallable(callback)?callback:(U.isCallable(context)?context:null);this._context=U.isObject(context)?context:(U.isObject(callback)?callback:null);this._cookie_name&&this._callback?false:U.Error('CookieMonitor requires cookie name and callback');this.remove_cookie();this.start_monitor();return this};FP.reset_timeout=function(){if(this._timeout){window.clearTimeout(this._timeout);this._timeout=null};return this};FP.start_monitor=function(){this.reset_timeout();this._timeout=window.setTimeout(this.on_tick.bindToObject(this),1e3);return this};FP.on_tick=function(){this.reset_timeout();if(this.cookie_exists()){this.remove_cookie();this.run_callback();this.destroy_monitor()}else this.start_monitor();return this};FP.getCookie=function(name){var matches=document.cookie.match(new RegExp("(?:^|; )"+name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,'\\$1')+"=([^;]*)"));return matches?decodeURIComponent(matches[1]):undefined};FP.cookie_exists=function(){return!(this.getCookie(this._cookie_name)===void(0))};FP.remove_cookie=function(){this.setCookie(this._cookie_name,"",{expires:-1});return this};FP.setCookie=function(name,value,options){options=options||{};var expires=options.expires;if(typeof expires=="number"&&expires){var d=new Date();d.setTime(d.getTime()+expires*1e3);expires=options.expires=d};if(expires&&expires.toUTCString)options.expires=expires.toUTCString();value=encodeURIComponent(value);var updatedCookie=name+"="+value;for(var propName in options){updatedCookie+="; "+propName;var propValue=options[propName];if(propValue!==true)updatedCookie+="="+propValue};document.cookie=updatedCookie};FP.run_callback=function(){try{this._callback.apply(this._context?this._context:this,[this])}catch(e){U.TError(e)};return this};FP.destroy_monitor=function(){this.reset_timeout();this._callback=null;this._context=null;return this};EFO.CookieMonitor=F}})();
;/*========== INCLUDE @Mixines/Mixine========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.Mixine?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};U.normalizeConstructor(F);M.Mixine=F}})();
;/*========== INCLUDE @Mixines/Commandable========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.Commandable?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);F.prototype.init=function(){this.handle.off('click',this.onCommand.bindToObject(this));this.handle.on('click','[data-command]',this.onCommand.bindToObject(this));return this};F.prototype.onCommand=function(e){var T=jQuery(e.currentTarget),cmd=U.NEString(T.data('command'));if(cmd){if(U.isCallable(this._commandable_can_exec_handler)&&!this._commandable_can_exec_handler(cmd,T,e)){e.stopPropagation();if(U.anyBool(T.data('prevent'),true))e.preventDefault?e.preventDefault():e.returnValue=false;return this};var fn=['onCommand',U.UCFirst(cmd)].join('');if(U.isCallable(this[fn]))try{if(!U.anyBool(T.data('keepPropagation'),false))e.stopPropagation();if(U.anyBool(T.data('prevent'),true))e.preventDefault?e.preventDefault():e.returnValue=false;this[fn].apply(this,[T,e])}catch(e){U.THREAD_ERRO(e);return this}};return this};M.Commandable=F}})();
;/*========== INCLUDE @Mixines/CommandDelegate========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.CommandDelegate?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);F.prototype.init=function(){this.handle.off('click',this.onDelegateCommand.bindToObject(this));this.handle.on('click','[data-delegated-command]',this.onDelegateCommand.bindToObject(this));return this};F.prototype.onDelegateCommand=function(e){var T=jQuery(e.currentTarget),cmd=U.NEString(T.data('delegatedCommand')),delegate=this._get_command_delegate();if(cmd){if(U.isCallable(delegate._commandable_can_exec_handler)&&!delegate._commandable_can_exec_handler(cmd,T,e,this)){e.stopPropagation();if(U.anyBool(T.data('prevent'),true))e.preventDefault?e.preventDefault():e.returnValue=false;return this};var fn=['onCommand',U.UCFirst(cmd)].join('');if(U.isCallable(delegate[fn]))try{if(!U.anyBool(T.data('keepPropagation'),false))e.stopPropagation();if(U.anyBool(T.data('prevent'),true))e.preventDefault?e.preventDefault():e.returnValue=false;delegate[fn].apply(delegate,[T,e,this])}catch(e){U.THREAD_ERRO(e);return this}};return this};F.prototype._get_command_delegate=function(){U.TError("CommandDelegate::_get_command_delegate must be overriden");return this};M.CommandDelegate=F}})();
;/*========== INCLUDE @Mixines/Monitorable========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.Monitorable?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);F.prototype.init=function(){this.handle.on('change','[data-monitor]',this.onMonitor.bindToObject(this));return this};F.prototype.onMonitor=function(e){var T=jQuery(e.currentTarget),cmd=U.NEString(T.data('monitor')),keep_prop=U.anyBool(T.data('keepMonitorPropagation'),false);if(cmd){var cmda=cmd.split(',');for(var ii=0;ii<cmda.length;ii++)if(cmda[ii]&&cmda[ii].length){var fn=['onMonitor',U.UCFirst(cmda[ii])].join('');if(U.isCallable(this[fn]))try{keep_prop?false:e.stopPropagation();(U.anyBool(T.data('prevent'),true))?(e.preventDefault?e.preventDefault():e.returnValue=false):false;this[fn].apply(this,[T,e])}catch(e){U.THREAD_ERRO(e);return this}}};return this};M.Monitorable=F}})();
;/*========== INCLUDE @Mixines/Monitorable_del========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.MonitorableDelegated?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);F.prototype.init=function(){this.handle.on('change','[data-monitor]',this.onMonitor.bindToObject(this));return this};F.prototype.onMonitor=function(e){var T=jQuery(e.currentTarget),cmd=U.NEString(T.data('monitor')),keep_prop=U.anyBool(T.data('keepMonitorPropagation'),false);if(cmd){var cmda=cmd.split(',');for(var ii=0;ii<cmda.length;ii++)if(cmda[ii]&&cmda[ii].length){var fn=['onMonitor',U.UCFirst(cmda[ii])].join('');if(U.isCallable(this.monitorable_get_delegate()[fn]))try{keep_prop?false:e.stopPropagation();(U.anyBool(T.data('prevent'),true))?(e.preventDefault?e.preventDefault():e.returnValue=false):false;this.monitorable_get_delegate()[fn].apply(this.monitorable_get_delegate(),[T,e,this])}catch(e){U.THREAD_ERRO(e);return this}}};return this};F.prototype.monitorable_get_delegate=function(){U.TError("MonitorableDelegated::monitorable_get_delegate must be overriden");return this};M.MonitorableDelegated=F}})();
;/*========== INCLUDE @Mixines/Roleable========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.Roleable?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);F.prototype.init=function(){this._roles=U.scan(this.handle,'role');return this};F.prototype.getRole=function(x){if(!(x in this._roles)){var fn=["__get_fake_role_",x].join('');this._roles[x]=U.isCallable(this[fn])?this[fn]():jQuery(null);this._roles[x]?false:this._roles[x]=jQuery(null)};return this._roles[x]};M.Roleable=F}})();
;/*========== INCLUDE @Mixines/Fieldable========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.Fieldable?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);F.prototype.init=function(){this._fields=U.scan(this.handle,'field');this.LEM.On('RESET_CONTENT',this,this.fieldable_clean);return this};F.prototype.getField=function(x){if(!(x in this._fields))this._fields[x]=jQuery(null);return this._fields[x]};F.prototype.getFields=function(){var R={};U.isObject(this._fields)?false:this._fields={};for(var k in this._fields)if(this._fields.hasOwnProperty(k)){var field=this.getField(k),fn="_get_field_"+k.replace(/\./g,'_');if(U.isCallable(this[fn])){R[k]=this[fn].call(this,field)}else if(field.is('input[type=checkbox]')){U.setItemOnPath(R,k,field.prop('checked')?1:0)}else if(field.is('input,textarea,select')){U.setItemOnPath(R,k,field.val())}else U.setItemOnPath(R,k,field.html())};return R};F.prototype.setFields=function(data){data=U.isObject(data)?data:{};U.isObject(this._fields)?false:this._fields={};for(var k in this._fields)if(this._fields.hasOwnProperty(k)){var field=this.getField(k),fn="_set_field_"+k.replace(/\./g,'_');if(U.isCallable(this[fn])){this[fn].call(this,data,field)}else if(U.path_exists(data,k)){if(field.is('input[type=checkbox]')){field.prop('checked',U.anyBool(U.getItemOnPath(data,k,false)))}else if(field.is('input,textarea,select')){field.val(U.getItemOnPath(data,k,null))}else field.html(U.getItemOnPath(data,k,null))}else this.setDefaultFieldValue(k)};return this};F.prototype.setDefaultFieldValue=function(field_name){var p=this.getField(field_name);if(p&&p.length){var pd=p.data('fielddefault');if(p.is('input[type=checkbox]')){var val=U.anyBool(pd,false);p.prop('checked',val)}else if(p.is('input,textarea')){var val=U.NEString(pd,'');p.val(val)}else if(p.is('select')){var val=U.NEString(pd,null);p.val(val)}else{var val=U.NEString(pd,'');p.html(val)}};return this};F.prototype.fieldable_clean=function(){this.setFields(null);return this};M.Fieldable=F}})();
;/*========== INCLUDE @Mixines/Fieldable_del========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.FieldableDelegated?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);var FP=F.prototype;F.prototype.init=function(){this.fieldable_rescan_fields();this.LEM.On('RESET_CONTENT',this,this.fieldable_delegated_clean);return this};FP.fieldable_rescan_fields=function(){this._delgated_fields=U.scan(this.handle,'field');return this};FP.getField=function(x){if(!(x in this._delgated_fields))this._delgated_fields[x]=jQuery(null);return this._delgated_fields[x]};F.prototype.getFields=function(){var R={};U.isObject(this._delgated_fields)?false:this._delgated_fields={};for(var k in this._delgated_fields)if(this._delgated_fields.hasOwnProperty(k)){var field=this.getField(k),fn="_get_field_"+k.replace(/\./g,'_');if(U.isCallable(this.fieldable_get_delegate()[fn])){R[k]=this.fieldable_get_delegate()[fn].call(this.fieldable_get_delegate(),field,this)}else if(field.is('input[type=checkbox]')){U.setItemOnPath(R,k,field.prop('checked')?1:0)}else if(field.is('input,textarea,select')){U.setItemOnPath(R,k,field.val())}else U.setItemOnPath(R,k,field.html())};return R};F.prototype.setFields=function(data){data=U.isObject(data)?data:{};U.isObject(this._delgated_fields)?false:this._delgated_fields={};for(var k in this._delgated_fields)if(this._delgated_fields.hasOwnProperty(k)){var field=this.getField(k),fn="_set_field_"+k.replace(/\./g,'_');if(U.isCallable(this.fieldable_get_delegate()[fn])){this.fieldable_get_delegate()[fn].call(this.fieldable_get_delegate(),data,field,this)}else if(U.path_exists(data,k)){if(field.is('input[type=checkbox]')){field.prop('checked',U.anyBool(U.getItemOnPath(data,k,false)))}else if(field.is('input,textarea,select')){field.val(U.getItemOnPath(data,k,null))}else field.html(U.getItemOnPath(data,k,null))}else this.setDefaultFieldValue(k)};return this};F.prototype.setDefaultFieldValue=function(field_name){var p=this.getField(field_name);if(p&&p.length){var pd=p.data('fielddefault');if(p.is('input[type=checkbox]')){var val=U.anyBool(pd,false);p.prop('checked',val)}else if(p.is('input,textarea')){var val=U.NEString(pd,'');p.val(val)}else if(p.is('select')){var val=U.NEString(pd,null);p.val(val)}else{var val=U.NEString(pd,'');p.html(val)}};return this};F.prototype.fieldable_delegated_clean=function(){this.setFields(null);return this};FP.fieldable_get_delegate=function(){U.TError('FieldableDelegated::fieldable_get_delegate must be overriden');return this};M.FieldableDelegated=F}})();
;/*========== INCLUDE @Mixines/Loaderable========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.Loaderable?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);F.prototype.init=function(){return this};F.prototype.showLoader=function(x){U.isCallable(this.getRole)?this.getRole('loader').show():false;return this};F.prototype.hideLoader=function(x){U.isCallable(this.getRole)?this.getRole('loader').hide():false;return this};M.Loaderable=F}})();
;/*========== INCLUDE @Mixines/Sizeable========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.Sizeable?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);F.prototype.init=function(){this.sizeable_init();return this};F.prototype.interface={sizeable_getMarker:function(){},sizeable_getWindow:function(){},sizeable_getContainer:function(){},sizeable_getParams:function(){},sizeable_setParams:function(){},sizeable_defaultWidth:function(){},sizeable_defaultHeight:function(){},sizeable_direction_x:function(){return 1},sizeable_direction_y:function(){return 1},events:{NEED_POSITE:"Требуется репозиционировать элемент",SIZEABLE_MIXINE_SIZED:'SIZEABLE_MIXINE_SIZED'}};F.prototype.sizeable_init=function(){var w=(U.isCallable(this.sizeable_defaultWidth)?this.sizeable_defaultWidth():80),h=(U.isCallable(this.sizeable_defaultHeight)?this.sizeable_defaultHeight():80),P=(U.isCallable(this.sizeable_getParams)?this.sizeable_getParams():{});try{if(U.isObject(P)&&('w'in P)&&('h'in P)&&typeof(P.h)==='number'&&!isNaN(P.h)&&typeof(P.w)==='number'&&!isNaN(P.w)){w=P.w;h=P.h}}catch(e){w=80,h=80};this.sizeable_getWindow().css({width:w+'%',height:h+'%'});this.sizeable_getMarker().on('mousedown',this.sizeable_enableResizeWatch.bindToObject(this));this.LEM.Run('NEED_POSITE');return this};F.prototype.sizeable_enableResizeWatch=function(e){e.stopPropagation();e.preventDefault?e.preventDefault():e.returnValue=false;this.sizeable_abortResize();this.sizeable_startX=e.pageX;this.sizeable_startY=e.pageY;jQuery(document).on('mousemove',this.sizeable_checkResizeBegins.bindToObject(this)).on('mouseup',this.sizeable_abortResize.bindToObject(this));return this};F.prototype.sizeable_checkResizeBegins=function(e){var deltaX=Math.max(e.pageX,this.sizeable_startX)-Math.min(e.pageX,this.sizeable_startX),deltaY=Math.max(e.pageY,this.sizeable_startY)-Math.min(e.pageY,this.sizeable_startY),delta=Math.sqrt(Math.pow(deltaX,2)+Math.pow(deltaY,2));if(delta>15)this.sizeable_runResizer(e);return this};F.prototype.sizeable_runResizer=function(e){this.sizeable_abortResize();this.sizeable_getWindow().addClass('sizeable_notransition');this.sizeable_rinit_height=parseFloat(this.sizeable_getWindow().outerHeight(true));this.sizeable_rinit_width=parseFloat(this.sizeable_getWindow().outerWidth(true));jQuery(document).on('mousemove',this.sizeable_updateSizeResize.bindToObject(this)).on('mouseup',this.sizeable_fixupResize.bindToObject(this));return this.sizeable_updateSizeResize(e)};F.prototype.sizeable_updateSizeResize=function(e){var deltaX=(e.pageX-this.sizeable_startX)*this.sizeable_direction_x(),deltaY=(e.pageY-this.sizeable_startY)*this.sizeable_direction_y(),cw=this.sizeable_rinit_width+deltaX*this.sizeable_scaleFactor(),ch=this.sizeable_rinit_height+deltaY*this.sizeable_scaleFactor(),rso={w:cw,h:ch,dx:deltaX,dy:deltaY};if(U.isCallable(this.___sizeable_size_restrict))this.___sizeable_size_restrict(rso);if(U.isCallable(this.___sizeable_size_dock))this.___sizeable_size_dock(rso,e);this.sizeable_getWindow().css({width:rso.w+'px',height:rso.h+'px'});this.LEM.Run('NEED_POSITE');return this};F.prototype.sizeable_get_sizes=function(){var ch=parseFloat(this.sizeable_getWindow().outerHeight(true)),cw=parseFloat(this.sizeable_getWindow().outerWidth(true)),ww=parseFloat(this.sizeable_getContainer().innerWidth()),wh=parseFloat(this.sizeable_getContainer().innerHeight()),wpc=cw/(ww/100),hpc=ch/(wh/100);return{w:wpc,h:hpc}};F.prototype.sizeable_fixupResize=function(e){this.sizeable_updateSizeResize(e);this.sizeable_abortResize();var c=this.sizeable_get_sizes();this.sizeable_getWindow().css({width:c.w+'%',height:c.h+'%'});this.sizeable_setParams(c);e.stopPropagation();e.preventDefault?e.preventDefault():e.returnValue=false;this.LEM.Run('NEED_POSITE');this.LEM.Run('SIZEABLE_MIXINE_SIZED',c);return this};F.prototype.sizeable_abortResize=function(){jQuery(document).off('mousemove',this.sizeable_updateSizeResize.bindToObject(this)).off('mouseup',this.sizeable_fixupResize.bindToObject(this)).off('mousemove',this.sizeable_checkResizeBegins.bindToObject(this)).off('mouseup',this.sizeable_abortResize.bindToObject(this));this.sizeable_getWindow().removeClass('sizeable_notransition');return this};F.prototype.sizeable_scaleFactor=function(){return 1};F.prototype.sizeable_direction_x=function(){return 1};F.prototype.sizeable_direction_y=function(){return 1};M.Sizeable=F}})();
;/*========== INCLUDE @Mixines/moveable_new========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.moveable?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);F.prototype.init=function(){this.___moveable_init();return this};F.prototype.interface={___moveable_get_window:function(){return null},___moveable_get_move_handle:function(){return null},___moveable_get_container:function(){return null},___moveable_get_tresold_value:function(){return 20},events:{MOVEABLE_MIXENE_MOVED:'MOVEABLE_MIXENE_MOVED'}};F.prototype.___moveable_init=function(){if(this.___moveable_get_window()&&this.___moveable_get_move_handle()&&this.___moveable_get_container())this.___moveable_get_move_handle().on('mousedown',this.___moveable_enable_watch.bindToObject(this));return this};F.prototype.___moveable_enable_watch=function(e){this.___moveable_abort_move();this.___moveable_start_x=e.pageX;this.___moveable_start_y=e.pageY;jQuery(document).on('mousemove',this.___moveable_check_tresold.bindToObject(this)).on('mouseup',this.___moveable_abort_move.bindToObject(this));return this};F.prototype.___moveable_check_tresold=function(e){var deltaX=Math.max(e.pageX,this.___moveable_start_x)-Math.min(e.pageX,this.___moveable_start_x),deltaY=Math.max(e.pageY,this.___moveable_start_y)-Math.min(e.pageY,this.___moveable_start_y),delta=Math.sqrt(Math.pow(deltaX,2)+Math.pow(deltaY,2));if(delta>this.___moveable_get_tresold_value())this.___moveable_start_mover(e);return this};F.prototype.___moveable_start_mover=function(e){this.___moveable_abort_move();this.___moveable_get_window().addClass('EFO__moveable__notransition');var pos=this.___moveable_get_window().position();this.___moveable_init_x=parseFloat(pos.left);this.___moveable_init_y=parseFloat(pos.top);jQuery(document).on('mousemove',this.___moveable_update_position.bindToObject(this)).on('mouseup',this.___moveable_fix_position.bindToObject(this));return this.___moveable_update_position(e)};F.prototype.___moveable_update_position=function(e){var dx=(e.pageX-this.___moveable_start_x),dy=(e.pageY-this.___moveable_start_y),cx=this.___moveable_init_x+dx,cy=this.___moveable_init_y+dy,cp={l:cx,t:cy};if(U.isCallable(this.___moveable_before_update_position))this.___moveable_before_update_position(cp);if(U.isCallable(this.___moveable_check_docking))this.___moveable_check_docking(cp,e);this.___moveable_get_window().css({left:cp.l+'px',top:cp.t+'px'});return this};F.prototype.___moveable_get_position=function(){var pos=this.___moveable_get_window().position(),cx=parseFloat(pos.left),cy=parseFloat(pos.top),ww=parseFloat(this.___moveable_get_container().innerWidth()),wh=parseFloat(this.___moveable_get_container().innerHeight()),wpc=cx/(ww/100),hpc=cy/(wh/100);return{l:wpc,t:hpc}};F.prototype.___moveable_fix_position=function(e){this.___moveable_update_position(e);this.___moveable_abort_move();var c=this.___moveable_get_position();this.___moveable_get_window().css({left:c.l+'%',top:c.t+'%'});this.LEM.Run('MOVEABLE_MIXENE_MOVED',c);return this};F.prototype.___moveable_abort_move=function(){jQuery(document).off('mousemove',this.___moveable_update_position.bindToObject(this)).off('mouseup',this.___moveable_fix_position.bindToObject(this)).off('mousemove',this.___moveable_check_tresold.bindToObject(this)).off('mouseup',this.___moveable_abort_move.bindToObject(this));this.___moveable_get_window().removeClass('EFO__moveable__notransition');return this};M.moveable=F}})();
;/*========== INCLUDE @Mixines/Tabbable========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.Tabbable?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);F.prototype.init=function(){this.handle.on('click','[data-tabheader]',this.onTabclick.bindToObject(this));this.LEM.On('RESET_CONTENT',this,this.Tabbable_reset);return this};F.prototype.onTabclick=function(e){var T=jQuery(e.currentTarget);T.addClass('EFOTabHeaderActive').parent().find('[data-tabheader]').not(T).removeClass('EFOTabHeaderActive');var cmd=U.NEString(T.data('tabheader'));if(cmd){this.handle.find('[data-tab]').not('[data-tab="'+cmd+'"]').removeClass('EFOTabActive');this.handle.find('[data-tab="'+cmd+'"]').addClass('EFOTabActive');var fn=['onTabSelected',U.UCFirst(cmd)].join('');if(U.isCallable(this[fn]))try{e.stopPropagation();if(U.anyBool(T.data('prevent'),true))e.preventDefault?e.preventDefault():e.returnValue=false;this[fn].apply(this,[T,e])}catch(e){U.THREAD_ERRO(e);return this}};return this};F.prototype.Tabbable_reset=function(){var a=this.handle.find('[data-tabheader][data-defaulttabheader]');a.length?false:this.handle.find('[data-tabheader]:first');a.click();return this};F.prototype.Tabbable_reselect=function(){var a=this.handle.find('.EFOTabHeaderActive');a&&a.length?a.click():this.Tabbable_reset();return this};M.Tabbable=F}})();
;/*========== INCLUDE @Mixines/Callbackable========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.Callbackable?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);F.prototype.init=function(){return this};F.prototype.setCallback=function(co,ca){var cb=CB(co,ca);if(cb&&cb.isValid())this._callbackable_push_callback(cb);return this};F.prototype.setCancelCallback=function(co,ca){var cb=CB(co,ca);if(cb&&cb.isValid())this._callbackable_push_cancel_callback(cb)};F.prototype._callbackable_push_cancel_callback=function(cb){if(CB.is(cb)){U.isArray(this._callbackable_cancel_callbacks)?false:this._callbackable_cancel_callbacks=[];this._callbackable_cancel_callbacks.push(cb)};return this};F.prototype._callbackable_push_callback=function(cb){if(CB.is(cb)){U.isArray(this._callbackable_callbacks)?false:this._callbackable_callbacks=[];this._callbackable_callbacks.push(cb)};return this};F.prototype.clearCallbacks=function(){this._callbackable_callbacks=[];this._callbackable_cancel_callbacks=[];return this};F.prototype.runCallback=function(){var args=Array.prototype.slice.call(arguments);U.isArray(this._callbackable_callbacks)?false:this._callbackable_callbacks=[];for(var i=0;i<this._callbackable_callbacks.length;i++)try{this._callbackable_callbacks[i].run(args)}catch(e){U.THREAD_ERRO(e)};return this};F.prototype.runCancelCallback=function(){var args=Array.prototype.slice.call(arguments);U.isArray(this._callbackable_cancel_callbacks)?false:this._callbackable_cancel_callbacks=[];for(var i=0;i<this._callbackable_cancel_callbacks.length;i++)try{this._callbackable_cancel_callbacks[i].run(args)}catch(e){U.THREAD_ERRO(e)};return this}
function CB(co,ca){return CB.is(this)?this.init(co,ca):CB.F(co,ca)};U.normalizeConstructor(CB);CB.F=function(a,b){return new CB(a,b)};CB.prototype._context=null;CB.prototype._callable=null;CB.prototype.init=function(co,ca){this._context=U.isObject(co)?co:(U.isObject(ca)?ca:null);this._callable=U.isCallable(ca)?ca:(U.isCallable(co)?co:null);return this};CB.prototype.isValid=function(){return U.isCallable(this._callable)};CB.prototype.run=function(ps){ps=U.isArray(ps)?ps:[];if(U.isCallable(this._callable)){var co=U.isObject(this._context)?this._context:this;this._callable.apply(co,ps)};return this};M.Callbackable=F}})();
;/*========== INCLUDE @Mixines/ICallbackManager========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.ICallbackManager?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines,APS=Array.prototype.slice
function ICallbackManager(){U.AbstractException()};ICallbackManager.xInheritE(M.Mixine);var F=ICallbackManager;F.prototype.init=function(){this.LEM.On('RESET_CONTENT',this,this.clearCallbacks);return this};F.prototype.setCallback=function(na,co,ca){var cb=CB(na,co,ca);if(cb&&cb.isValid())this._callbackable_push_callback(cb);return this};F.prototype._callbackable_push_callback=function(cb){if(CB.is(cb)){U.isObject(this._callbackable_callbacks)?false:this._callbackable_callbacks={};U.isArray(this._callbackable_callbacks[cb._name])?false:this._callbackable_callbacks[cb._name]=[];this._callbackable_callbacks[cb._name].push(cb)};return this};F.prototype.clearCallbacks=function(){this._callbackable_callbacks={};return this};F.prototype.runCallback=function(name){var args=APS.call(arguments,1);name=U.NEString(name,null);name=name?name.toUpperCase():null;if(!name){U.TError("InvalidCallbackName");return this};U.isObject(this._callbackable_callbacks)?false:this._callbackable_callbacks={};U.isArray(this._callbackable_callbacks[name])?false:this._callbackable_callbacks[name]=[];for(var i=0;i<this._callbackable_callbacks[name].length;i++)try{this._callbackable_callbacks[name][i].run(args)}catch(e){U.THREAD_ERRO(e)};return this}
function Callback(){return(Callback.is(this)?this.init:Callback.F).apply(this,APS.call(arguments))};U.FixCon(Callback);var CB=Callback;CB.prototype._name=null;CB.prototype._context=null;CB.prototype._callable=null;CB.prototype.init=function(na,co,ca){this._name=U.NEString(na,null);this._name=this._name?this._name.toUpperCase():null;if(U.isCallable(ca)){this._context=U.isObject(co)?co:null;this._callable=U.isCallable(ca)?ca:null}else if(U.isCallable(co)){this._context=U.isObject(ca)?ca:null;this._callable=U.isCallable(co)?co:null};return this};CB.prototype.isValid=function(){return U.NEString(this._name,null)&&U.isCallable(this._callable)};CB.prototype.run=function(ps){ps=U.isArray(ps)?ps:[];if(U.isCallable(this._callable)){var co=U.isObject(this._context)?this._context:this;this._callable.apply(co,ps)};return this};M.ICallbackManager=F}})();
;/*========== INCLUDE @Mixines/FocusMon========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.FocusMon?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);F.prototype.init=function(){var hh=this.handle.get(0);if(hh.addEventListener){hh.addEventListener('focus',this._focusmon_onfocus.bindToObjectWParam(this),true);hh.addEventListener('blur',this._focusmon_onblur.bindToObjectWParam(this),true)}else{hh.onfocusin=this._focusmon_onfocus.bindToObjectWParam(this);hh.onfocusout=this._focusmon_onblur.bindToObjectWParam(this)};return this};F.prototype._focusmon_onfocus=function(element,event){var re=jQuery(event.target);if(re&&re.length){var mon=U.NEString(re.data('focusMonitor'),null);if(mon){mon=["onFocus",U.UCFirst(mon)].join('');if(U.isCallable(this[mon]))try{this[mon].apply(this,[re,event,element])}catch(e){U.TError(e)}}};return this};F.prototype._focusmon_onblur=function(element,event){var re=jQuery(event.target);if(re&&re.length){var mon=U.NEString(re.data('blurMonitor'),null);if(mon){mon=["onBlur",U.UCFirst(mon)].join('');if(U.isCallable(this[mon]))try{this[mon].apply(this,[re,event,element])}catch(e){U.TError(e)}}};return this};M.FocusMon=F}})();
;/*========== INCLUDE @Mixines/MXNetworkHandlers========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Mixines=window.Eve.EFO.Mixines||{};window.Eve.EFO.Mixines.MXNetworkHandlers?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,M=window.Eve.EFO.Mixines
function F(){U.AbstractException()};F.xInheritE(M.Mixine);F.prototype.init=function(){this.on_network_fail=this._mxnth_on_network_fail.bindToObject(this);this.on_network_fail_fatal=this._mxnth_on_network_fail_fatal.bindToObject(this);this.on_required_component_fail=this._mxnth_on_required_component_fail.bindToObject(this);this.on_network_responce=this._mxnth_on_network_responce.bindToObject(this);this.on_network_responce_fail_fatal=this._mxnth_on_network_responce_fail_fatal.bindToObject(this);return this};F.prototype._mxnth_on_network_fail=function(x){var msg="NetworkError";if(U.isError(x)){msg=x.message}else if(U.isObject(x)&&U.NEString(x.statusText,null)){msg=x.statusText}else if(U.NEString(x,null))msg=x;U.TError(msg);return this};F.prototype._mxnth_on_network_fail_fatal=function(x){this._mxnth_on_network_fail(x);U.isCallable(this.hide)?this.hide():false;U.isCallable(this.clear)?this.clear():false;return this};F.prototype._mxnth_on_required_component_fail=function(){U.TError("Ошибка при загрузке компонента!");return this};F.prototype._mxnth_on_network_responce_fail_fatal=function(d){if(U.isObject(d)){if(d.status==='ok'){U.isCallable(this.on_network_success)?this.on_network_success(d):false;return this};if(d.status==='error'){this.on_network_fail_fatal(d.error);return this}};this.on_network_fail_fatal("MailformedResponce");return this};F.prototype._mxnth_on_network_responce=function(d){if(U.isObject(d)){if(d.status==='ok'){U.isCallable(this.on_network_success)?this.on_network_success(d):false;return this};if(d.status==='error'){this.on_network_fail(d.error);return this}};this.on_network_fail("MailformedResponce");return this};M.MXNetworkHandlers=F}})();
;/*========== INCLUDE @classes/Controller========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Controller?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U
function F(){U.AbstractError()};U.normalizeConstructor(F);F.prototype.LEM=null;F.prototype.mixinesToInit=null;F.prototype.init=function(){this.LEM=EFO.Events.LEM();this.controller_id=U.UID('controller');this.onBeforeInit.apply(this,Array.prototype.slice.call(arguments));return this};F.prototype.getControllerId=function(){return this.controller_id};F.prototype._getMixines=function(){return U.isArray(this.mixinesToInit)?this.mixinesToInit:[]};F.prototype.initMixines=function(){var r=this._getMixines();for(var i=0;i<r.length;i++)if(U.isCallable(r[i]))try{r[i].call(this)}catch(e){U.THREAD_ERRO(e)};this.LEM.Run('INIT_MIXINES_END',this);return this};F.prototype.onBeforeInit=function(){return this};F.prototype.getControllerAlias=function(){U.AbstractError()};F.prototype.threadError=function(x){U.THREAD_ERR(x);return this};F.prototype.threadErrorObject=function(x){U.THREAD_ERRO(x);return this};F.prototype.UID=function(){return U.UID()};F.prototype.RUID=function(){return U.RUID()};EFO.Controller=F}})();
;/*========== INCLUDE @classes/Handlable========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Handlable?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U
function F(){U.AbstractError()};F.xInheritE(EFO.Controller);F.prototype.handle=null;F.prototype.wrapperTemplate=null;F.prototype.init=function(){var args=Array.prototype.slice.call(arguments);EFO.Controller.prototype.init.apply(this,args);var subTemplates=this.prepareSubTemplates();this.wrapperTemplate=Mustache.render(this.getWrapperTemplate(),this,subTemplates);this.handle=jQuery(Mustache.render(this.wrapperTemplate,this,subTemplates));this.initMixines();this.LEM.Run('INIT',this);this.onInit.apply(this,args);return this};F.prototype.onInit=function(){return this};F.prototype.getWrapperTemplate=function(){return EFO.TemplateManager().get('Handlable.default')};F.prototype.getContainer=function(){return jQuery('body')};F.prototype.show=function(){var args=Array.prototype.slice.call(arguments);this.onBeforeShow(args);this.LEM.Run('ON_BEFORE_SHOW',this);this.handle.appendTo(this.getContainer()).fadeIn(100);this.onAfterShow(args);this.LEM.Run('ON_AFTER_SHOW',this);return this};F.prototype.hide=function(){var args=Array.prototype.slice.call(arguments);this.onBeforeHide(args);this.LEM.Run('ON_BEFORE_HIDE',this);this.handle.hide();this.onAfterHide(args);this.LEM.Run('ON_AFTER_HIDE',this);return this};F.prototype.onBeforeShow=function(){return this};F.prototype.onAfterShow=function(){return this};F.prototype.onBeforeHide=function(){return this};F.prototype.onAfterHide=function(){return this};F.prototype.getContentTemplate=function(){this.threadError("handlable::getContentTemplate must be overriden");return'widgetContent'};F.prototype.getCssClass=function(){U.AbstractError()};F.prototype.enumSubTemplates=function(){return[]};F.prototype.prepareSubTemplates=function(){var RO={},AR=this.enumSubTemplates();AR=U.isArray(AR)?AR:[];for(var i=0;i<AR.length;i++)RO[EFO.TemplateManager().prepareSubKey(AR[i])]=EFO.TemplateManager().get(AR[i]);return RO};EFO.Handlable=F}})();
;/*========== INCLUDE @widgets/widget========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Widgets=window.Eve.EFO.Widgets||{};window.Eve.EFO.Widgets.widget?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,WNS=EFO.Widgets
function F(){return U.AbstractError()};F.xInheritE(EFO.Handlable);F.prototype._container=null;F.prototype.handle=null;F.prototype._uid=null;F.prototype.beforeInit=function(){this._uid=U.UID('widget');return this};F.prototype.getWrapperTemplate=function(){var t=EFO.TemplateManager().get('default',this.getWidgetClass());return t&&t.length?t:EFO.TemplateManager().get('default','widget')};F.prototype.getContentTemplate=function(){var t=EFO.TemplateManager().get('content',this.getWidgetClass());if(t&&t.length)return t;this.threadError("widget::getContentTemplate must be overriden");return'widgetContent'};F.prototype.show=function(){if(this.getContainer())EFO.Handlable.prototype.show.apply(this,Array.prototype.slice.call(arguments));return this};F.prototype.getWidgetClass=function(){U.AbstractError()};F.prototype.getCssClass=function(){return['widget',this.getWidgetClass()].join('')};F.prototype.setContainer=function(x){this._container=x;return this._container?this.show():this.hide()};F.prototype.getContainer=function(){return this._container};WNS.widget=F}})();
;/*========== INCLUDE @widgets/Paginator========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Widgets=window.Eve.EFO.Widgets||{};window.Eve.EFO.Widgets.Paginator?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,WNS=EFO.Widgets
function F(){return F.is(this)?this.init():F.F()};F.xInheritE(WNS.widget);F.mixines=['Roleable'];U.initMixines(F);F.prototype._page=0;F.prototype.getWidgetClass=function(){return'Paginator'};F.prototype.setData=function(page,total,perpage){page=U.IntMoreOr(page,0,0);this._page=page;this._maxpage=Math.ceil(total/perpage)-1;this._total=total;this._perpage=perpage;var items=this.createItems(page,total,perpage);this.getRole('items').html(items.length>1?Mustache.render(EFO.TemplateManager().get('items',this.getWidgetClass()),{items:items,getCssClass:this.getCssClass(),command_prefix:this.get_command_prefix(),hasPrev:(page>0),hasNext:(page<this._maxpage)},{item:EFO.TemplateManager().get('item',this.getWidgetClass())}):'');return(items.length>1?this.enable:this.disable).call(this)};F.prototype.get_command_prefix=function(){return''};F.prototype.createItems=function(page,total,perpage){var pages=Math.ceil(total/perpage),pre=[0,1,2,page-1,page,page+1,pages-3,pages-2,pages-1];pre.sort(function(x,b){return x-b});var ix=[],ids={},lco=-1;for(var i=0;i<pre.length;i++)if(pre[i]>=0&&pre[i]<=this._maxpage){var key="S"+pre[i];if(!(key in ids)){ids[key]=1;lco===pre[i]-1?false:ix.push(EL(null));ix.push(EL(pre[i],page));lco=pre[i]}};return ix};F.prototype.enable=function(){this.getRole('items').show();return this};F.prototype.disable=function(){this.getRole('items').hide();return this};F.prototype.getCurrentPage=function(){return U.IntMoreOr(this._page,0,0)};F.prototype.maxPage=function(){return U.IntMoreOr(this._maxpage,0,0)}
function EL(i,c){return EL.is(this)?this.init(i,c):EL.F(i,c)};U.normalizeConstructor(EL);EL.F=function(i,c){return new EL(i,c)};EL.prototype.i=null;EL.prototype.c=null;EL.prototype.current=false;EL.prototype.text=null;EL.prototype.separator=false;EL.prototype.init=function(i,c){this.i=U.IntMoreOr(i,-1,null);this.c=U.IntMoreOr(c,0,0);this.separator=this.i===null;this.text=this.separator?'...':(i+1).toString();this.current=this.separator?false:(this.i===this.c);return this};WNS.Paginator=F;WNS.Paginator.Element=EL}})();
;/*========== INCLUDE @widgets/TreeView========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Widgets=window.Eve.EFO.Widgets||{};window.Eve.EFO.Widgets.TreeView?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,WNS=EFO.Widgets
function F(){return F.is(this)?this.init():F.F()};F.xInheritE(WNS.widget);F.mixines=['Roleable','Commandable','Loaderable'];U.initMixines(F);F.prototype.onBeforeInit=function(){this.getCssClassBinded=this.getCssClass.bindToObject(this);this.getDragTypeBinded=this.getDragType.bindToObjectWParam(this);this.getDragTargetBinded=this.getDragTarget.bindToObjectWParam(this);this.getIsDraggableBinded=this.getIsDraggable.bindToObjectWParam(this);this.is_displayable=this._is_displayable.bindToObjectWParam(this);var self=this;this.getElementOpened=this._getElementOpened.bindToObjectWParam(this);return WNS.widget.prototype.onBeforeInit.apply(this,Array.prototype.slice.call(arguments))};F.prototype.onInit=function(){WNS.widget.prototype.onInit.apply(this,Array.prototype.slice.call(arguments));this.TreeState=TS(this.getStorageName());return this.initHandlers()};F.prototype.getWidgetClass=function(){return'TreeView'};F.prototype.getCssClass=function(){return'widgetTreeView'};F.prototype.getCommandButtons=function(){console.log('TreeView::getCommandButtons must be overriden');return[]};F.prototype.enableToolbar=function(){return true};F.prototype.enableContextMenu=function(){return true};F.prototype.enableMultiSelect=function(){return false};F.prototype.getToolbarTemplate=function(){var t=EFO.TemplateManager().get('toolbar',this.getWidgetClass());return(t&&t.length)?t:'TreeViewContent'};F.prototype.getDragType=function(){return'UserGroup'};F.prototype.getDragTarget=function(){return'UserGroup,User'};F.prototype.getIsDraggable=function(){return true};F.prototype.getStorageName=function(){return null};F.prototype.getVirtualBefore=function(){return[]};F.prototype.getVirtualAfter=function(){return[]};F.prototype.filter=function(filter_func){this.tree.filter(filter_func);return this.rerender()};F.prototype.rerender=function(){var ps=null,sel=U.safeArray(this.getSelection());if(sel&&sel.length)ps=sel[0].key;this.render();this.setSelection(ps);return this};F.prototype.setData=function($rootArray){var $toRender=[].concat(U.safeArray(this.getVirtualBefore()),U.safeArray($rootArray),U.safeArray(this.getVirtualAfter()));this.tree=Tree($toRender,this);this.render();this.setSelection(this.TreeState.getSelected());var N=this.getDefaultSelected();N?this.LEM.Run('NODE_SELECTED',this,N):false;return this};F.prototype.resetSelection=function(){this.handle.find(this.cmClass('selected')).removeClass(this.cmClass('selected',false));return this};F.prototype.setSelection=function(x){this.handle.find(this.cmClass('selected')).removeClass(this.cmClass('selected',false));var s=null;try{s=this.handle.find(this.cmClass('NodeElement')+'[data-key="'+x+'"]');s=s&&s.length?s:null}catch(e){s=null};s=s?s:this.handle.find(this.cmClass('NodeElement')+':first');s&&s.length?s.addClass(this.cmClass('selected',false)):false;return this};F.prototype.getDefaultSelected=function(){var x=this.handle.find(this.cmClass('selected')+':first').data('key');return x?this.getNodeByKey(x):null};F.prototype._is_displayable=function(x){return x.displayable?true:false};F.prototype.render=function(){var TO={element:EFO.TemplateManager().get('node',this.getWidgetClass())};this.childs=this.tree.root;this.getRole('items').html(Mustache.render(TO.element,this,TO));this.childs=null;return this};F.prototype.initHandlers=function(){this.handle.on('click','[data-node-element="itemHeader"]',this.onHeaderClick.bindToObject(this));this.handle.on('click','[data-node-element="itemIcon"]',this.onIconClick.bindToObject(this));this.handle.on('contextmenu','[data-node-element="itemHeader"]',this.onContextMenu.bindToObject(this));this.initDnD();return this};F.prototype.cmClass=function(x,pf){pf=U.anyBool(pf,true);return[pf?'.':'',this.getCssClass(),x].join('')};F.prototype.getNodeByKey=function(key){return this.tree.getNodeByKey(key)};F.prototype.onHeaderClick=function(e){var t=jQuery(e.currentTarget),te=t.closest(this.cmClass('NodeElement'));if(!te.hasClass(this.cmClass('selected',false))){if(!this.enableMultiSelect()){var z=this.handle.find(this.cmClass('selected'));if(z.length){var tt=z.data('key');z.removeClass(this.cmClass('selected',false));this.LEM.Run('NODE_UNSELECTED',this,this.getNodeByKey(tt))}};var node=this.getNodeByKey(te.data('key'));te.addClass(this.cmClass('selected',false)).removeClass(this.cmClass('NodeElementStateclosed',false)).addClass(this.cmClass('NodeElementStateopened',false));this.LEM.Run('NODE_SELECTED',this,node);this.TreeState.setSelected(node.key);this.LEM.Run('NODE_OPENED',this,node);this.TreeState.setOpenedSave(node.key,true)}else if(this.enableMultiSelect()){te.removeClass(this.cmClass('selected',false));this.LEM.Run('NODE_UNSELECTED',this,this.getNodeByKey(tt))};return this};F.prototype.onIconClick=function(e){var t=jQuery(e.currentTarget),te=t.closest(this.cmClass('NodeElement'));if(te.hasClass(this.cmClass('NodeElementStateclosed',false))){te.removeClass(this.cmClass('NodeElementStateclosed',false)).addClass(this.cmClass('NodeElementStateopened',false));this.LEM.Run('NODE_OPENED',this,this.getNodeByKey(te.data('key')));this.TreeState.setOpenedSave(te.data('key'),true)}else{te.removeClass(this.cmClass('NodeElementStateopened',false)).addClass(this.cmClass('NodeElementStateclosed',false));this.LEM.Run('NODE_CLOSED',this,this.getNodeByKey(te.data('key')));this.TreeState.setOpenedSave(te.data('key'),false)};e.stopPropagation();return this};F.prototype.onContextMenu=function(e){if(this.enableContextMenu()){e.preventDefault?e.preventDefault():e.returnValue=false;var t=jQuery(e.currentTarget);this.contextMenu?false:this.createContextMenu();var TE=t.closest(this.cmClass('NodeElement')),node=this.tree.getNodeByKey(TE.data('key'));this.contextMenu.setItems(this.getContextMenuItems(node)).show(jQuery(e.currentTarget)).setData(this.getNodeByKey(TE.data('key')))};return this};F.prototype.createContextMenu=function(){this.contextMenu=WNS.contextMenu(this.getCssClass()).setCI(this);return this};F.prototype.getContextMenuItems=function(node){return[{command:'edit',icon:'edit',title:"Редактировать"},{command:'addChild',icon:'child',title:"Добавить дочерний"},{command:'remove',icon:'remove',title:"Удалить"}]};F.prototype.initDnD=function(){if(this.getIsDraggable()){EFO.DnDManager().LEM.On('ON_DRAG_OVER_UserGroup',this,this.onDragOverUg.bindToObject(this));EFO.DnDManager().LEM.On('ON_DRAG_LEAVE_UserGroup',this,this.onDragLeaveUg.bindToObject(this));EFO.DnDManager().LEM.On('ON_DROPPED_UserGroup',this,this.onInternalDrop.bindToObject(this))};return this};F.prototype.onDragOverUg=function(DM,T){var ET=T.closest(this.cmClass('NodeElement'));if(ET.hasClass(this.cmClass('NodeElementStateclosed',false))){this._to_open_node=ET;this._open_node_to=window.setTimeout(this.autoOpenNode.bindToObject(this),500)};return this};F.prototype.onDragLeaveUg=function(DM,T){this._to_open_node=null;window.clearTimeout(this._open_node_to);this._open_node_to=null;return this};F.prototype.onInternalDrop=function(DM,T){try{var Target=this.getNodeByKey(T.closest(this.cmClass('NodeElement')).data('key')),Darggable=this.getNodeByKey(DM._dragging.closest(this.cmClass('NodeElement')).data('key'));this.LEM.Run('INTERNAL_DRAG',Darggable,Target);this.onDropTreeItem(Darggable,Target)}catch(e){U.THREAD_ERRO(e)};return this};F.prototype.onDropTreeItem=function(d,t){return this};F.prototype.autoOpenNode=function(){if(this._to_open_node)this._to_open_node.removeClass(this.cmClass('NodeElementStateclosed',false)).addClass(this.cmClass('NodeElementStateopened',false));return this};F.prototype.getSelection=function(){var j=this.handle.find(this.cmClass('selected')),r=[],result=[];if(j&&j.length){j.each(function(){r.push(jQuery(this).data('key'))});for(var i=0;i<r.length;i++){var el=this.getNodeByKey(r[i]);el?result.push(el):false}};return this.enableMultiSelect()?result:result.slice(0,1)};F.prototype._getElementOpened=function(node){return this.TreeState.getOpened(node.key)}
function Tree(rA,cI){return Tree.is(this)?this.init(rA,cI):Tree.F(rA,cI)};U.normalizeConstructor(Tree);Tree.F=function(z,x){return new Tree(z,x)};Tree.prototype.data_interface=null;Tree.prototype.data=null;Tree.prototype.root=null;Tree.prototype.getElementId=null;Tree.prototype.getElementKey=null;Tree.prototype.getElementName=null;Tree.prototype.getElementCss=null;Tree.prototype.getElementOpened=null;Tree.prototype.getElementHasChilds=null;Tree.prototype.getElementChilds=null;Tree.prototype.getElementIconName=null;Tree.prototype.index=null;Tree.prototype.init=function(data,di){this.data_interface=U.isObject(di)?di:null;this.data=U.isArray(data)?data:[];this.initInterface();this.root=[];this.index={};for(var i=0;i<this.data.length;i++)this.root.push(Node(this.data[i],this));return this};Tree.prototype.filter=function(filter_func){filter_func=U.isCallable(filter_func)?filter_func:function(x){return true};for(var i=0;i<this.root.length;i++)this.root[i].filter(filter_func);return this};Tree.prototype.initInterface=function(){var rt=['getElementId','getElementKey','getElementName','getElementCss','getElementOpened','getElementHasChilds','getElementChilds','getElementIconName'];for(var i=0;i<rt.length;i++)this[rt[i]]=this.data_interface&&U.isCallable(this.data_interface[rt[i]])?this.data_interface[rt[i]]:this['_'+rt[i]];return this};Tree.prototype._getElementId=function(){return this.id};Tree.prototype._getElementKey=function(){return['N',this.id].join('')};Tree.prototype._getElementName=function(){return this.name};Tree.prototype._getElementCss=function(){return''};Tree.prototype._getElementOpened=function(){return false};Tree.prototype._getElementHasChilds=function(){return this.childs&&U.isArray(this.childs)&&this.childs.length?true:false};Tree.prototype._getElementChilds=function(){return this.childs};Tree.prototype._getElementIconName=function(){return'Floder'};Tree.prototype.does_item_has_child_with_id=function(item,child){if(item===child)return true;if(!(Node.is(item)&&Node.is(child)))return false;var node=this.getNodeByKey(item.key);if(node){var child=this.getNodeByKey(child.key);if(child)return node.has_child_object_deep(child)};return false};Tree.prototype.getNodeByKey=function(key){return key&&(key in this.index)?this.index[key]:null}
function Node(x,di){return Node.is(this)?this.init(x,di):Node.F(x,di)};U.normalizeConstructor(Node);Node.F=function(x,di){return new Node(x,di)};Node.prototype.id=null;Node.prototype.name=null;Node.prototype.key=null;Node.prototype.css=null;Node.prototype.opened=false;Node.prototype.hasChilds=false;Node.prototype.childs=null;Node.prototype.source=null;Node.prototype.icon=null;Node.prototype.displayable=true;Node.prototype.init=function(x,di,parent){x=U.isObject(x)?x:{};this.id=di.getElementId.call(x);this.key=di.getElementKey.call(x);this.name=di.getElementName.call(x);this.css=di.getElementCss.call(x);this.hasChilds=di.getElementHasChilds.call(x);this.icon=di.getElementIconName.call(x);di.index[this.key]=this;this.source=x;this.opened=di.getElementOpened.call(this);var childs=this.hasChilds?di.getElementChilds.call(x):null;if(childs){this.childs=[];for(var i=0;i<childs.length;i++)this.childs.push(Node(childs[i],di,this))}else this.childs=null;return this};Node.prototype.filter=function(filter_func){this.displayable=filter_func(this);if(U.isArray(this.childs))for(var i=0;i<this.childs.length;i++)this.childs[i].filter(filter_func);return this};Node.prototype.has_child_object_deep=function(x){if(x===this)return true;if(this.childs)for(var i=0;i<this.childs.length;i++)if(this.childs[i].has_child_object_deep(x))return true;return false}
function TS(x){return TS.is(this)?this.init(x):TS.F(x)};U.normalizeConstructor(TS);TS.F=function(x){return new TS(x)};TS.prototype.key=null;TS.prototype.data=null;TS.prototype.init=function(x){this.key=U.NEString(x,null);this.load();return this};TS.prototype.load=function(){if(this.checkKey())try{this.data=JSON.parse(localStorage.getItem(this.key));U.isObject(this.data)?false:this.data={};return this}catch(e){};this.data={};return this};TS.prototype.save=function(){if(this.checkKey())try{localStorage.setItem(this.key,JSON.stringify(this.data))}catch(e){};return this};TS.prototype.getSelected=function(){return('s'in this.data)?this.data.s:null};TS.prototype.setSelected=function(x){this.data.s=x;return this};TS.prototype.setSelectedSave=function(x){return this.setSelected(x).save()};TS.prototype.getOpened=function(x){return U.isObject(this.data.o)&&(x in this.data.o)?U.anyBool(this.data.o[x],false):false};TS.prototype.setOpened=function(x,s){U.isObject(this.data.o)?false:this.data.o={};if(U.anyBool(s,false)){this.data.o[x]=1}else if(x in this.data.o)delete(this.data.o[x]);return this};TS.prototype.setOpenedSave=function(x,s){return this.setOpened(x,s).save()};TS.prototype.checkKey=function(){return this.key?true:false};WNS.TreeView=F;WNS.TreeView.Tree=Tree;WNS.TreeView.Tree.Node=Node;WNS.TreeView.TreeState=TS}})();
;/*========== INCLUDE @widgets/TreeParser========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Widgets=window.Eve.EFO.Widgets||{};window.Eve.EFO.Widgets.TreeParser?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,APS=Array.prototype.slice,H=null
function TreeParser(){return TreeParser.is(H)?H:((TreeParser.is(this)?this.init:TreeParser.F).apply(this,APS.call(arguments)))};U.FixCon(TreeParser);var F=TreeParser;F.prototype.init=function(){H=this;return this};F.prototype.parse=function(input_data,params){if(U.isArray(input_data)){return this.parse_array(input_data,U.isObject(params)?params:{})}else if(U.isObject(input_data))return this.parse_object(input_data,U.isObject(params)?params:{});U.Error("IncorrectInput")};F.prototype.parse_object=function(io,params){var root=[],index={},all=[];for(var k in io)if(io.hasOwnProperty(k)&&U.isObject(io[k])&&this.checkValid(io[k],params)){io[k]._parser_source_childs=io[k].childs;io[k].childs=[];index[["G",io[k].id].join('')]=io[k];all.push(io[k])};for(var i=0;i<all.length;i++){var x=U.IntMoreOr(all[i].parent,0,null);if(x===null){root.push(all[i])}else{var rk=["G",x].join('');index[rk].childs.push(all[i])}};try{for(var i=0;i<root.length;i++)this.restore_name_path(root[i],null)}catch(e){};return root};F.prototype.restore_name_path=function(node,prev_node){if(prev_node===null){node.name_path=U.NEString(node.name)}else node.name_path=[U.NEString(prev_node.name_path,''),node.name].join('.');if(U.isArray(node.childs))for(var i=0;i<node.childs.length;i++)this.restore_name_path(node.childs[i],node);return this};F.prototype.checkValid=function(x,op){return U.isCallable(op.checkValid)?op.checkValid(x):this._check_valid(x)};F.prototype._check_valid=function(x){return U.isObject(x)&&U.IntMoreOr(x.id,0,null)&&U.NEString(x.name,null)?true:false};F.prototype.parse_array=function(ia,params){ia=U.safeArray(ia);var oo={};for(var i=0;i<ia.length;i++)if(U.isObject(ia[i])&&this.checkValid(ia[i],params))oo["G",ia[i].id]=ia[i];return this.parse_object(oo,params)};EFO.Widgets.TreeParser=F}})();
;/*========== INCLUDE @widgets/contextMenu========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Widgets=window.Eve.EFO.Widgets||{};window.Eve.EFO.Widgets.contextMenu?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,WNS=EFO.Widgets
function F(cc){return F.is(this)?this.init(cc):F.F(cc)};F.xInheritE(WNS.widget);F.F=function(cc){return new F(cc)};F.mixines=['Roleable','Commandable'];U.initMixines(F);F.prototype.CI=null;F.prototype.customClass=null;F.prototype.items=null;F.prototype._contextData=null;F.prototype.getWidgetClass=function(){return'contextMenu'};F.prototype.onBeforeInit=function(cc){this.customClass=cc;this.getCssClassBind=this.getCssClass.bindToObject(this);return WNS.widget.prototype.onBeforeInit.apply(this,Array.prototype.slice.call(arguments))};F.prototype.onInit=function(cc){this.initMenuHandlers();return WNS.widget.prototype.onInit.apply(this,Array.prototype.slice.call(arguments))};F.prototype.setItems=function(x){x=U.isArray(x)?x:null;this.items=x;this.getRole('items').html(Mustache.render(EFO.TemplateManager().get('items',this.getWidgetClass()),this));return this};F.prototype.setCI=function(x){this.CI=U.isObject(x)?x:null;return this};F.prototype.setData=function(x){this._contextData=x;return this};F.prototype.getData=function(){return this._contextData};F.prototype.getContainer=function(){return jQuery('body')};F.prototype.onCommand=function(e){var t=jQuery(e.currentTarget),command=U.UCFirst(t.data('command'));if(command&&command.length){var cm="onMenuCommand"+command;if(this.CI&&U.isCallable(this.CI[cm])){e.preventDefault?e.preventDefault():e.returnValue=false;e.stopPropagation();this.CI[cm](t,e,this)}else U.THREAD_ERR("NoCommandHandler:"+cm)};return this.hide()};F.prototype.initMenuHandlers=function(){this.handle.on('mouseleave',this.hide.bindToObject(this));return this};F.prototype.show=function(x){WNS.widget.prototype.show.apply(this,Array.prototype.slice(arguments));return this.positeContextMenu(x)};F.prototype.positeContextMenu=function(x){if(window.jQuery&&U.isObject(x)&&(x instanceof jQuery)){var pos=x.offset(),left=pos.left,top=pos.top,yo=parseFloat(x.outerHeight(true)),mw=parseFloat(this.handle.outerWidth(true)),mh=parseFloat(this.handle.outerHeight(true)),wh=parseFloat(jQuery(window).innerHeight()),ww=parseFloat(jQuery(window).innerWidth()),st=parseFloat(jQuery(document).scrollTop());top=top+yo;if((top+mh)-st>wh)top=(st+wh)-mh;if(left+mw>ww)left=ww-mw;this.handle.css({left:left+'px',top:top+'px'})};return this};F.prototype.positeAtEvent=function(x){var xp=x.pageX,yp=x.pageY,mw=parseFloat(this.handle.outerWidth(true)),mh=parseFloat(this.handle.outerHeight(true)),wh=parseFloat(jQuery(window).innerHeight()),ww=parseFloat(jQuery(window).innerWidth()),st=parseFloat(jQuery(document).scrollTop());if((yp+mh)-st>wh)yp=(st+wh)-mh;if(xp+mw>ww)xp=ww-mw;this.handle.css({left:xp+'px',top:yp+'px'});return this};F.prototype.onAfterHide=function(){this.handle.css("z-index","");return this};F.prototype.forceZ=function(x){this.handle.css("z-index",U.IntMoreOr(x,1,1));return this};WNS.contextMenu=F}})();
;/*========== INCLUDE @classes/windowController========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.windowController?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,II=null
function F(){return F.is(this)?this.init():F.F()};F.xInheritE(EFO.Handlable);F.prototype.__default_mixines=['moveable'];F.prototype.getWrapperTemplate=function(){return EFO.TemplateManager().get('windowController.default')};F.prototype.getControllerAlias=function(){return'windowController'};F.prototype.getCssClass=function(){return'windowController'};F.prototype.enumSubTemplates=function(){return['windowController.footer','windowController.footerButton','windowController.title']};F.prototype.getFooterButtons=function(){return[{command:"cancel",text:"Отмена"},{command:"apply",text:"Применить"}]};F.prototype.getDefaultTitle=function(){return"title"};F.prototype.placeAtCenter=function(){try{var pcwidth=parseFloat(this.handle.innerWidth())/100,pcheight=parseFloat(this.handle.innerHeight())/100,mwpc=parseFloat(this.getRole('window').outerWidth(true))/pcwidth,mhpc=parseFloat(this.getRole('window').outerHeight(true))/pcheight,mtpc=(100-mhpc)/2,mlpc=(100-mwpc)/2;this.getRole('window').css({top:mtpc+'%',left:mlpc+'%'})}catch(e){this.threadErrorObject(e)};return this};F.prototype.force_z_index=function(x){x=U.IntMoreOr(x,0,null);x?this.handle.css("z-index",x):this.handle.css("z-index","");return this};F.prototype.onInit=function(){installIcons();this.LEM.On('ON_AFTER_HIDE',this,this.reset_z_index);return EFO.Handlable.prototype.onInit.apply(this,Array.prototype.slice(arguments))};F.prototype.reset_z_index=function(){this.force_z_index(null);return this};F.prototype.setTitle=function(x){x=U.NEString(x,null);x=x?x:this.getDefaultTitle();this.getRole('titleText').html(x);return this};F.prototype.efo_element_has_help=function(){return U.isCallable(this.efo_get_help_command)&&U.isCallable(this.efo_get_help_id)};F.prototype.efo_get_help_command=function(){return"efo_help_server"};F.prototype.onCommandEfo_help_server=function(t){var nam=this.getRole('titleText').html(),id=U.NEString(t.data('helpId'),null);if(id)EFO.Events.GEM().Run("EFO_NEED_HELP",id,nam);return this}
function installIcons(){if(!II){jQuery('body').append(EFO.TemplateManager().get('windowController.icons'));II=true}};F.prototype.sizeable_getMarker=function(){try{return this.getRole('resizer')}catch(e){this.threadErrorObject(e)};return jQuery(null)};F.prototype.sizeable_getWindow=function(){try{return this.getRole('window')}catch(e){this.threadErrorObject(e)};return jQuery(null)};F.prototype.sizeable_getContainer=function(){return this.handle};F.prototype.sizeable_getParams=function(){return{w:80,h:80}};F.prototype.sizeable_setParams=function(){return this};F.prototype.sizeable_defaultWidth=function(){return 80};F.prototype.sizeable_defaultHeight=function(){return 80};F.prototype.___moveable_get_window=function(){try{return this.getRole('window')}catch(e){U.TError(e)};return jQuery(null)};F.prototype.___moveable_get_move_handle=function(){try{return this.getRole('titleText')}catch(e){U.TError(e)};return jQuery(null)};F.prototype.___moveable_get_container=function(){return this.handle};F.prototype.___moveable_get_tresold_value=function(){return 20};EFO.windowController=F}})();
;/*========== INCLUDE @classes/flatController========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.flatController?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U
function F(){return F.is(this)?this.init():F.F()};F.xInheritE(EFO.Handlable);F.prototype.fragment=null;F.prototype.container=null;F.prototype.getWrapperTemplate=function(){return EFO.TemplateManager().get('flatController.default')};F.prototype.getControllerAlias=function(){return'flatController'};F.prototype.getCssClass=function(){return'flatController'};F.prototype.enumSubTemplates=function(){return[]};F.prototype.setContainer=function(x){this.container=U.isDOM(x)?x:U.isJQuery(x)?x:U.NEString(x)?document.getElementById(U.NEString(x)):null;if(this.container)this.show();return this};F.prototype.getContainer=function(){if(this.container)return this.container;return this.getFragment()};F.prototype.getFragment=function(){if(!this.fragment)this.fragment=document.createDocumentFragment();return this.fragment};F.prototype.onAfterHide=function(){this.handle?this.handle.appendTo(this.getFragment()):false;return EFO.Handlable.prototype.onAfterHide.apply(this,Array.prototype.slice.call(arguments))};EFO.flatController=F}})();
;/*========== INCLUDE @classes/CommandReciever========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.CommandReciever?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,APS=Array.prototype.slice
function CommandReciever(){return(CommandReciever.is(this)?this.init:CommandReciever.F).apply(this,APS.call(arguments))};U.FixCon(CommandReciever);var F=CommandReciever;F.mixines=['Commandable'];U.initMixines(F);F.prototype.handle=null;F.prototype.init=function(x){this.setHandle(x);return this};F.prototype.setHandle=function(x){if(this.handle)U.Error("commadReciever can not change handle");if(U.isDOM(x)||U.isjQuery(x)){this.handle=U.isDOM(x)?jQuery(x):x;this.init_commandable_mixine()};return this};F.prototype.init_commandable_mixine=function(){var r=U.safeArray(this.mixinesToInit);for(var i=0;i<r.length;i++)if(U.isCallable(r[i]))try{r[i].call(this)}catch(e){U.THREAD_ERRO(e)};return this};EFO.CommandReciever=F}})();
;/*========== INCLUDE @Com/EFOPromise========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.EFOPromise?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U
function PromiseCallback(co,ca){return PromiseCallback.is(this)?this.init(co,ca):PromiseCallback.F(co,ca)};U.normalizeConstructor(PromiseCallback);var PC=PromiseCallback;PC.prototype.context=null;PC.prototype.callable=null;PC.prototype.init=function(co,ca){this.callable=U.isCallable(ca)?ca:(U.isCallable(co)?co:null);this.context=U.isObject(co)?co:(U.isObject(ca)?ca:null);return this};PC.prototype.isValid=function(){return this.callable?true:false};PC.prototype.run=function(){var args=Array.prototype.slice.call(arguments);return this.runArray(args)};PC.prototype.runArray=function(args){args=U.safeArray(args);if(this.callable)try{return this.callable.apply(this.context?this.context:this,args)}catch(err){U.TError(err)};return null};PC.prototype.pushValid=function(pushTo){(U.isArray(pushTo)&&this.isValid())?pushTo.push(this):false;return this};PC.prototype.setFailsaveContext=function(x){this.context===null&&U.isObject(x)?this.context=x:false;return this};PC.prototype.clear=function(){this.context=null;this.callable=null;return this}
function Promise(co,cbfn){U.isCallable(cbfn)||U.isCallable(co)?false:U.ERR("EFOPromise requires callable");return Promise.is(this)?this.init.apply(this,Array.prototype.slice.call(arguments)):Promise.F.apply(this,Array.prototype.slice.call(arguments))};U.normalizeConstructor(Promise);var F=Promise,EFOPromise=Promise;F.prototype.handlersSuccess=null;F.prototype.handlersError=null;F.prototype.handlersSuccessAfter=null;F.prototype.handlersErrorAfter=null;F.prototype.handlersSuccessBefore=null;F.prototype.handlersErrorBefore=null;F.prototype.state=0;F.prototype.result=null;F.prototype.init=function(runContext,callable){this.initHandlersArrays();var nc=this.fixContext(runContext,callable);try{nc.callable.apply(nc.context,[this.onSuccess.bindToObject(this),this.onFail.bindToObject(this)].concat(Array.prototype.slice.call(arguments,2)))}catch(e){this.onFail(e)};return this};F.prototype.fixContext=function(co,ca){return{context:U.isObject(co)?co:(U.isObject(ca)?ca:this),callable:U.isCallable(ca)?ca:(U.isCallable(co)?co:null)}};F.prototype.initHandlersArrays=function(){this.handlersError=[];this.handlersErrorAfter=[];this.handlersErrorBefore=[];this.handlersSuccess=[];this.handlersSuccessAfter=[];this.handlersSuccessBefore=[];return this};F.prototype.clearHandlersArrays=function(){this.handlersError=null;this.handlersErrorAfter=null;this.handlersErrorBefore=null;this.handlersSuccess=null;this.handlersSuccessAfter=null;this.handlersSuccessBefore=null;return this};F.prototype.clear=function(){return this.clearCallbacks(this.handlersError).clearCallbacks(this.handlersErrorAfter).clearCallbacks(this.handlersErrorBefore).clearCallbacks(this.handlersSuccess).clearCallbacks(this.handlersSuccessAfter).clearCallbacks(this.handlersSuccessBefore).clearHandlersArrays()};F.prototype.clearCallbacks=function(x){x=U.safeArray(x);for(var i=0;i<x.length;i++)x[i].clear();return this};F.prototype.done=function(co,ca){(this.state===1)?this._applyCallback(PromiseCallback(co,ca)):(this.state===0)?PromiseCallback(co,ca).pushValid(this.handlersSuccess):false;return this};F.prototype.doneAfter=function(co,ca){(this.state===1)?this._applyCallback(PromiseCallback(co,ca)):(this.state===0)?PromiseCallback(co,ca).pushValid(this.handlersSuccessAfter):false;return this};F.prototype.doneBefore=function(co,ca){(this.state===1)?this._applyCallback(PromiseCallback(co,ca)):(this.state===0)?PromiseCallback(co,ca).pushValid(this.handlersErrorBefore):false;return this};F.prototype.fail=function(co,ca){(this.state===2)?this._applyCallback(PromiseCallback(co,ca)):(this.state===0)?PromiseCallback(co,ca).pushValid(this.handlersError):false;return this};F.prototype.failAfter=function(co,ca){(this.state===2)?this._applyCallback(PromiseCallback(co,ca)):(this.state===0)?PromiseCallback(co,ca).pushValid(this.handlersErrorAfter):false;return this};F.prototype.failBefore=function(co,ca){(this.state===2)?this._applyCallback(PromiseCallback(co,ca)):(this.state===0)?PromiseCallback(co,ca).pushValid(this.handlersErrorBefore):false;return this};F.prototype.always=function(co,ca){(this.state!==0)?this._applyCallback(PromiseCallback(co,ca)):PromiseCallback(co,ca).pushValid(this.handlersSuccess).pushValid(this.handlersError);return this};F.prototype.alwaysAfter=function(co,ca){(this.state!==0)?this._applyCallback(PromiseCallback(co,ca)):PromiseCallback(co,ca).pushValid(this.handlersSuccessAfter).pushValid(this.handlersErrorAfter);return this};F.prototype.alwaysBefore=function(co,ca){(this.state!==0)?this._applyCallback(PromiseCallback(co,ca)):PromiseCallback(co,ca).pushValid(this.handlersSuccessBefore).pushValid(this.handlersErrorBefore);return this};F.prototype.onSuccess=function(){if(this.state===0){this.state=1;this.result=Array.prototype.slice.call(arguments);for(var i=0;i<this.handlersSuccessBefore.length;i++)this._applyCallback(this.handlersSuccessBefore[i]);for(var i=0;i<this.handlersSuccess.length;i++)this._applyCallback(this.handlersSuccess[i]);for(var i=0;i<this.handlersSuccessAfter.length;i++)this._applyCallback(this.handlersSuccessAfter[i])};return this.clear()};F.prototype.onFail=function(){if(this.state===0){this.state=2;this.result=Array.prototype.slice.call(arguments);for(var i=0;i<this.handlersErrorBefore.length;i++)this._applyCallback(this.handlersErrorBefore[i]);for(var i=0;i<this.handlersError.length;i++)this._applyCallback(this.handlersError[i]);for(var i=0;i<this.handlersErrorAfter.length;i++)this._applyCallback(this.handlersErrorAfter[i])};return this.clear()};F.prototype._applyCallback=function(cbi){if(PromiseCallback.is(cbi))cbi.setFailsaveContext(this).runArray(this.result);return this}
function promiseAggregator(promises){return promiseAggregator.is(this)?this.init(promises):promiseAggregator.F(promises)};U.normalizeConstructor(promiseAggregator);var PW=promiseAggregator;PW.prototype.customParam=null;PW.prototype.promises=null;PW.prototype.promise=null;PW.prototype._psuccess=null;PW.prototype._pfail=null;PW.prototype._total=0;PW.prototype._successed=0;PW.prototype.init=function(promises){promises=U.safeArray(promises);this.promises=[];for(var i=0;i<promises.length;i++)if(EFOPromise.is(promises[i]))this.promises.push(promises[i]);for(var i=0;i<this.promises.length;i++){this.promises[i].fail(this,this._promiseFail);this.promises[i].done(this,this._promiseSuccess)};this.promise=EFOPromise(this,this._rqst);return this};PW.prototype.setCustomParam=function(x){this.customParam=x;return this};PW.prototype._rqst=function(success,fail){this._psuccess=U.isCallable(success)?success:null;this._pfail=U.isCallable(fail)?fail:null;return this.checkReady()};PW.prototype.checkReady=function(){if(this.promises.length===this._successed){U.isCallable(this._psuccess)?this._psuccess(this):false}else if(this._total===this.promises.length)U.isCallable(this._pfail)?this._pfail(this):false;return this};PW.prototype._promiseFail=function(){this._total++;return this.checkReady()};PW.prototype._promiseSuccess=function(){this._total++;this._successed++;return this.checkReady()};PW.prototype.done=function(co,ca){this.promise.done.apply(this.promise,Array.prototype.slice.call(arguments));return this};PW.prototype.doneAfter=function(co,ca){this.promise.doneAfter.apply(this.promise,Array.prototype.slice.call(arguments));return this};PW.prototype.doneBefore=function(co,ca){this.promise.doneBefore.apply(this.promise,Array.prototype.slice.call(arguments));return this};PW.prototype.fail=function(co,ca){this.promise.fail.apply(this.promise,Array.prototype.slice.call(arguments));return this};PW.prototype.failBefore=function(co,ca){this.promise.failBefore.apply(this.promise,Array.prototype.slice.call(arguments));return this};PW.prototype.failAfter=function(co,ca){this.promise.failAfter.apply(this.promise,Array.prototype.slice.call(arguments));return this};PW.prototype.always=function(co,ca){this.promise.always.apply(this.promise,Array.prototype.slice.call(arguments));return this};PW.prototype.alwaysBefore=function(co,ca){this.promise.alwaysBefore.apply(this.promise,Array.prototype.slice.call(arguments));return this};PW.prototype.alwaysAfter=function(co,ca){this.promise.alwaysAfter.apply(this.promise,Array.prototype.slice.call(arguments));return this};F.waitFor=function(){var promises=[],input=Array.prototype.slice.call(arguments);for(var i=0;i<input.length;i++)if(F.is(input[i]))promises.push(input[i]);return promiseAggregator(promises)};F.waitForArray=function(promises){var ch=[];promises=U.safeArray(promises);for(var i=0;i<promises.length;i++)F.is(promises[i])?ch.push(promises[i]):false;return promiseAggregator(ch)}
function Defer(){return Defer.is(this)?this.init():Defer.F()};U.normalizeConstructor(Defer);Defer.prototype._promisesuccess=null;Defer.prototype._promisefail=null;Defer.prototype.promise=null;Defer.prototype.init=function(){this.promise=Promise(this,function(s,f){this._promisesuccess=s;this._promisefail=f;return this});return this};Defer.prototype.done=function(){this.promise.done.apply(this.promise,Array.prototype.slice.call(arguments));return this};Defer.prototype.doneBefore=function(){this.promise.doneBefore.apply(this.promise,Array.prototype.slice.call(arguments));return this};Defer.prototype.doneAfter=function(){this.promise.doneAfter.apply(this.promise,Array.prototype.slice.call(arguments));return this};Defer.prototype.fail=function(){this.promise.fail.apply(this.promise,Array.prototype.slice.call(arguments));return this};Defer.prototype.failAfter=function(){this.promise.failAfter.apply(this.promise,Array.prototype.slice.call(arguments));return this};Defer.prototype.failBefore=function(){this.promise.failBefore.apply(this.promise,Array.prototype.slice.call(arguments));return this};Defer.prototype.always=function(){this.promise.always.apply(this.promise,Array.prototype.slice.call(arguments));return this};Defer.prototype.alwaysBefore=function(){this.promise.alwaysBefore.apply(this.promise,Array.prototype.slice.call(arguments));return this};Defer.prototype.alwaysAfter=function(){this.promise.alwaysAfter.apply(this.promise,Array.prototype.slice.call(arguments));return this};Defer.prototype.resolve=function(){this._promisesuccess.apply(this.promise,Array.prototype.slice.call(arguments));return this};Defer.prototype.reject=function(){this._promisefail.apply(this.promise,Array.prototype.slice.call(arguments));return this};EFO.EFOPromise=F;EFO.Promise=F;EFO.Defer=Defer}})();
;/*========== INCLUDE @Com/EFORequest========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Request?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,RO=null,H=null,statusProcessors={},preprocessors=[],postprocessors=[],interceptors=[],responce_interceptors=[]
function PromiseWrapper(s,c,co){return PromiseWrapper.is(this)?this.init(s,c,co):PromiseWrapper.F(s,c,co)};U.normalizeConstructor(PromiseWrapper);var W=PromiseWrapper;W.prototype.status=null;W.prototype.callable=null;W.prototype.context=null;W.prototype.init=function(status,callable,context){this.status=U.NEString(status,null);this.callable=U.isCallable(callable)?callable:null;this.context=U.isObject(context)?context:null;return this};W.prototype.isValid=function(){return(this.status&&this.callable)?true:false};W.prototype.run=function(){return EFO.EFOPromise.apply(null,[this.context?this.context:this,this.callable].concat(Array.prototype.slice.call(arguments)))}
function addWrapper(pw){if(W.is(statusProcessors[pw.status]))U.ERR("Cant replace statusWrapper. RemoveOldFirst");statusProcessors[pw.status]=pw}
function AbstractInterceptor(co,ca){return AbstractInterceptor.is(this)?this.init(co,ca):AbstractInterceptor.F(co,ca)};var AI=U.FixCon(AbstractInterceptor);AI.prototype.callable=null;AI.prototype.context=null;AI.prototype.init=function(co,ca){this.callable=U.isCallable(ca)?ca:U.isCallable(co)?co:null;this.context=U.isObject(co)?co:U.isObject(ca)?ca:null;return this};AI.prototype.run=function(){return this.runArray(Array.prototype.slice.call(arguments))};AI.prototype.runArray=function(args){if(this.isValid())try{this.callable.apply(this.context?this.context:this,U.safeArray(args))}catch(e){U.TError(e)};return this};AI.prototype.isValid=function(){return this.callable?true:false};AI.prototype.pushValid=function(stor){U.isArray(stor)&&this.isValid()?stor.push(this):false;return this}
function AbstractProcessor(co,ca){return AbstractProcessor.is(this)?this.init(co,ca):AbstractProcessor.F(co,ca)};U.FixCon(AbstractProcessor);var AP=AbstractProcessor;AP.prototype.callable=null;AP.prototype.context=null;AP.prototype.init=function(co,ca){this.callable=U.isCallable(ca)?ca:U.isCallable(co)?co:null;this.context=U.isObject(co)?co:U.isObject(ca)?ca:null;return this};AP.prototype.run=function(){return this.runArray(Array.prototype.slice.call(arguments))};AP.prototype.runArray=function(args){if(this.isValid())try{this.callable.apply(this.context?this.context:this,U.safeArray(args))}catch(e){U.TError(e)};return this};AP.prototype.isValid=function(){return this.callable?true:false};AP.prototype.pushValid=function(stor){U.isArray(stor)&&this.isValid()?stor.push(this):false;return this}
function RequestOptions(){return RequestOptions.is(H)?H:RequestOptions.is(this)?this.init():RequestOptions.F()};U.FixCon(RequestOptions);var O=RequestOptions;O.prototype.cross=true;O.prototype.statusSection='status';O.prototype.errorSection='error';O.prototype.init=function(){H=this;return this};O.prototype.addWrapper=function(status,processorFunc,context){var wrapper=PromiseWrapper(status,processorFunc,context);wrapper&&wrapper.isValid()?addWrapper(wrapper):false;return this};O.prototype.hasWrapper=function(status){return status&&(status in statusProcessors)&&(PromiseWrapper.is(statusProcessors[status]))?true:false};O.prototype.removeWrapper=function(status){if(this.hasWrapper(status))delete(statusProcessors[status]);return this};O.prototype.runWrapper=function(status){var args=Array.prototype.slice.call(arguments,1);return statusProcessors[status].run.apply(statusProcessors[status],args)};O.prototype.registerPreprocessor=function(co,ca){AbstractProcessor(co,ca).pushValid(preprocessors);return this};O.prototype.registerInterceptor=function(co,ca){AbstractInterceptor(co,ca).pushValid(interceptors);return this};O.prototype.registerResponceInterceptor=function(co,ca){AbstractInterceptor(co,ca).pushValid(responce_interceptors);return this};O.prototype.registerPostprocessor=function(co,ca){AbstractProcessor(co,ca).pushValid(postprocessors);return this};RO=O
function Request(method,url,data){return Request.is(this)?this.init(method,url,data):Request.F(method,url,data)};U.normalizeConstructor(Request);var F=Request;F.prototype.promise=null;F.prototype.xhr=null;F.prototype.method=null;F.prototype.url=null;F.prototype.data=null;F.prototype._promiseSuccess=null;F.prototype._promiseFail=null;F.prototype.cross=false;F.prototype.init=function(method,url,data){this.method=/^post$/i.test(method)?'POST':'GET';this.url=U.NEString(url,window.location.href);this.data=U.safeObject(data);this.cross=RO().cross;this.runProcessors(preprocessors,this);this.promise=EFO.EFOPromise(this,this._run);return this};F.prototype.runProcessors=function(ppl){var args=Array.prototype.slice.call(arguments,1);ppl=U.safeArray(ppl);for(var i=0;i<ppl.length;i++)ppl[i].runArray(args);return this};F.prototype.runRequestInterceptors=function(){var args=[this].concat(Array.prototype.slice(arguments));for(var i=0;i<interceptors.length;i++)interceptors[i].runArray(args);return this};F.prototype.runResponceInterceptors=function(){var result=false,args=[this].concat(Array.prototype.slice(arguments));for(var i=0;i<responce_interceptors.length;i++){if(result)break;result=result||responce_interceptors[i].runArray(args)};return result};F.prototype._run=function(success,fail){this._promiseSuccess=success;this._promiseFail=fail;this.runRequest();return this};F.prototype.runRequest=function(){var xhc=("onload"in new XMLHttpRequest())?XMLHttpRequest:XDomainRequest;this.xhr=new xhc();this.runRequestInterceptors();this.xhr.open(this.method,this.method==='POST'?this.url:this.encodeUrl());this.xhr.onreadystatechange=this.onreadystatechange.bindToObject(this);this.method==='POST'?this.xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded'):false;this.xhr.withCredentials=this.cross;this.method==='POST'?this.xhr.send(this.encodeData()):this.xhr.send();return this};F.prototype.onreadystatechange=function(){if(this.xhr.readyState===4){try{if(this.runResponceInterceptors())return this;if(this.xhr.status===200){var d=JSON.parse(this.xhr.responseText);if(U.isObject(d)){if(d[RO().statusSection]==='ok'){this.runProcessors(postprocessors,this,d);this._promiseSuccess(d);return this.clear()};if(RO().hasWrapper(d[RO().statusSection])){RO().runWrapper(d[RO.statusSection],d).done(this,this.repeat).fail(this,this.failStatus);this.xhr=null;return this}else if(d[RO().statusSection]==='error')throw new Error(d[RO().errorSection])};throw new Error("MailformedResponce")}else throw new Error("NetworkError")}catch(e){this._promiseFail(e)};return this.clear()};return this};F.prototype.repeat=function(){return this.runRequest()};F.prototype.failStatus=function(){this._promiseFail(new Error("UnknownResponceStatus"));return this};F.prototype.clear=function(){this.xhr=null;return this};F.prototype.encodeUrl=function(){var urlData=this.encode(this.data);return[this.url,urlData.length?(this.url.indexOf('?')<0?'?':'&'):'',urlData].join('')};F.prototype.encodeData=function(){return this.encode(this.data)};F.prototype.encode=function(element,key,list){var list=list||[];if(typeof element==='object'){for(var idx in element)this.encode(element[idx],key?key+'['+idx+']':idx,list)}else list.push(key+'='+encodeURIComponent(element));return list.join('&')};F.prototype.done=function(){this.promise.done.apply(this.promise,Array.prototype.slice.call(arguments));return this};F.prototype.fail=function(){this.promise.fail.apply(this.promise,Array.prototype.slice.call(arguments));return this};F.prototype.always=function(){this.promise.always.apply(this.promise,Array.prototype.slice.call(arguments));return this};F.getRequestOptions=function(){return RO()};EFO.Request=F}})();
;/*========== INCLUDE @Com/Com========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Com?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,H=null,c={},s={},j={},prefix='',head=null,postfix=".js"
function Com(){return Com.is(H)?H:Com.is(this)?this.init():Com.F()};U.normalizeConstructor(Com)
function getHead(){if(!head){head=document.getElementsByTagName('head');if(head&&head.length){head=head[0]}else{head=document.getElementsByTagName('body');if(head&&head.length){head=head[0]}else head=document.documentElement}};return head}
function findElement(tag,attr,val){var tags=document.getElementsByTagName(tag);for(var i=0;i<tags.length;i++)if(tags[i][attr]===val)return tags[i];return null}
function loadScript(succ,fail,url,id){var ps=findElement('script','src',url);if(ps){succ(ps,url,id)}else{var s=document.createElement('script');s.src=url;s.id=id;s.async=true;s.onload=function(){succ(s,url,id)};s.onerror=function(){fail(s,url,id)};getHead().appendChild(s)};return this}
function loadCom(cn,id){var R=EFO.Defer(),s=document.createElement('script');s.id=id;s.src=[prefix,cn,postfix].join('');s.async=true;s.onerror=function(){R.reject(new Error("LoadError"))};getHead().appendChild(s);return R}
function loadStyle(succ,fail,url,id){var ps=findElement('link','href',url);if(ps){succ(ps,url,id)}else{var s=document.createElement('link');s.href=url;s.rel="stylesheet";s.type="text/css";s.id=id;s.async=true;s.onload=function(){succ(s,url,id)};s.onerror=function(){fail(s,url,id)};getHead().appendChild(s)};return this};Com.prototype.LEM=null;Com.prototype.init=function(){H=this;this.LEM=EFO.Events.LEM();return this};Com.prototype.js=function(url){if(!(url in j)){var id=U.UID();j[url]=EFO.EFOPromise(this,loadScript,url,id).failAfter(this,function(tag,url,id){delete(j[url]);tag.remove()})};return j[url]};Com.prototype.css=function(url){if(!(url in s)){var id=U.UID();s[url]=EFO.EFOPromise(this,loadStyle,url).failAfter(this,function(tag,url,id){delete(s[url]);tag.remove()})};return s[url]};Com.prototype.load=function(cn){cn=this.prepareCn(cn);if(!(cn in c)){var id=U.UID();c[cn]=loadCom(cn,id).failAfter(this,function(){delete(c[cn])}).alwaysAfter(this,function(){try{document.getElementById(id).remove()}catch(e){}})};return c[cn]};Com.prototype.prepareCn=function(cn){cn=cn.replace(/\\/g,'.').replace(/\//g,'.').replace(/\.{2,}/g,'.');return cn.replace(/^\.{1,}/g,'').replace(/\.{1,}$/g,'')};Com.prototype.com=Com.prototype.load;Com.prototype.reportSuccess=function(FQCN,comObj){EFO.Defer.is(c[FQCN])?c[FQCN].resolve(comObj):c[FQCN]=EFO.Defer().resolve(comObj)};Com.prototype.reportFail=function(FQCN,error){EFO.Defer.is(c[FQCN])?c[FQCN].reject(U.safeError(error)):false};Com.prototype.reportBuilderFail=function(FQCN,error){EFO.Defer.is(c[FQCN])?c[FQCN].reject(U.safeError(error)):false};Com.prototype.setPrimaryUrl=function(x){prefix=x;return this};EFO.Com=Com}})();
;/*========== INCLUDE Filter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.Filter?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,H=null,instances=null,FN=EFO.Filter
function iapplyChain(value,filters){var out=value;for(var i=0;i<filters.length;i++)out=this.applyFilter(out,filters[i]);return out}
function iapplyHash(input,filters){var o={};filters.each(this,function(fi){fi.applyTo(input,o)});return o}
function Filter(){return Filter.is(H)?H:(Filter.is(this)?this.init():Filter.F())};U.FixCon(Filter);var F=Filter;F.prototype.init=function(){H=this;instances={};return this};F.prototype.getInstance=function(x){return FN.FilterManager().get(x)};F.prototype.applyFilter=function(value,filter){var fo=this.getInstance(filter);fo?false:U.Error(["NoFilter`",filter,"`"].join(''));return fo.apply(value)};F.prototype.applyChain=function(value,filters){var fa=U.mkArray(filters,false,',');fa.length?false:U.Error("FilterChainIsEmpty");return iapplyChain.apply(this,[value,fa])};F.prototype.applyFiltersToHash=function(input,filters){input=U.isObject(input)?input:null;if(input){var fdef=this.getFilterDefiner(filters);return iapplyHash.apply(this,[input,fdef])};return null};F.prototype.applyFiltersToArray=function(input,filters,skipBad){skipBad=U.anyBool(skipBad,false);input=U.safeArray(input);var o=[];if(input.length){filters=U.mkArray(filters,false,',');var value=iapplyChain.apply(this,[value,filters]);(this.isValueValid(value)||!skipBad)?o.push(value):false};return o};F.prototype.applyFiltersToArrayOfHash=function(input,filters){input=U.safeArray(input);var out=[],fdef=this.getFilterDefiner(filters);for(var i=0;i<input.length;i++)if(U.isObject(input[i]))out.push(iapplyHash.apply(this,[input[i],fdef]));return out};F.prototype.getFilterDefiner=function(x){return FN.FilterDefineFactory()(x)};F.prototype.isValid=function(x){return!FN.Values().BadValue.is(x)};F.prototype.isBad=function(x){return FN.Values().BadValue.is(x)};F.prototype.throwValuesErrors=function(x,tt){var c=0;if(U.isObject(x)){for(var k in x)if(x.hasOwnProperty(k))if(this.isBad(x[k])){c++;U.TError(["Filter fails on ",k,": ",x[k].getError()].join(''))}}else U.Error("ThrowValuesErrors requires an object");U.NEString(tt)&&c?U.Error(tt):false;return this};F.prototype.throwValuesErrorFirst=function(x,mainThread){mainThread=U.anyBool(mainThread,false);if(U.isObject(x))for(var k in x)if(x.hasOwnProperty(k))if(this.isBad(x[k])){U[(mainThread?'Error':'TError')](["Filter fails on ",k,": ",x[k].getError()].join(''));return this};return this};F.prototype.checkValuesOk=function(co){if(U.isObject(co)){for(var k in co)if(co.hasOwnProperty(k))if(!this.isValid(co[k]))return false;return true}else if(U.isArray(co)){for(var i=0;i<co.length;i++)if(!this.isValid(co[i]))return false;return true}else return this.isValid(co)?true:false};FN.Filter=F}})();
;/*========== INCLUDE FilterDefine.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.FilterDefineFactory?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null;FN.FilterDefineFactory=function(){if(R)return R
function FilterDefine(x){return FilterDefine.is(x)?x:(FilterDefine.is(this)?this.init(x):FilterDefine.F(x))};U.FixCon(FilterDefine);var F=R=FilterDefine;F.prototype.defs;F.prototype.init=function(x){this.defs=[];if(window.Element&&(x instanceof Element)){return this.initXMLDoc(x)}else if(typeof x==='string'){return this.initFromString(x)}else if(U.isObject(x)){return this.initFromObject(x)}else if(U.isArray(x)){return this.initFromArray(x)}else if(window.DOMParser&&window.XMLDocument&&((x instanceof XMLDocument)||(x instanceof Element)))return this.initXMLDoc(x);U.Error("CantInitFilterDefine")};F.prototype.initFromString=function(x){if(window.DOMParser){var doc=(new DOMParser()).parseFromString(x,"text/xml");if(doc&&(doc instanceof XMLDocument)){var e=doc.getElementsByTagName('parsererror');if(!e||e.length===0)return this.initXMLDoc(doc)}};try{var jso=JSON.parse(x);if(U.isObject(jso))return this.initFromObject(jso);if(U.isArray(jso))return this.initFromArray(jso)}catch(e){};var fd=x.split(';'),o=[];for(var i=0;i<fd.length;i++){var fdo=this.tryParseCSVElement(fd[i]);fdo?o.push(fdo):false};if(o.length)return this.initFromArray(o);U.Error("NoCompatibleFormatFoundForFilterString")};F.prototype.tryParseCSVElement=function(x){var xa=x.split(':');if(xa.length===2){var fns=xa[1].split(',');if(fns.length)return{inName:xa[0],filters:fns}};return null};F.prototype.initFromArray=function(x){x=U.safeArray(x);if(x.length){for(var i=0;i<x.length;i++){var t=U.safeObject(x[i]),def=Q(t.inName,t.outName,t.filters);def&&def.isValid()?this.defs.push(def):U.Error("IncorrectFilterDefinition")};return this};U.Error("FilterDefine:initFromArray fails:emptyArray/notArray")};F.prototype.initFromObject=function(x){x=U.safeObject(x);var o=[];for(var k in x)if(x.hasOwnProperty(k))if(typeof(x[k])==='string'){o.push({inName:k,filters:x[k]})}else if(U.isArray(x[k])){x[k].length?o.push({inName:k,filters:[].concat(x[k])}):U.Error("cantParse: filtersArrayisEmpty on key "+k)}else if(U.isObject(x[k])){o.push({inName:k,outName:x[k].outName,filters:x[k].filters})}else U.Error("Cant parse input object:key "+k);return this.initFromArray(o)};F.prototype.initXMLDoc=function(x){var r=[],props=x.getElementsByTagName('property');if(props&&props.length)for(var i=0;i<props.length;i++)r.push(this.initXMLProp(props[i]));return this.initFromArray(r)};F.prototype.initXMLProp=function(propNode){var iname=U.NEString(propNode.getAttribute('in')),oname=propNode.hasAttribute('out')?U.NEString(propNode.getAttribute('out')):void(0),filters=[];propNode.hasAttribute('filters')?filters.push(propNode.getAttribute('filters')):false;var fe=propNode.getElementsByTagName('filter');if(fe&&fe.length)for(var i=0;i<fe.length;i++)if(fe[i].childNodes&&fe[i].childNodes.length&&(fe[i].childNodes[0]instanceof Text))filters.push(fe[i].childNodes[0].nodeValue);return{inName:iname,outName:oname,filters:filters}};F.prototype.each=function(co,ca){if(U.isCallable(ca)){co=U.isObject(co)?co:this;for(var i=0;i<this.defs.length;i++)ca.apply(co,[this.defs[i],i])};return this}
function FilterDef(inName,outName,filters){return FilterDef.is(this)?this.init(inName,outName,filters):FilterDef.F(inName,outName,filters)};U.FixCon(FilterDef);var Q=FilterDef;Q.prototype.inName=null;Q.prototype.outName=null;Q.prototype.filters=null;Q.prototype.init=function(iname,oname,filters){iname=U.NEString(iname);oname=U.NEString(oname);filters=this.prepareFilters(filters);this.inName=iname?iname:U.Error("FilterDef error:no inName");this.outName=oname?oname:iname;this.filters=filters&&filters.length?filters:U.Error("FilterDef error: no filters");return this};Q.prototype.prepareFilters=function(x){x=U.mkArray(x,false);var fns=[];for(var i=0;i<x.length;i++)fns=fns.concat(U.mkArray(x[i],false));if(fns&&fns.length){var filters=[],FM=FN.FilterManager();for(var i=0;i<fns.length;i++)filters.push(FM.get(fns[i]));return filters};return null};Q.prototype.each=function(co,ca){if(U.isCallable(ca)){co=U.isObject(co)?co:this;for(var i=0;i<this.filters.length;i++)ca.apply(co,[this.filters[i],i])};return this};Q.prototype.extract=function(x){return(U.isObject(x)&&U.defined(x[this.inName]))?x[this.inName]:FN.FilterManage().emptyValue()};Q.prototype.applyTo=function(x,o){var val=x[this.inName];for(var i=0;i<this.filters.length;i++)val=this.filters[i].apply(val);o[this.outName]=val};Q.prototype.isValid=function(){return this.inName&&this.outName&&this.filters&&this.filters.length?true:false};return R}}})();
;/*========== INCLUDE FilterDescriptor.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.FilterDescriptor?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,APS=Array.prototype.slice,instances={}
function FilterDescriptor(id,MC){var key=[MC,id].join('.');return FilterDescriptor.is(instances[key])?instances[key]:((FilterDescriptor.is(this)?this.init:FilterDescriptor.F).apply(this,APS.call(arguments)))};U.FixCon(FilterDescriptor);var F=FilterDescriptor;F.prototype.doc=null;F.prototype.init=function(id,MC){instances[[MC,id].join('.')]=this;this.doc=(new DOMParser()).parseFromString(EFO.TemplateManager().get(id,MC),"application/xml");if(this.doc&&(this.doc instanceof XMLDocument)){var e=this.doc.getElementsByTagName('parsererror');if(e&&e.length)U.Error("CantInitializeGlobalFilterDefinitition:wrongxml")};return this};F.prototype.getSectionImport=function(section){return this.getSection(section,'import')};F.prototype.getSectionExport=function(section){return this.getSection(section,'export')};F.prototype.getSection=function(section,mode){var e=this.doc.getElementsByTagName(section);e=(e&&e.length)?e[0]:null;if(e){var s=e.getElementsByTagName(mode);return s&&s.length?s[0]:null};return null};EFO.Filter.FilterDescriptor=F}})();
;/*========== INCLUDE FilterManager.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.FilterManager?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,H=null,instances=null,FN=EFO.Filter
function FilterManager(){return FilterManager.is(H)?H:(FilterManager.is(this)?this.init():FilterManager.F())};U.FixCon(FilterManager);var F=FilterManager;F.prototype.values=null;F.prototype.init=function(){H=this;instances={};this.values=FN.Values();return this};F.prototype.getEmptyValue=function(){return this.values.EmptyValue()};F.prototype.getInvalidValue=function(err){return this.values.InvalidValue(err)};F.prototype.isBadValue=function(x){return this.values.BadValue.is(x)};F.prototype.instanceExists=function(x){return FN.AbstractFilter.is(instances[x])};F.prototype.get=function(x){if(!this.instanceExists(x))instances[x]=this.createInstance(x);return instances[x]};F.prototype.createInstance=function(x){var FC=FN.AbstractFilter.Factory(x);return U.isCallable(FC)?FC():U.Error("NonFilter:"+x)};FN.FilterManager=F}})();
;/*========== INCLUDE AbstractDefaultFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="AbstractDefault";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){U.AbstractError()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.apply=function(value){if(FN.Values().BadValue.is(value))return this.getDefaultValue();return value};F.prototype.getDefaultValue=function(){return"Override"};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE AbstractFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};window.Eve.EFO.Filter.AbstractFilter?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,FF=FN.factory
function AbstractFilter(){U.AbstractError()};U.FixCon(AbstractFilter);var F=AbstractFilter;F.prototype.init=function(){return this};F.prototype.apply=function(value){if(FN.Values().BadValue.is(value))return value;return U.defined(value)?this.applyFilter(value):this.getEmptyValue()};F.prototype.getEmptyValue=function(){return FN.Values().EmptyValue()};F.prototype.getInvalidValue=function(x){return FN.Values().InvalidValue(x)};F.prototype.applyFilter=function(x){U.AbstractError};FN.AbstractFilter=F;F.Factory=function(x){var fn=[U.UCFirst(x),'FilterFactory'].join('');if(U.isCallable(FF[fn])){var fc=FF[fn]();if(U.isCallable(fc)&&F.prototype.isPrototypeOf(fc.prototype))return fc;U.Error(["Filter constructor must inherit AbstractFilter (",x,")"].join(''))};U.Error(["Cant find factory for filter ",x].join(''))}}})();
;/*========== INCLUDE BooleanFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="Boolean";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){var m=U.anyBool(x,null);return m===null?this.getInvalidValue("NotBool"):m};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE DateTimeFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="DateTime";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter,RX=[{rx:/^\s{0,}(\d{4})-(\d{1,2})-(\d{1,2})(?:\s{1,}(\d{1,2})(?::(\d{1,2})(?::(\d{1,2})){0,1}){0,1}){0,1}\s{0,}$/,m:{y:1,m:2,d:3,h:4,i:5,s:6}},{rx:/^\s{0,}(\d{1,2})(?:[\.,]{1})(\d{1,2})(?:[\.,]{1})(\d{4})(?:\s{1,}(\d{1,2})(?::(\d{1,2})(?::(\d{1,2})){0,1}){0,1}){0,1}\s{0,}$/,m:{y:3,m:2,d:1,h:4,i:5,s:6}}];F.prototype.applyFilter=function(x){for(var i=0;i<RX.length;i++){var m=RX[i].rx.exec(x);if(m)return this.buildDate(m,RX[i].m)};return this.getInvalidValue('UnknownDateFormat')};F.prototype.buildDate=function(m,map){var d=new Date();d.setFullYear(U.IntMoreOr(m[map.y]),U.IntMoreOr(m[map.m])-1,U.IntMoreOr(m[map.d]));d.setHours(U.IntMoreOr(m[map.h],0,0),U.IntMoreOr(m[map.i],0,0),U.IntMoreOr(m[map.s],0,0));return d};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE DateTimeToStringFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="DateTimeToString";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){if(U.isObject(x)&&(x instanceof Date))return[[this.pad(x.getDate()),this.pad(x.getMonth()+1),x.getFullYear()].join('.'),[this.pad(x.getHours()),this.pad(x.getMinutes()),this.pad(x.getSeconds())].join(':')].join(' ');return this.getInvalidValue("NotADate")};F.prototype.pad=function(x){var m=x.toString(),c=0;while(m.length<2){m=['0',m].join('');c++;c>5?U.Error('PadWatchdog'):false};return m};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE DateToStringFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="DateToString";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){if(U.isObject(x)&&(x instanceof Date))return[this.pad(x.getDate()),this.pad(x.getMonth()+1),x.getFullYear()].join('.');return this.getInvalidValue("NotADate")};F.prototype.pad=function(x){var m=x.toString(),c=0;while(m.length<2){m=['0',m].join('');c++;c>5?U.Error('PadWatchdog'):false};return m};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE Default0Filter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="Default0";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter.Factory('AbstractDefault'));var F=filter;F.prototype.getDefaultValue=function(){return 0};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE Default1Filter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="Default1";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter.Factory('AbstractDefault'));var F=filter;F.prototype.getDefaultValue=function(){return 1};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE DefaultEmptyArray.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="DefaultEmptyArray";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter.Factory('AbstractDefault'));var F=filter;F.prototype.getDefaultValue=function(){return[]};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE DefaultEmptyStringFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="DefaultEmptyString";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter.Factory('AbstractDefault'));var F=filter;F.prototype.getDefaultValue=function(){return''};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE DefaultFalseFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="DefaultFalse";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter.Factory('AbstractDefault'));var F=filter;F.prototype.getDefaultValue=function(){return false};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE DefaultNowFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="DefaultNow";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter.Factory('AbstractDefault'));var F=filter;F.prototype.getDefaultValue=function(){return new Date()};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE DefaultNullFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="DefaultNull";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter.Factory('AbstractDefault'));var F=filter;F.prototype.getDefaultValue=function(){return null};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE DefaultTrueFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="DefaultTrue";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter.Factory('AbstractDefault'));var F=filter;F.prototype.getDefaultValue=function(){return true};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE DummyFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="Dummy";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){return x};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE EmailMatchFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="EmailMatch";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){return EFO.Checks.isEmail(x)?x:this.getInvalidValue('InvalidEmail')};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE FloatFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="Float";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){var t=U.FloatOr(x,null);return t===null?this.getInvalidValue("Float"):t};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE FloatMore0Filter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="FloatMore0";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){var t=U.FloatMoreOr(x,0,null);return t===null?this.getInvalidValue("FloatMore0"):t};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE IntFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="Int";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){var t=U.IntOr(x,null);return t===null?this.getInvalidValue("Int"):t};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE IntMore0Filter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="IntMore0";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){var t=U.IntMoreOr(x,0,null);return t===null?this.getInvalidValue("IntMore0"):t};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE NEArrayFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="NEArray";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){return U.isArray(x)&&x.length?x:this.getInvalidValue("NotArray/EmptyArray")};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE NEStringFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="NEString";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){var y=U.NEString(x);return y?y:this.getInvalidValue('NEString')};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE SQLBoolFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="SQLBool";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){if(typeof x==='boolean')return x===true?1:0;return this.getInvalidValue("NotBool")};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE StripFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="Strip";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){try{return x.replace(/<\/?[^>]+>/gi,'')}catch(ex){};return this.getInvalidValue('NonString')};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE TrimFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="Trim";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){return U.NEString(x,'')};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE UpperCaseFilter.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.factory=window.Eve.EFO.Filter.factory||{};var CN="UpperCase";window.Eve.EFO.Filter.factory[CN+"FilterFactory"]?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,FN=EFO.Filter,R=null,FF=FN.factory
function Factory(){if(R)return R
function filter(){return filter.is(this)?this.init():filter.F()};filter.xInheritE(FN.AbstractFilter);var F=filter;F.prototype.applyFilter=function(x){try{return x.toUpperCase()}catch(e){};return this.getInvalidValue("Not-a-String")};return R=F};FF[CN+"FilterFactory"]=Factory}})();
;/*========== INCLUDE Values.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Filter=window.Eve.EFO.Filter||{};window.Eve.EFO.Filter.Values?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,H=null,FN=EFO.Filter,R=null
function ValuesFactory(){if(R)return R
function BadValue(){U.AbstractError()};U.FixCon(BadValue);BadValue.prototype.getError=function(){return"abstractBadValue"}
function EmptyValue(){return EmptyValue.is(H)?H:(EmptyValue.is(this)?this.init():EmptyValue.F())};EmptyValue.xInheritE(BadValue);EmptyValue.prototype.init=function(){H=this;return this};EmptyValue.prototype.getError=function(){return"ValueIsEmpty"}
function InvalidValue(errVal){return InvalidValue.is(this)?this.init(errVal):InvalidValue.F(errVal)};InvalidValue.xInheritE(BadValue);InvalidValue.prototype.err=null;InvalidValue.prototype.init=function(err){this.err=err;return this};InvalidValue.prototype.getError=function(){return["ValueIsInvalid:",this.err].join('')};R={BadValue:BadValue,EmptyValue:EmptyValue,InvalidValue:InvalidValue};return R};FN.Values=ValuesFactory}})();
;/*========== INCLUDE @widgets/Splitter========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Widgets=window.Eve.EFO.Widgets||{};window.Eve.EFO.Widgets.Splitter?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,WNS=EFO.Widgets,PAR=WNS.widget,PARP=PAR.prototype,APS=Array.prototype.slice
function Splitter(){return Splitter.is(this)?this.init():Splitter.F()};Splitter.xInheritE(PAR);var F=Splitter;F.mixines=['Roleable'];U.initMixines(F);F.prototype.getWidgetClass=function(){return'Splitter'};F.prototype.onInit=function(){var x=PARP.onInit.apply(APS.call(arguments));this.initEventHandlers();return x};F.prototype.initEventHandlers=function(){this.getRole("splitter").get(0).removeEventListener('mousedown',this.onMouseDown.bindToObject(this));this.getRole("splitter").get(0).addEventListener('mousedown',this.onMouseDown.bindToObject(this));return this};F.prototype.setElements=function(a1,a2){this.content1=a1;this.content2=a2;this.getRole('p1').append(this.content1);this.getRole('p2').append(this.content2);return this};F.prototype.setController=function(x){this.id=x.getControllerId();this.cssclass=x.getCssClass();var w=this.loadParams();this.setStyle(w,100-w);this.ci=x;return this};F.prototype.loadParams=function(){var key=["EFOWidgetSplitter_",this.cssclass].join('_');return U.FloatMoreOr(localStorage.getItem(key),0,50)};F.prototype.setStyle=function(lw,rw){if(!this.style){this.style=jQuery(['<style ','id="EFOSplitterWidget',this.id,'"></style>'].join(''));this.style.appendTo('head')};this.style.html([["#EFOController",this.id,' .widgetSplitter .widgetSplitterPanel1{width:',lw,'%;max-width:',lw,"%;}"].join(''),["#EFOController",this.id,' .widgetSplitter .widgetSplitterPanel2{width:',rw,'%;max-width:',rw,"%;}"].join('')].join(''));return this};F.prototype.setData=function(x){var key=["EFOWidgetSplitter_",this.cssclass].join('_');localStorage.setItem(key,U.FloatMoreOr(x,0,50));return this};F.prototype.onAfterShow=function(){return PARP.onAfterShow.apply(APS.call(arguments))};F.prototype.onMouseDown=function(evt){document.removeEventListener('mouseup',this.onMouseUp1.bindToObject(this));document.removeEventListener('mouseup',this.onMouseUp2.bindToObject(this));document.removeEventListener('mousemove',this.onMouseMove1.bindToObject(this));document.removeEventListener('mousemove',this.onMouseMove2.bindToObject(this));document.addEventListener('mouseup',this.onMouseUp1.bindToObject(this));document.addEventListener('mousemove',this.onMouseMove1.bindToObject(this));this.touchX=evt.pageX;this.touchY=evt.pageY;return this};F.prototype.onMouseUp1=function(){document.removeEventListener('mouseup',this.onMouseUp1.bindToObject(this));document.removeEventListener('mouseup',this.onMouseUp2.bindToObject(this));document.removeEventListener('mousemove',this.onMouseMove1.bindToObject(this));document.removeEventListener('mousemove',this.onMouseMove2.bindToObject(this));document.removeEventListener('mousemove',this.onMouseMove1.bindToObject(this));this.removeHelper();return this};F.prototype.onMouseMove1=function(evt){var dx=Math.max(evt.pageX,this.touchX)-Math.min(evt.pageX,this.touchX),dy=Math.max(evt.pageY,this.touchY)-Math.min(evt.pageY,this.touchY),dz=Math.sqrt(Math.pow(dx,2)+Math.pow(dy,2));if(dz>15)this.startSplit(evt)};F.prototype.startSplit=function(evt){this.createHelper();document.removeEventListener('mouseup',this.onMouseUp1.bindToObject(this));document.removeEventListener('mouseup',this.onMouseUp2.bindToObject(this));document.removeEventListener('mousemove',this.onMouseMove1.bindToObject(this));document.removeEventListener('mousemove',this.onMouseMove2.bindToObject(this));document.removeEventListener('mousemove',this.onMouseMove1.bindToObject(this));document.addEventListener('mousemove',this.onMouseMove2.bindToObject(this));document.addEventListener('mouseup',this.onMouseUp2.bindToObject(this));this.onMouseMove2(evt);return this};F.prototype.onMouseMove2=function(evt){this.positeHelper(this.extractX(evt),evt.pageY);return this};F.prototype.extractX=function(evt){var x=evt.pageX,ox=parseFloat(this.handle.offset().left),maxX=parseFloat(this.handle.innerWidth())+ox-100;return Math.min(maxX,Math.max(ox+100,x))};F.prototype.onMouseUp2=function(evt){var cx=this.extractX(evt),ox=parseFloat(this.handle.offset().left);cx=cx-ox;var pc=parseFloat(this.handle.innerWidth())/100,pc1=cx/pc,pc2=100-pc1;this.setData(pc1);this.setStyle(pc1,pc2);this.onMouseUp1();if(U.isObject(this.ci)&&U.isCallable(this.ci['on_splitter_moved']))try{this.ci.on_splitter_moved(this)}catch(ee){};return this};F.prototype.createHelper=function(){if(!this.helper)this.helper=jQuery(EFO.TemplateManager().get('helper',this.getWidgetClass()));this.helper.appendTo('body');return this};F.prototype.removeHelper=function(){this.helper?this.helper.remove():false;this.helper?this.helper.yset=null:false;return this};F.prototype.positeHelper=function(x,y){if(this.helper){this.helper.css('left',x+'px');if(!this.helper.yset){this.helper.css('top',y+'px');this.helper.yset=true}};return this};WNS.Splitter=F}})();
;/*========== INCLUDE @widgets/HSplitter========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Widgets=window.Eve.EFO.Widgets||{};window.Eve.EFO.Widgets.HSplitter?false:initPlugin()
function initPlugin(){var EFO=window.Eve.EFO,U=EFO.U,WNS=EFO.Widgets,PAR=WNS.widget,PARP=PAR.prototype,APS=Array.prototype.slice
function HSplitter(){return HSplitter.is(this)?this.init():HSplitter.F()};HSplitter.xInheritE(PAR);var F=HSplitter;F.mixines=['Roleable'];U.initMixines(F);F.prototype.getWidgetClass=function(){return'HSplit'};F.prototype.onInit=function(){var x=PARP.onInit.apply(APS.call(arguments));this.initEventHandlers();return x};F.prototype.initEventHandlers=function(){this.getRole("splitter").get(0).removeEventListener('mousedown',this.onMouseDown.bindToObject(this));this.getRole("splitter").get(0).addEventListener('mousedown',this.onMouseDown.bindToObject(this));return this};F.prototype.setElements=function(a1,a2){this.content1=a1;this.content2=a2;this.getRole('p1').append(this.content1);this.getRole('p2').append(this.content2);return this};F.prototype.setController=function(x){this.id=x.getControllerId();this.cssclass=x.getCssClass();var w=this.loadParams();this.setStyle(w,100-w);this.ci=x;return this};F.prototype.loadParams=function(){var key=["EFOWHSplit_",this.cssclass].join('_');return U.FloatMoreOr(localStorage.getItem(key),0,50)};F.prototype.setStyle=function(lw,rw){if(!this.style){this.style=jQuery(['<style ','id="EFOHSplitWidget',this.id,'"></style>'].join(''));this.style.appendTo('head')};this.style.html([["#EFOController",this.id,' .widgetHSplit .widgetHSplitPanel1{height:',lw,'%;max-height:',lw,"%;}"].join(''),["#EFOController",this.id,' .widgetHSplit .widgetHSplitPanel2{height:',rw,'%;max-height:',rw,"%;}"].join('')].join(''));return this};F.prototype.setData=function(x){var key=["EFOWHSplit_",this.cssclass].join('_');localStorage.setItem(key,U.FloatMoreOr(x,0,50));return this};F.prototype.onAfterShow=function(){return PARP.onAfterShow.apply(APS.call(arguments))};F.prototype.onMouseDown=function(evt){document.removeEventListener('mouseup',this.onMouseUp1.bindToObject(this));document.removeEventListener('mouseup',this.onMouseUp2.bindToObject(this));document.removeEventListener('mousemove',this.onMouseMove1.bindToObject(this));document.removeEventListener('mousemove',this.onMouseMove2.bindToObject(this));document.addEventListener('mouseup',this.onMouseUp1.bindToObject(this));document.addEventListener('mousemove',this.onMouseMove1.bindToObject(this));this.touchX=evt.pageX;this.touchY=evt.pageY;return this};F.prototype.onMouseUp1=function(){document.removeEventListener('mouseup',this.onMouseUp1.bindToObject(this));document.removeEventListener('mouseup',this.onMouseUp2.bindToObject(this));document.removeEventListener('mousemove',this.onMouseMove1.bindToObject(this));document.removeEventListener('mousemove',this.onMouseMove2.bindToObject(this));document.removeEventListener('mousemove',this.onMouseMove1.bindToObject(this));this.removeHelper();return this};F.prototype.onMouseMove1=function(evt){var dx=Math.max(evt.pageX,this.touchX)-Math.min(evt.pageX,this.touchX),dy=Math.max(evt.pageY,this.touchY)-Math.min(evt.pageY,this.touchY),dz=Math.sqrt(Math.pow(dx,2)+Math.pow(dy,2));if(dz>15)this.startSplit(evt)};F.prototype.startSplit=function(evt){this.createHelper();document.removeEventListener('mouseup',this.onMouseUp1.bindToObject(this));document.removeEventListener('mouseup',this.onMouseUp2.bindToObject(this));document.removeEventListener('mousemove',this.onMouseMove1.bindToObject(this));document.removeEventListener('mousemove',this.onMouseMove2.bindToObject(this));document.removeEventListener('mousemove',this.onMouseMove1.bindToObject(this));document.addEventListener('mousemove',this.onMouseMove2.bindToObject(this));document.addEventListener('mouseup',this.onMouseUp2.bindToObject(this));this.onMouseMove2(evt);return this};F.prototype.onMouseMove2=function(evt){this.positeHelper(evt.pageX,this.extractY(evt));return this};F.prototype.extractY=function(evt){var x=evt.pageY,ox=parseFloat(this.handle.offset().top),maxY=parseFloat(this.handle.innerHeight())+ox-100;return Math.min(maxY,Math.max(ox+100,x))};F.prototype.onMouseUp2=function(evt){var cx=this.extractY(evt),ox=parseFloat(this.handle.offset().top);cx=cx-ox;var pc=parseFloat(this.handle.innerHeight())/100,pc1=cx/pc,pc2=100-pc1;this.setData(pc1);this.setStyle(pc1,pc2);this.onMouseUp1();if(U.isObject(this.ci)&&U.isCallable(this.ci['on_hsplitter_moved']))try{this.ci.on_hsplitter_moved(this)}catch(ee){};return this};F.prototype.createHelper=function(){if(!this.helper)this.helper=jQuery(EFO.TemplateManager().get('helper',this.getWidgetClass()));this.helper.appendTo('body');return this};F.prototype.removeHelper=function(){this.helper?this.helper.remove():false;this.helper?this.helper.yset=null:false;return this};F.prototype.positeHelper=function(x,y){if(this.helper){this.helper.css('top',y+'px');if(!this.helper.xset){this.helper.css('left',x+'px');this.helper.xset=true}};return this};WNS.HSplitter=F}})();
;/*========== INCLUDE ComparatorFacade.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.SorterDelegate=window.Eve.EFO.SorterDelegate||{};window.Eve.EFO.SorterDelegate.ComparatorFacade?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,SD=EFO.SorterDelegate,APS=Array.prototype.slice
function ComparatorFacade(){return(ComparatorFacade.is(this)?this.init:ComparatorFacade.F).apply(this,APS.call(arguments))};U.FixCon(ComparatorFacade);var F=ComparatorFacade;F.prototype.name=null;F.prototype.factory_name=null;F.prototype.factory=null;F.prototype.instance=null;F.prototype.direction=true;F.prototype.lockon=false;F.prototype.fixposition=false;F.prototype.init=function(name,dir,lockon,fixposition){this.name=U.NEString(name,null);this.direction=U.anyBool(dir,true);this.lockon=U.anyBool(lockon,false);this.fixposition=U.anyBool(fixposition,false);this.name?this._findFactory():false;return this};F.prototype.getInstance=function(){if(!this.instance)this.instance=this.factory();return this.instance};F.prototype._findFactory=function(){this.factory_name=[U.UCFirst(this.name),"ComparatorFactory"].join('');this.factory=SD.Comparators.AbstractComparator.factory(this.factory_name);return this};F.prototype.isValid=function(){return this.name&&this.factory_name&&this.factory?true:false};F.prototype.serialize=function(){return[this.name,this.direction?1:0,this.lockon?1:0,this.fixposition?1:0].join(':')};F.prototype.compare=function(a,b){return this.getInstance().compare(a,b,this.direction)};F.parseComparatorString=function(x){var ca=U.NEString(x,'').split(','),result=[];for(var i=0;i<ca.length;i++){var com=F.parseString(ca[i],i);F.is(com)&&com.isValid()?result.push(com):false};return result};F.parseString=function(instr,xpos){var sa=U.NEString(instr,'').split(':'),sn=U.NEString(sa[0],''),sd=U.anyBool(sa[1],true),lo=U.anyBool(sa[2],false),fp=U.anyBool(sa[3],false),comparator=F(sn,sd,lo,fp);return comparator&&comparator.isValid()?comparator:null};SD.ComparatorFacade=F}})();
;/*========== INCLUDE AbstractComparator.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.SorterDelegate=window.Eve.EFO.SorterDelegate||{};window.Eve.EFO.SorterDelegate.Comparators=window.Eve.EFO.SorterDelegate.Comparators||{};window.Eve.EFO.SorterDelegate.Comparators.AbstractComparator?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,APS=Array.prototype.slice,SD=EFO.SorterDelegate,SDC=SD.Comparators
function AbstractComparator(){U.AbstractError()};U.FixCon(AbstractComparator);var F=AbstractComparator;F.prototype.init=function(){this.onInit.apply(this,APS.call(arguments));return this};F.prototype.onInit=function(){return this};F.prototype.compare=function(a,b,d){return d?this._compare(a,b):this._compare(b,a)};F.prototype._compare=function(a,b){U.AbstractError()};F.factory=function(factory_name){if(U.isCallable(SDC[factory_name])){var con=SDC[factory_name]();if(U.isCallable(con)&&F.prototype.isPrototypeOf(con.prototype))return con};return null};SDC.AbstractComparator=F}})();
;/*========== INCLUDE SimpleIntComparator.js========*/;
(function(){var CN="SimpleInt";window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.SorterDelegate=window.Eve.EFO.SorterDelegate||{};window.Eve.EFO.SorterDelegate.Comparators=window.Eve.EFO.SorterDelegate.Comparators||{};window.Eve.EFO.SorterDelegate.Comparators[CN+"ComparatorFactory"]?false:initPlugin()
function initPlugin(){var F=null
function factory(){if(!F){var E=window.Eve,EFO=E.EFO,U=EFO.U,APS=Array.prototype.slice,SD=EFO.SorterDelgate,SDC=SD.Comparators,PAR=SDC.AbstractComparator,PARP=PAR.prototype;function comparator(){return(comparator.is(this)?this.init:comparator.F).apply(this,APS.call(arguments))};comparator.xInheritE(PAR);F=comparator;F.prototype.onInit=function(){return PARP.onInit.apply(this,APS.call(arguments))};F.prototype._compare=function(a,b){return a-b}};F.description="По значению";return F};window.Eve.EFO.SorterDelegate.Comparators[CN+"ComparatorFactory"]=factory}})();
;/*========== INCLUDE SorterDelegate.js========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.SorterDelegate=window.Eve.EFO.SorterDelegate||{};window.Eve.EFO.SorterDelegate.SorterDelegate?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,SDN=EFO.SorterDelegate,APS=Array.prototype.slice,LS=window.localStorage
function SorterDelegate(){return(SorterDelegate.is(this)?this.init:SorterDelegate.F).apply(this,APS.call(arguments))};U.FixCon(SorterDelegate);var F=SorterDelegate;F.prototype.comparators=null;F.prototype.prefix=null;F.prototype.init=function(prefix,defComparators){this.prefix=U.NEString(prefix,null);this.prefix?false:U.Error("EFO:SorterDelegate requires prefix");this.restoreComparators(defComparators);this.sortWithComparators=this._sortWithComparators.bindToObject(this);return this};F.prototype.lockon=function(comparators){var comparators=U.safeArray(comparators);for(var i=0;i<comparators.length;i++)this.lockonComparator(comparators[i]);this.save();return this};F.prototype.lockonComparator=function(comparator){var co=this.getNamedComparator(comparator);co?co.lockon=true:false;return this};F.prototype.getNamedComparator=function(name){for(var i=0;i<this.comparators.length;i++)if(this.comparators[i].name===name)return this.comparators[i];return null};F.prototype.fixComparatorPositions=function(comparators){var comparators=U.safeArray(comparators),f=[],s=[],cot={};if(comparators.length){for(var i=0;i<comparators.length;i++)cot[comparators[i]]=comparators[i];for(var i=0;i<this.comparators.length;i++)if(cot[this.comparators[i].name]===this.comparators[i].name){f.push(this.comparators[i]);this.comparators[i].fixposition=true}else s.push(this.comparators[i]);this.comparators=[].concat(f,s);this.save()};return this};F.prototype.restoreComparators=function(def){def=U.NEString(def,'');var st=null;try{var st=LS.getItem(this.getLSKey());st=U.NEString(st,def)}catch(e){st=null};this.setComparatorsFromString(st);return this};F.prototype.setComparatorsFromString=function(sst){this.comparators=SDN.ComparatorFacade.parseComparatorString(sst);return this};F.prototype.renumerate=function(){for(var i=0;i<this.comparators.length;i++)this.comparators[i]._sort_index=i;return this};F.prototype.getLSKey=function(){return[this.prefix,"EFOSorter"].join('')};F.prototype.sort=function(data){if(U.isArray(data)&&U.isArray(this.comparators))data.sort(this.sortWithComparators);return this};F.prototype._sortWithComparators=function(a,b){var r=0;for(var i=0;i<this.comparators.length;i++){r=this.comparators[i].compare(a,b);if(r!==0)break};return r};F.prototype.save=function(){var t=[];for(var i=0;i<this.comparators.length;i++)t.push(this.comparators[i].serialize());LS.setItem(this.getLSKey(),t.join(','));return this};F.prototype.get=function(comparator_name){for(var i=0;i<this.comparators.length;i++)if(this.comparators[i].name===comparator_name)return this.comparators[i];return null};SDN.SorterDelegate=F}})();
;/*========== INCLUDE @Utils/CallbackManagerObject========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.CallbackManagerObject?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,APS=Array.prototype.slice
function CallbackManagerObject(){return(CallbackManagerObject.is(this)?this.init:CallbackManagerObject.F).apply(this,APS.call(arguments))};U.FixCon(CallbackManagerObject);var F=CallbackManagerObject;F.prototype.importProxy=function($object){if(U.isObject($object)){$object.clearAllNamedCallbacks=this.clear.bindToObject(this);$object.addNamedCallback=this.addNamedCallback.bindToObject(this);$object.clearNamedCallbacks=this.clearNamedCallbacks.bindToObject(this);$object.removeNamedCallback=this.removeNamedCallback.bindToObject(this);$object.runNamedCallback=this.run.bindToObject(this);$object.runNamedCallbackWArray=this.runWithArray.bindToObject(this);$object.namedCallbackExists=this.exists.bindToObject(this)};return this};F.prototype._c=null;F.prototype.init=function(){return this.clear()};F.prototype.clear=function(){this._c={};return this};F.prototype.addNamedCallback=function(n,co,ca){var cb=CallbackObject(n,co,ca);if(cb.isValid()){U.isArray(this._c[cb._n])?false:this._c[cb._n]=[];this._c[cb._n].push(cb)};return this};F.prototype.clearNamedCallbacks=function(n){n=CallbackObject._prepareName(n);if(n&&U.isArray(this._c[n]))delete(this._c[n]);return this};F.prototype.removeNamedCallback=function(n,co,ca){var xn=CallbackObject._prepareName(n),xco=CallbackObject._selectContext(co,ca),xca=CallbackObject._selectCallable(co,ca);if(xn&&xca&&U.isArray(this._c[xn])){var t=[];for(var i=0;i<this._c[xn].length;i++)if(!this._c[xn][i].compare(xn,xco,xca))t.push(this._c[xn][i]);this._c[xn]=t};return this};F.prototype.exists=function(n){var xn=CallbackObject._prepareName(n);return(xn&&U.isArray(this._c[xn])&&this._c[xn].length)?true:false};F.prototype.run=function(n){var args=APS.call(arguments,1);return this.runWithArray(n,args)};F.prototype.runWithArray=function(n,a){var xn=CallbackObject._prepareName(n);a=U.safeArray(a);if(xn&&U.isArray(this._c[xn]))for(var i=0;i<this._c[xn].length;i++)this._c[xn][i].run(a);return this}
function CallbackObject(){return(CallbackObject.is(this)?this.init:CallbackObject.F).apply(this,APS.call(arguments))};U.FixCon(CallbackObject);var CO=CallbackObject;CO._prepareName=function(x){return U.NEString(U.NEString(x,'').toLowerCase(),null)};CO._selectContext=function(co,ca){if(U.isObject(co)&&!U.isCallable(co))return co;if(U.isObject(ca)&&!U.isCallable(ca))return ca;return null};CO._selectCallable=function(co,ca){return U.isCallable(co)?co:(U.isCallable(ca)?ca:null)};CO.prototype._co=null;CO.prototype._n=null;CO.prototype._ca=null;CO.prototype.init=function(n,co,ca){this._n=CO._prepareName(n);this._co=CO._selectContext(co,ca);this._ca=CO._selectCallable(co,ca);return this};CO.prototype.isValid=function(){return(this._n&&U.isCallable(this._ca))?true:false};CO.prototype.compare=function(n,co,ca){return this._n===n&&this._co===co&&this._ca===ca?true:false};CO.prototype.run=function(args){var co=U.isObject(this._co)?this._co:this;try{this._ca.apply(co,U.safeArray(args))}catch($e){U.TError($e)};return this};EFO.CallbackManagerObject=CallbackManagerObject;CallbackManagerObject.CallbackClass=CO}})();
;/*========== INCLUDE @Utils/queueStack========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Ready=window.Eve.EFO.Ready||[];window.Eve.EFO.Ready.push(EReady)
function EReady(){var E=window.Eve,EFO=E.EFO,U=EFO.U,APS=Array.prototype.slice;EFO.queueStack?false:initPlugin()
function initPlugin(){function queueStack(){return(queueStack.is(this)?this.init:queueStack.F).apply(this,APS.call(arguments))};U.FixCon(queueStack);var F=queueStack;F.prototype._tasks=null;F.prototype.init=function(){this.clear();return this};F.prototype.clear=function(){this._tasks=[];return this};F.prototype.addTask=function(context,callable,argobj,shift){var task=new Task(context,callable,U.safeObject(argobj));if(task&&task.isValid()){U.anyBool(shift,false)?this._shiftTask(task):this._pushTask(task);return task};return null};F.prototype._shiftTask=function(task){this._tasks=[task._setState(TASKSTATES.QUEUED)].concat(this._tasks);return this};F.prototype._pushTask=function(task){this._tasks.push(task._setState(TASKSTATES.QUEUED));return this};F.prototype.next=function(){var lc=this._removeFinishedTasks();if(lc===0)this._nextInternal();return this};F.prototype._nextInternal=function(){for(var i=0;i<this._tasks.length;i++)if(this._tasks[i].state===TASKSTATES.QUEUED){this._tasks[i].run(this);break};return this};F.prototype._removeFinishedTasks=function(){var ns=[],lc=0;for(var i=0;i<this._tasks.length;i++){this._tasks[i].canRemove()?this._tasks[i].onRemove():ns.push(this._tasks[i]);this._tasks[i].state===TASKSTATES.RUNNING?lc++:false};this._tasks=ns;return lc};var TASKSTATES={INITIAL:0,QUEUED:100,RUNNING:200,FINISHED:300,FINISHEDERROR:400}
function Task(co,ca,arg){return(Task.is(this)?this.init:Task.F).apply(this,APS.call(arguments))};U.FixCon(Task);Task.prototype.args=null;Task.prototype.context=null;Task.prototype.callable=null;Task.prototype.state=null;Task.prototype.queue=null;Task.prototype.init=function(co,ca,arg){this.args=U.safeObject(arg);this.context=U.isObject(co)?co:null;this.callable=U.isCallable(ca)?ca:null;this.state=TASKSTATES.INITIAL;return this};Task.prototype.isValid=function(){return this.context&&this.callable&&(this.state===TASKSTATES.INITIAL)?true:false};Task.prototype.run=function(queue){queueStack.is(queue)?false:U.Error('queueStack required');this.state===TASKSTATES.QUEUED?false:U.Error('wrongState');this.queue=queue;this.state=TASKSTATES.RUNNING;try{this._runInternal()}catch(e){this.state=TASKSTATES.FINISHEDERROR;this.queue.next();U.TError(e.message)};return this};Task.prototype._runInternal=function(){this.callable.apply(this.context,[this])};Task.prototype.canLaunch=function(){return this.state===TASKSTATES.QUEUED?true:false};Task.prototype.canRemove=function(){return(this.state===TASKSTATES.FINISHED||this.state===TASKSTATES.FINISHEDERROR)?true:false};Task.prototype.complete=function(){this.state=TASKSTATES.FINISHED;this.queue.next()};Task.prototype.error=function(){this.state=TASKSTATES.FINISHEDERROR;this.queue.next()};Task.prototype.getParam=function(n){return this.args&&(n in this.args)?this.args[n]:void(0)};Task.prototype._setState=function(x){U.IntMoreOr(x,0,0)>this.state?false:U.Error("LowerState");this.state=x;return this};Task.prototype.callback_signature=function(task){U.Error("Abstract");task.complete();task.error()};Task.prototype.onRemove=function(){var c=this.getParam('onRemove');if(U.isCallable(c))try{c.apply(this.context,[this])}catch(e){};this.callable=null;this.context=null;this.args=null;this.queue=null;return this};F.task_class=Task;EFO.queueStack=F}}})();
;/*========== INCLUDE @Utils/SimpleStyleDriver========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.SStyleDriver?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,H=null,APS=Array.prototype.slice
function SimpleStyleDriver(){return SimpleStyleDriver.is(H)?H:((SimpleStyleDriver.is(this)?this.init:SimpleStyleDriver.F).apply(this,APS.call(arguments)))};U.FixCon(SimpleStyleDriver);var F=SimpleStyleDriver;F.prototype.styles=null;F.prototype.headObject=null;F.prototype.init=function(){this.styles={};this.headObject=this.getHead();H=this;return this};F.prototype.getHead=function(){var hs=document.getElementsByTagName('head');if(hs&&hs.length)return hs[0];hs=document.getElementsByTagName('body');if(hs&&hs.length)return hs[0];return document.documentElement};F.prototype.registerStyle=function(id,styledata){if(this.hasStyle(id))this.unregisterStyle(id);this.styles[id]=StyleObject(id,styledata);return this};F.prototype.registerStyleO=function(xo){if(U.isObject(xo)&&U.NEString(xo.id,null)&&U.NEString(xo.css,null)){this.registerStyle(xo.id,xo.css)}else U.TError("CantRegisterStyleObject:noidorcssFields");return this};F.prototype.registerStyleInstall=function(id,styledata){this.registerStyle(id,styledata).installStyle(id);return this};F.prototype.registerStyleOInstall=function(xo){if(U.isObject(xo)&&U.NEString(xo.id,null)&&U.NEString(xo.css,null)){this.registerStyle(xo.id,xo.css).installStyle(xo.id)}else U.TError("CantRegisterStyleObject:noidorcssFields");return this};F.prototype.hasStyle=function(id){var iid=U.NEString(id,null);return iid&&StyleObject.is(this.styles[iid])?true:false};F.prototype.installStyle=function(id){if(this.hasStyle(id)){this.styles[id].install(this.headObject)}else U.TError("CantInstallStyle_"+id);return this};F.prototype.uninstall=function(id){if(this.hasStyle(id))this.styles[id].uninstall();return this};F.prototype.unregisterStyle=function(id){if(this.hasStyle(id)){this.uninstall(id);delete(this.styles[id])};return this}
function StyleObject(){return(StyleObject.is(this)?this.init:StyleObject.F).apply(this,APS.call(arguments))};U.FixCon(StyleObject);var SO=StyleObject;SO.prototype.id=null;SO.prototype.handle=null;SO.prototype.init=function(id,data){this.id=U.NEString(id);this.id?false:U.Error("InvalidStyleId");this.handle=document.createElement('style');this.handle.type="text/css";this.handle.id=U.UID(["drivenStyle:",id,':'].join(''));this.handle.innerHTML=data;return this};SO.prototype.install=function(xnode){if(this.handle)xnode.appendChild(this.handle);return this};SO.prototype.uninstall=function(){if(this.handle)try{this.handle.remove()}catch(ee){U.TError(ee)};return this};EFO.SStyleDriver=F}})();
;/*========== INCLUDE @Utils/sharedObject========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.sharedObject?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,APS=Array.prototype.slice,instances={}
function sharedObject(id){return sharedObject.is(instances[id])?instances[id]:((sharedObject.is(this)?this.init:sharedObject.F).apply(this,APS.call(arguments)))};U.FixCon(sharedObject);var F=sharedObject;F.prototype._share=null;F.prototype.init=function(id){instances[id]=this;return this};F.prototype.get=function(){if(!this._share)this._share=this._create_object();return this._share};F.prototype._create_object=function(){U.TError("Override!");return{}};EFO.sharedObject=F}})();
;/*========== INCLUDE @Utils/SimpleCallback========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO._simpleCallback?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,APS=Array.prototype.slice
function _simpleCallback(){return(_simpleCallback.is(this)?this.init:_simpleCallback.F).apply(this,APS.call(arguments))};var F=U.FixCon(_simpleCallback);F.prototype.list=null;F.prototype.init=function(){this.list={};return this};F.prototype.addCallbackRet=function(name,context,callable){var cb=Callback(name,context,callable);return cb&&cb.isValid()?this.registerCallback(cb):null};F.prototype.addCallback=function(){this.addCallbackRet.apply(this,APS.call(arguments));return this};F.prototype.createCallback=function(n,co,ca){var cb=Callback(n,co,ca);return cb&&cb.isValid()?cb:null};F.prototype.addCallbackObject=function(coa){if(Callback.is(coa))this.registerCallback(coa);return this};F.prototype.registerCallback=function(cb){Callback.is(cb)?false:U.Error("NCB");U.isArray(this.list[cb.name])?false:this.list[cb.name]=[];this.list[cb.name].push(cb);return cb._id};F.prototype.removeCallback=function(name,id){name=this.exists(name);if(name){var t=[];for(var i=0;i<this.list[name].length;i++)this.list[name][i]._id===id?this.list[name][i].release():t.push(this.list[name][i]);this.list[name]=t};return this};F.prototype.removeCallbackId=function(id){for(var k in this.list)if(U.NEArray(this.list[k]))this.removeCallback(k,id);return this};F.prototype.clearCallbacks=function(name){name=this.prepareName(name);if(name){if(U.NEArray(this.list[name])){for(var i=0;i<this.list[name].length;i++)this.list[name][i].release();delete(this.list[name])}}else{for(var k in this.list)if(U.NEArray(this.list[k]))for(var i=0;i<this.list[k].length;i++)this.list[k][i].release();this.list={}};return this};F.prototype.exists=function(name){name=this.prepareName(name);return name&&(U.NEArray(this.list[name])?true:false)?name:false};F.prototype.runCallback=function(name){var args=APS.call(arguments,1);name=this.exists(name);if(name)for(var i=0;i<this.list[name].length;i++)Callback.is(this.list[name][i])?this.list[name][i].run(args):false;return this};F.prototype.runCallbackObject=function(coa){if(Callback.is(coa)){var args=APS.call(arguments,1);coa.run(args)};return this};F.prototype.prepareName=function(x){x=U.NEString(x,null);return x?x.toLowerCase():null}
function Callback(){return(Callback.is(this)?this.init:Callback.F).apply(this,APS.call(arguments))};var C=U.FixCon(Callback);C.prototype._name=null;C.prototype._id=null;C.prototype._context=null;C.prototype._callable=null;C.prototype.init=function(n,co,ca){this.id=U.UID();this.name=F.prototype.prepareName(U.coalesceString(n,co,ca));this._context=U.coalesceObject(co,n,ca);this._callable=U.coalesceCallable(ca,co,n);return this};C.prototype.isValid=function(){return this.name&&this._callable?true:false};C.prototype.release=function(){this.name=null;this._callable=null;this._context=null};C.prototype.nameMatch=function(x){return F.prototype.prepareName(x)===this._name?true:false};C.prototype.run=function(args){if(U.isCallable(this._callable)){var co=U.isObject(this._context)?this._context:this;try{this._callable.apply(co,args)}catch(ee){U.TError(ee)}};return this};EFO._simpleCallback=F}})();
;/*========== INCLUDE @Utils/confirm========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.Confirm?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,APS=Array.prototype.slice
function Confirm(){return(Confirm.is(this)?this.init:Confirm.F).apply(this,APS.call(arguments))};var F=U.FixCon(Confirm),def={},bdef={},GTPL=null;F.prototype.title=null;F.prototype.text=null;F.prototype.icon=null;F.prototype.md_id=null;F.prototype.image=null;F.prototype.items=null;F.prototype.blist=null;F.prototype.CB=null;F.prototype.handle=null;F.prototype._default_context=null;F.prototype.close_button=null;F.prototype.css=null;F.prototype._callbacks=null;F.prototype._id=null;F.prototype.close_on_backdrop=null;F.prototype.nack=null;F.prototype.state=null;F.prototype.init=function(xp){this._id=U.UID();this.CB=EFO._simpleCallback();this._callbacks=[];this.parseParams(xp);this.buildButtons().render().show();return this};F.prototype.parseParams=function(xo){xo=U.isObject(xo)?xo:{};this.blist=[];this.title=U.NEString(xo.title,U.NEString(def.title,''));this.css=U.NEString(xo.css,U.NEString(def.css,''));this.text=U.NEString(xo.text,U.NEString(def.text,''));this.icon=U.NEString(xo.icon,U.NEString(def.icon,null));this.md_id=U.NEString(xo.md_id,null);this.image=U.NEString(xo.image,U.NEString(def.image,null));if(U.NEArray(xo.items)){this.items=U.NEArray(xo.items,U.NEArray(def.items,[]))}else if(U.NEString(xo.items,null)){this.items=U.mkArray(xo.items,false,",")}else this.items=U.NEArray(xo.items,U.NEArray(def.items,[]));this.close_button=U.anyBool(xo.close_button,U.anyBool(def.close_button,true));this.close_on_backdrop=U.anyBool(xo.close_on_backdrop,U.anyBool(def.close_on_backdrop,true));this._default_context=U.isObject(xo.context)?xo.context:this;if(U.isObject(xo.callback))for(var k in xo.callback)if(/^on[A-Z]/.test(k)&&U.isCallable(xo.callback[k]))this.addCallback(k,this._default_context,xo.callback[k]);if(U.isCallable(xo.default_callback))this.on(this._default_context,xo.default_callback);this.nack=U.NEString(xo.nack,U.NEString(def.nack,null));return this};F.prototype.addCallback=function(name,co,cb){var callback=this.CB.createCallback.apply(this.CB,APS.call(arguments));if(callback)if(U.IntMoreOr(this.state,-1,null)===null){this.CB.addCallbackObject(callback)}else if(callback.nameMatch("on"+this.state))this.CB.runCallbackObject(callback,this);return this};F.prototype.on=function(co,ca){var con=U.coalesceObject(co,ca),cal=U.coalesceCallable(ca,co);if(cal)if(U.IntMoreOr(this.state,-1,null)===null){this._callbacks.push([con,cal])}else try{cal.apply(con,[this.state])}catch(ee){U.TError(ee)};return this};F.prototype.runDefaultCallback=function(index){var args=APS.call(arguments);for(var i=0;i<this._callbacks.length;i++){var co=U.coalesceObject(this._callbacks[i][0],this._default_context,this),ca=U.isCallable(this._callbacks[i][1])?this._callbacks[i][1]:null;try{ca?ca.apply(co,[index]):false}catch(e){U.TError(e)}};return this};F.prototype.buildButtons=function(){this.blist=[];for(var i=0;i<this.items.length;i++){var b=this.initButton(this.items[i]);b&&b.isValid()?this.blist.push(b.setIndex(i+1)):false};return this};F.prototype.initButton=function(x){if(U.isObject(x)){return Button().import(x)}else if(U.NEString(x,null)){return Button().setTitle(x)}else return null};F.prototype.render=function(){if(!GTPL)GTPL=Mustache.render(EFO.TemplateManager().get('main','confirm'),this);this.handle=jQuery(Mustache.render(GTPL,this,{button:EFO.TemplateManager().get('button','confirm')}));return this};F.prototype.getCssClass=function(){return'EFOConfirmerV2'};F.prototype.hasIcon=function(){return this.icon?true:false};F.prototype.hasClose=function(){return this.close_button?true:false};F.prototype.hasImage=function(){return this.image?true:false};F.prototype.hasCommand=function(){return this.command?true:false};F.prototype.isMobile=function(){return U.isMobile()?true:false};F.prototype.useNack=function(){return this.nack&&this.md_id?true:false};F.prototype.initEvents=function(){this.handle.on('click','[data-action]',this.onAction.bindToObjectWParam(this));jQuery(window).on('resize',this.setPosition.bindToObject(this));return this};F.prototype.onAction=function(x,e){x=jQuery(x);var cmd=U.NEString(x.data('command'),null);if(cmd)return this.processCommand(x,cmd,e);var index=U.IntMoreOr(x.data('index'),-1,null);if(index!==null)return this.processIndex(x,index,e);return this};F.prototype.processCommand=function(x,cmd,e){e.stopPropagation();e.preventDefault?e.preventDefault():e.returnValue=false;var incmd=["onCommand",U.UCFirst(cmd)].join('');if(U.isCallable(this[incmd]))return this[incmd].apply(this,[x,e]);var ename=["on",U.UCFirst(cmd)].join('');if(this.CB.exists(ename)){this.CB.runCallback(ename,this);this.state=cmd;return this};return this};F.prototype[["onCommand",F.prototype.getCssClass(),"none"].join('')]=function(){return this};F.prototype[["onCommand",F.prototype.getCssClass(),"close"].join('')]=function(){this.runDefaultCallback(0);this.hide();return this};F.prototype[["onCommand",F.prototype.getCssClass(),"backdrop"].join('')]=function(){if(this.close_on_backdrop){this.runDefaultCallback(0);this.hide()};return this};F.prototype.processIndex=function(t,i,e){e.stopPropagation();e.preventDefault?e.preventDefault():e.returnValue=false;this.runDefaultCallback(i);this.state=i;this.hide();return this};F.prototype.show=function(){this.handle.appendTo('body');this.initEvents();jQuery('body').addClass([this.getCssClass(),'Visible',this._id].join(''));this.handle.fadeIn(100);this.setPosition();return this};F.prototype.setPosition=function(){var px='px',ww=U.FloatMoreOr(this.handle.innerWidth(),0,0),wh=U.FloatMoreOr(this.handle.innerHeight(),0,0);this.window?false:this.window=this.handle.find('>div>div');var mw=U.FloatMoreOr(this.window.innerWidth(),0,0),mh=U.FloatMoreOr(this.window.innerHeight(),0,0),xp=((ww-mw)/2).toFixed(2),yp=((wh-mh)/2).toFixed(2);this.window.css({top:yp+px,left:xp+px});return this};F.prototype.saveAParam=function(){};F.prototype.hide=function(){this.saveAParam();this.handle.hide();this.CB.clearCallbacks();this._callbacks=null;this.blist=null;this._default_context=null;this.handle.remove();this.handle=null;this.window=null;jQuery(window).off('resize',this.setPosition.bindToObject(this));jQuery('body').removeClass([this.getCssClass(),'Visible',this._id].join(''));return this}
function Button(){return(Button.is(this)?this.init:Button.F).apply(this,APS.call(arguments))};var B=U.FixCon(Button);B.prototype.title=null;B.prototype.command=null;B.prototype.css=null;B.prototype.index=0;B.prototype.init=function(){return this};B.prototype.setIndex=function(x){this.index=U.IntMoreOr(x,0,0);return this};B.prototype.isValid=function(){return U.NEString(this.title,null)?true:false};B.prototype.setTitle=function(x){this.title=U.NEString(x,U.NEString(this.title,null));return this};B.prototype.import=function(x){x=U.isObject(x)?x:{};this.title=U.NEString(x.title,U.NEString(bdef.title,null));this.css=U.NEString(x.css,U.NEString(bdef.css,null));this.command=U.NEString(x.command,null);return this};EFO.Confirm=F}})();
;/*========== INCLUDE @Utils/MD5========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.MD5?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,APS=Array.prototype.slice,H=null
function MD5(){return MD5.is(H)?H:((MD5.is(this)?this.init:MD5.F).apply(this,APS.call(arguments)))};U.FixCon(MD5);var F=MD5;F.prototype.init=function(){H=this;return this};F.prototype.MD5=function(str){var x=[],k,AA,BB,CC,DD,a=0x67452301,b=0xEFCDAB89,c=0x98BADCFE,d=0x10325476,S11=7,S12=12,S13=17,S14=22,S21=5,S22=9,S23=14,S24=20,S31=4,S32=11,S33=16,S34=23,S41=6,S42=10,S43=15,S44=21;str=this.utf8_encode(str);x=this.ConvertToWordArray(str);for(k=0;k<x.length;k+=16){AA=a,BB=b,CC=c,DD=d;a=this.FF(a,b,c,d,x[k+0],S11,0xD76AA478);d=this.FF(d,a,b,c,x[k+1],S12,0xE8C7B756);c=this.FF(c,d,a,b,x[k+2],S13,0x242070DB);b=this.FF(b,c,d,a,x[k+3],S14,0xC1BDCEEE);a=this.FF(a,b,c,d,x[k+4],S11,0xF57C0FAF);d=this.FF(d,a,b,c,x[k+5],S12,0x4787C62A);c=this.FF(c,d,a,b,x[k+6],S13,0xA8304613);b=this.FF(b,c,d,a,x[k+7],S14,0xFD469501);a=this.FF(a,b,c,d,x[k+8],S11,0x698098D8);d=this.FF(d,a,b,c,x[k+9],S12,0x8B44F7AF);c=this.FF(c,d,a,b,x[k+10],S13,0xFFFF5BB1);b=this.FF(b,c,d,a,x[k+11],S14,0x895CD7BE);a=this.FF(a,b,c,d,x[k+12],S11,0x6B901122);d=this.FF(d,a,b,c,x[k+13],S12,0xFD987193);c=this.FF(c,d,a,b,x[k+14],S13,0xA679438E);b=this.FF(b,c,d,a,x[k+15],S14,0x49B40821);a=this.GG(a,b,c,d,x[k+1],S21,0xF61E2562);d=this.GG(d,a,b,c,x[k+6],S22,0xC040B340);c=this.GG(c,d,a,b,x[k+11],S23,0x265E5A51);b=this.GG(b,c,d,a,x[k+0],S24,0xE9B6C7AA);a=this.GG(a,b,c,d,x[k+5],S21,0xD62F105D);d=this.GG(d,a,b,c,x[k+10],S22,0x2441453);c=this.GG(c,d,a,b,x[k+15],S23,0xD8A1E681);b=this.GG(b,c,d,a,x[k+4],S24,0xE7D3FBC8);a=this.GG(a,b,c,d,x[k+9],S21,0x21E1CDE6);d=this.GG(d,a,b,c,x[k+14],S22,0xC33707D6);c=this.GG(c,d,a,b,x[k+3],S23,0xF4D50D87);b=this.GG(b,c,d,a,x[k+8],S24,0x455A14ED);a=this.GG(a,b,c,d,x[k+13],S21,0xA9E3E905);d=this.GG(d,a,b,c,x[k+2],S22,0xFCEFA3F8);c=this.GG(c,d,a,b,x[k+7],S23,0x676F02D9);b=this.GG(b,c,d,a,x[k+12],S24,0x8D2A4C8A);a=this.HH(a,b,c,d,x[k+5],S31,0xFFFA3942);d=this.HH(d,a,b,c,x[k+8],S32,0x8771F681);c=this.HH(c,d,a,b,x[k+11],S33,0x6D9D6122);b=this.HH(b,c,d,a,x[k+14],S34,0xFDE5380C);a=this.HH(a,b,c,d,x[k+1],S31,0xA4BEEA44);d=this.HH(d,a,b,c,x[k+4],S32,0x4BDECFA9);c=this.HH(c,d,a,b,x[k+7],S33,0xF6BB4B60);b=this.HH(b,c,d,a,x[k+10],S34,0xBEBFBC70);a=this.HH(a,b,c,d,x[k+13],S31,0x289B7EC6);d=this.HH(d,a,b,c,x[k+0],S32,0xEAA127FA);c=this.HH(c,d,a,b,x[k+3],S33,0xD4EF3085);b=this.HH(b,c,d,a,x[k+6],S34,0x4881D05);a=this.HH(a,b,c,d,x[k+9],S31,0xD9D4D039);d=this.HH(d,a,b,c,x[k+12],S32,0xE6DB99E5);c=this.HH(c,d,a,b,x[k+15],S33,0x1FA27CF8);b=this.HH(b,c,d,a,x[k+2],S34,0xC4AC5665);a=this.II(a,b,c,d,x[k+0],S41,0xF4292244);d=this.II(d,a,b,c,x[k+7],S42,0x432AFF97);c=this.II(c,d,a,b,x[k+14],S43,0xAB9423A7);b=this.II(b,c,d,a,x[k+5],S44,0xFC93A039);a=this.II(a,b,c,d,x[k+12],S41,0x655B59C3);d=this.II(d,a,b,c,x[k+3],S42,0x8F0CCC92);c=this.II(c,d,a,b,x[k+10],S43,0xFFEFF47D);b=this.II(b,c,d,a,x[k+1],S44,0x85845DD1);a=this.II(a,b,c,d,x[k+8],S41,0x6FA87E4F);d=this.II(d,a,b,c,x[k+15],S42,0xFE2CE6E0);c=this.II(c,d,a,b,x[k+6],S43,0xA3014314);b=this.II(b,c,d,a,x[k+13],S44,0x4E0811A1);a=this.II(a,b,c,d,x[k+4],S41,0xF7537E82);d=this.II(d,a,b,c,x[k+11],S42,0xBD3AF235);c=this.II(c,d,a,b,x[k+2],S43,0x2AD7D2BB);b=this.II(b,c,d,a,x[k+9],S44,0xEB86D391);a=this.AddUnsigned(a,AA);b=this.AddUnsigned(b,BB);c=this.AddUnsigned(c,CC);d=this.AddUnsigned(d,DD)};var temp=this.WordToHex(a)+this.WordToHex(b)+this.WordToHex(c)+this.WordToHex(d);return temp.toLowerCase()};F.prototype.utf8_encode=function(str_data){str_data=str_data.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<str_data.length;n++){var c=str_data.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c)}else if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128)}else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128)}};return utftext};F.prototype.RotateLeft=function(lValue,iShiftBits){return(lValue<<iShiftBits)|(lValue>>>(32-iShiftBits))};F.prototype.AddUnsigned=function(lX,lY){var lX4,lY4,lX8,lY8,lResult;lX8=(lX&0x80000000);lY8=(lY&0x80000000);lX4=(lX&0x40000000);lY4=(lY&0x40000000);lResult=(lX&0x3FFFFFFF)+(lY&0x3FFFFFFF);if(lX4&lY4)return(lResult^0x80000000^lX8^lY8);if(lX4|lY4){if(lResult&0x40000000){return(lResult^0xC0000000^lX8^lY8)}else return(lResult^0x40000000^lX8^lY8)}else return(lResult^lX8^lY8)};F.prototype.F=function(x,y,z){return(x&y)|((~x)&z)};F.prototype.G=function(x,y,z){return(x&z)|(y&(~z))};F.prototype.H=function(x,y,z){return(x^y^z)};F.prototype.I=function(x,y,z){return(y^(x|(~z)))};F.prototype.FF=function(a,b,c,d,x,s,ac){a=this.AddUnsigned(a,this.AddUnsigned(this.AddUnsigned(this.F(b,c,d),x),ac));return this.AddUnsigned(this.RotateLeft(a,s),b)};F.prototype.GG=function(a,b,c,d,x,s,ac){a=this.AddUnsigned(a,this.AddUnsigned(this.AddUnsigned(this.G(b,c,d),x),ac));return this.AddUnsigned(this.RotateLeft(a,s),b)};F.prototype.HH=function(a,b,c,d,x,s,ac){a=this.AddUnsigned(a,this.AddUnsigned(this.AddUnsigned(this.H(b,c,d),x),ac));return this.AddUnsigned(this.RotateLeft(a,s),b)};F.prototype.II=function(a,b,c,d,x,s,ac){a=this.AddUnsigned(a,this.AddUnsigned(this.AddUnsigned(this.I(b,c,d),x),ac));return this.AddUnsigned(this.RotateLeft(a,s),b)};F.prototype.ConvertToWordArray=function(str){var lWordCount,lMessageLength=str.length,lNumberOfWords_temp1=lMessageLength+8,lNumberOfWords_temp2=(lNumberOfWords_temp1-(lNumberOfWords_temp1%64))/64,lNumberOfWords=(lNumberOfWords_temp2+1)*16,lWordArray=Array(lNumberOfWords-1),lBytePosition=0,lByteCount=0;while(lByteCount<lMessageLength){lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=(lWordArray[lWordCount]|(str.charCodeAt(lByteCount)<<lBytePosition));lByteCount++};lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=lWordArray[lWordCount]|(0x80<<lBytePosition);lWordArray[lNumberOfWords-2]=lMessageLength<<3;lWordArray[lNumberOfWords-1]=lMessageLength>>>29;return lWordArray};F.prototype.WordToHex=function(lValue){var WordToHexValue="",WordToHexValue_temp="",lByte,lCount;for(lCount=0;lCount<=3;lCount++){lByte=(lValue>>>(lCount*8))&255;WordToHexValue_temp="0"+lByte.toString(16);WordToHexValue=WordToHexValue+WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2)};return WordToHexValue};EFO.MD5=F}})();
;/*========== INCLUDE @Utils/NTLHelpMonitor========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.NTLHelpMonitor?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,APS=Array.prototype.slice,H=null
function NTLHelpMonitor(){return NTLHelpMonitor.is(H)?H:((NTLHelpMonitor.is(this)?this.init:NTLHelpMonitor.F).apply(this,APS.call(arguments)))};var F=U.FixCon(NTLHelpMonitor);F.prototype.init=function(){H=this;EFO.Events.GEM().On('EFO_NEED_HELP',this,this.runHelp);return this};F.prototype.runHelp=function(id,name){var Y=jQuery.componentor('/admin/ComponentManager');Y.LoadComponent('application.components.Service.Help.Help').done(function(x){x.show().load(id,name)}).fail(function(){U.TError("ErrorLoadingHelpSystem")});return this};EFO.NTLHelpMonitor=function(){};F()}})();
;/*========== INCLUDE @Utils/HotKeyManager========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{};window.Eve.EFO.HotKeyManager?false:initPlugin()
function initPlugin(){var E=window.Eve,EFO=E.EFO,U=EFO.U,H=null,APS=Array.prototype.slice
function HotKeyManager(){return HotKeyManager.is(H)?H:((HotKeyManager.is(this)?init:HotKeyManager.F).apply(this,APS.call(arguments)))};var F=U.FixCon(HotKeyManager),stack=null,esc_stack=null,ent_stack=null,current_hotkeys=null
function init(){stack=[];esc_stack=[];ent_stack=[];current_hotkeys=null;H=this;return this}
function is_esc_request(x){return x.key===27}
function is_esc_event(e){return e.keyCode===27}
function is_ent_request(x){return x.key===13}
function is_ent_event(e){return e.keyCode===13}
function build_key_of_event(e){return['K',U.IntMoreOr(e.keyCode,0,0),'S',(U.anyBool(e.shiftKey,false)?'T':'F'),'C',(U.anyBool(e.ctrlKey,false)?'T':'F'),'A',(U.anyBool(e.altKey,false)?'T':'F'),'M',(U.anyBool(e.metaKey,false)?'T':'F')].join('')}
function listener(event){if(is_esc_event(event));else if(is_ent_event(event));else if(current_hotkeys){var key=build_key_of_event(event);if(key in current_hotkeys){var xo=this.stack.length?this.stack[this.stack.length-1]:null,r=false;try{r=U.isCallable(xo.hotkey_manager_callback)?xo.hotkey_manager_callback(event,current_hotkeys[key].token):false}catch(e){U.TError(e);r=true};if(r){event.stopPropagation();event.preventDefault?event.preventDefault():event.returnValue=false}}};return this}
function registerListener(){jQuery(document).on('keydown',listener.bindToObject(this));return this}
function unregisterListener(){jQuery(document).off('keydown',listener.bindToObject(this));return this}
function build_event_key(x){return['K',U.IntMoreOr(x.key,0,0),'S',(U.anyBool(x.shift,false)?'T':'F'),'C',(U.anyBool(x.ctrl,false)?'T':'F'),'A',(U.anyBool(x.alt,false)?'T':'F'),'M',(U.anyBool(x.meta,false)?'T':'F')].join('')}
function create_hotkey_list(){current_hotkeys=null;if(stack.length){var xo=stack[stack.length-1];if(U.isObject(xo)&&U.isCallable(xo.get_hotkey_list)&&U.isCallable(xo.hotkey_manager_callback)){var hl=xo.get_hotkey_list;if(hl&&U.isArray(hl)&&hl.length){var thk=[];for(var i=0;i<hl.length;i++)if(U.isObject(hl[i])&&U.IntMoreOr(hl[i].key,0,0)){var eo={evt_key:build_event_key(hl[i])};eo.token=U.NEString(hl[i].token,eo.evt_key);thk.push(eo)};if(thk.length){current_hotkeys={};for(var i=0;i<thk.length;i++)current_hotkeys[thk[i].evt_key]=thk[i]}}}};return this};F.prototype.register=function(x){if(U.isObject(x)){this.unregister(x);stack.length?false:registerListener.apply(this);stack.push(x);create_hotkey_list.apply(this)};return this};F.prototype.unregister=function(x){if(U.isObject(x)){var ts=[];for(var i=0;i<stack.length;i++)stack[i]===x?false:ts.push(stack[i]);stack=ts;stack.length?false:unregisterListener.apply(this);create_hotkey_list.apply(this)};return this};EFO.HotKeyManager=F}})();
;/*========== INCLUDE @Utils/Ready========*/;
(function(){window.Eve=window.Eve||{};window.Eve.EFO=window.Eve.EFO||{}
function defineReady(){window.Eve.EFO.Ready={push:function(x){if(window.Eve.EFO.U.isCallable(x))try{x()}catch(e){window.Eve.EFO.U.TError(e.message)}}}};if(window.Eve.EFO.Ready){if(window.Eve.EFO.U.isArray(window.Eve.EFO.Ready)){var ca=[].concat(window.Eve.EFO.Ready);defineReady();for(var i=0;i<ca.length;i++)window.Eve.EFO.Ready.push(ca[i])}}else defineReady()})();
;/*=====INCLUDE TEMPLATES: =======*/;
window.Eve.EFO.TemplateManager().addObject({"Confirm.button":"{{#blist}}\n<div class=\"{{getCssClass}}Button {{getCssClass}}ButtonCustom{{css}}\" {{#hasCommand}} data-command=\"{{command}}\" {{\/hasCommand}} data-index=\"{{index}}\" data-action=\"1\" >{{title}}<\/div>\n{{\/blist}}","Confirm.main":"{{=<% %>=}}\n<div class=\"<%getCssClass%>Backdrop <%#isMobile%><%getCssClass%>HandheldView<%\/isMobile%> <%getCssClass%>Custom{{css}}\" data-id=\"{{_id}}\">\n    <div class=\"<%getCssClass%>CommandReciever\" {{#hasClose}} data-action=\"1\" data-command=\"<%getCssClass%>backdrop\" {{\/hasClose}}>\n         <div class=\"<%getCssClass%>  {{#useNack}}<%getCssClass%>NackEnabled{{\/useNack}}\" data-command=\"<%getCssClass%>none\">\n            <div class=\"<%getCssClass%>Title {{#hasIcon}}<%getCssClass%>Iconed{{\/hasIcon}} {{#hasClose}}<%getCssClass%>Closable{{\/hasClose}}\">\n                {{#hasIcon}}\n                <div class=\"<%getCssClass%>IconWrap\"><svg><use xlink:href=\"#{{icon}}\" \/><\/svg><\/div>\n                {{\/hasIcon}}\n                <div class=\"<%getCssClass%>TitleText\">{{title}}<\/div>\n                {{#hasClose}}\n                <div class=\"<%getCssClass%>CloseWrp\" data-command=\"<%getCssClass%>close\" data-action=\"1\" >\n                    <div class=\"<%getCssClass%>CloseInner\"><\/div>\n                <\/div>\n                {{\/hasClose}}\n            <\/div>\n            <div class=\"<%getCssClass%>Body {{#hasImage}}<%getCssClass%>Imaged{{\/hasImage}}\">\n                {{#hasImage}}\n                <div class=\"<%getCssClass%>ImageWrapper\">\n                    <svg><use xlink:href=\"#{{image}}\" \/><\/svg>\n                <\/div>\n                {{\/hasImage}}\n                <div class=\"<%getCssClass%>BodyInner\">{{{text}}}<\/div>\n            <\/div>\n            {{#useNack}}\n            <div class=\"<%getCssClass%>NackRow%>\">\n                <input type=\"checkbox\" id=\"<%getCssClass%>cb{{_id}}\"\/>\n                <label for=\"<%getCssClass%>cb{{_id}}\">{{nack}}<\/label>                \n            <\/div>\n            {{\/useNack}}\n            <div class=\"<%getCssClass%>Footer\" data-role=\"footer\">\n                <div class=\"<%getCssClass%>FooterInner\" data-role=\"footerInner\">\n                    {{>button}}\n                <\/div>\n            <\/div>\n        <\/div>\n    <\/div>\n<\/div><%={{ }}=%>","HSplit.content":"<div class=\"{{getCssClass}}HSplitWrapper\">\n    <div class=\"{{getCssClass}}Panel1\" data-role=\"p1\">\n    <\/div>\n    <div class=\"{{getCssClass}}Panel2\">\n        <div class=\"{{getCssClass}}Splitter\" data-role=\"splitter\">\n            <div class=\"{{getCssClass}}SplitterCursor\"><div class=\"{{getCssClass}}SplitterLine\"><\/div><\/div>\n        <\/div>\n        <div class=\"{{getCssClass}}Panel2Content\" data-role=\"p2\">\n        <\/div>\n    <\/div>\n<\/div>","HSplit.default":"{{=<% %>=}}<div class=\"<%getCssClass%>\" id=\"<%_uid%>\"><%{getContentTemplate}%><\/div><%={{ }}=%>","HSplit.helper":"<div class=\"EFOWidgetHSplitHelper\"><\/div>","Handlable.default":"{{=<% %>=}}{{getContent}}<%={{ }}=%>","Paginator.Content":"<div class=\"{{getCssClass}}Content\" data-role=\"items\">sddd<\/div>","Paginator.default":"{{=<% %>=}}<div class=\"<%getCssClass%>\" id=\"<%_uid%>\"><%{getContentTemplate}%><\/div><%={{ }}=%>","Paginator.item":"{{#separator}}<span class=\"{{getCssClass}}Element {{getCssClass}}Separator\" >{{text}}<\/span>{{\/separator}}{{^separator}}<span class=\"{{getCssClass}}Element {{#current}} {{getCssClass}}Current {{\/current}}\" data-page=\"{{i}}\" data-command=\"{{command_prefix}}setPage\">{{text}}<\/span>{{\/separator}}","Paginator.items":"<span class=\"{{getCssClass}}HBtn {{getCssClass}}Prev  {{^hasPrev}} disabled {{\/hasPrev}}\" data-command=\"{{command_prefix}}prevPage\"><\/span>{{#items}}{{>item}}{{\/items}}<span class=\"{{getCssClass}}HBtn {{getCssClass}}Next  {{^hasNext}} disabled {{\/hasNext}}\" data-command=\"{{command_prefix}}nextPage\"><\/span>\n","Splitter.content":"<div class=\"{{getCssClass}}SplitterWrapper\">\n    <div class=\"{{getCssClass}}Panel1\" data-role=\"p1\">\n    <\/div>\n    <div class=\"{{getCssClass}}Panel2\">\n        <div class=\"{{getCssClass}}Splitter\" data-role=\"splitter\">\n            <div class=\"{{getCssClass}}SplitterCursor\"><div class=\"{{getCssClass}}SplitterLine\"><\/div><\/div>\n        <\/div>\n        <div class=\"{{getCssClass}}Panel2Content\" data-role=\"p2\">\n        <\/div>\n    <\/div>\n<\/div>","Splitter.default":"{{=<% %>=}}<div class=\"<%getCssClass%>\" id=\"<%_uid%>\"><%{getContentTemplate}%><\/div><%={{ }}=%>","Splitter.helper":"<div class=\"EFOWidgetSplitterHelper\"><\/div>","TreeView.Content":"<div class=\"{{getCssClass}}Content\" data-role=\"items\">TreeView<\/div>","TreeView.Toolbar":"<div class=\"{{getCssClass}}Toolbar\" data-role=\"toolbar\">\n    {{#getCommandButtons}}\n    <div class=\"{{getCssClass}}CommandButton {{getCssClass}}Custom{{css}}\" data-command=\"{{command}}\">\n        <svg><use xlink:href=\"#{{getCssClass}}ButtonImage{{image}}\" \/><\/svg>\n    <\/div>\n    {{\/getCommandButtons}}        \n<\/div>","TreeView.default":"{{=<% %>=}}\n<div class=\"<%getCssClass%> <%#enableToolbar%><%getCssClass%>ToolbarEnabled<%\/enableToolbar%>\" id=\"<%_uid%>\">\n    <%#enableToolbar%><%{getToolbarTemplate}%><%\/enableToolbar%>\n    <%{getContentTemplate}%>\n    <div class=\"EFOWindowLoader {{getCssClass}}WindowLoader\" data-role=\"loader\" style=\"display:none;\"><\/div>\n<\/div>\n<%={{ }}=%>","TreeView.node":"{{#childs}}\n{{#is_displayable}}\n<div class=\"{{getCssClass}}NodeElement {{getCssClass}}NodeElementCustom{{css}} {{getCssClass}}NodeElementParent{{#hasChilds}}hasChilds{{\/hasChilds}}{{^hasChilds}}NoChilds{{\/hasChilds}} {{getCssClass}}NodeElementState{{#opened}}opened{{\/opened}}{{^opened}}closed{{\/opened}}\" data-id=\"{{id}}\" data-key=\"{{key}}\">\n    <div class=\"{{getCssClass}}NodeElementName {{#getIsDraggableBinded}}EFODraggable EFODropTarget{{\/getIsDraggableBinded}}\" {{#getIsDraggableBinded}}data-efodragtype=\"{{getDragTypeBinded}}\" data-efodroptypes=\"{{getDragTargetBinded}}\"{{\/getIsDraggableBinded}} data-node-element=\"itemHeader\">\n        <span class=\"{{getCssClass}}NodeElementIcon {{getCssClass}}NodeIconCollapsed\" data-node-element=\"itemIcon\"><svg><use xlink:href=\"#{{getCssClass}}Icon{{icon}}Collapsed\"\/><\/svg><\/span>\n        <span class=\"{{getCssClass}}NodeElementIcon {{getCssClass}}NodeIconExpanded\" data-node-element=\"itemIcon\"><svg><use xlink:href=\"#{{getCssClass}}Icon{{icon}}Expanded\"\/><\/svg><\/span>\n        <span class=\"{{getCssClass}}NodeElementText\">{{name}}<\/span>\n    <\/div>\n    {{#hasChilds}}\n    <div class=\"{{getCssClass}}NodeElementNodeBody\">\n        {{>element}}\n    <\/div>\n    {{\/hasChilds}}\n<\/div>\n{{\/is_displayable}}\n{{\/childs}}","contextMenu.Content":"<div class=\"{{getCssClass}}Content\" data-role=\"items\">sddd<\/div>","contextMenu.default":"{{=<% %>=}}<div class=\"<%getCssClass%>\" id=\"<%_uid%>\"><%{getContentTemplate}%><\/div><%={{ }}=%>","contextMenu.items":"<ul class=\"{{getCssClass}}List {{getCssClass}}Custom{{customClass}}\">\n    {{#items}}\n    {{#separator}}\n        <li class=\"{{getCssClassBind}}MenuItemSeparator\"><\/li>\n    {{\/separator}}\n    {{^separator}}\n    <li data-command=\"{{command}}\" {{#customData}} data-{{name}}=\"{{value}}\" {{\/customData}} class=\"{{getCssClassBind}}_{{customClass}}_{{itemCss}} {{directItemCss}}\">\n        <span class=\"{{getCssClassBind}}ItemIcon\"><svg><use xlink:href=\"#{{getCssClassBind}}{{customClass}}Icon{{icon}}\" \/><\/svg><\/span>\n        <span class=\"{{getCssClassBind}}ItemText\">{{title}}<\/span>\n    <\/li>\n    {{\/separator}}\n    {{\/items}}\n<\/ul>","draghelper":"<div class=\"EFODragHelper\" style=\"display:none\">    \n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\" width=\"512px\" version=\"1.1\" height=\"512px\" viewBox=\"0 0 64 64\" enable-background=\"new 0 0 64 64\">\n        <g>\n            <path  d=\"m63.875,31.203c-0.102-0.246-0.248-0.467-0.435-0.652l-6.837-6.838c-0.783-0.783-2.051-0.783-2.834,0-0.781,0.781-0.781,2.05 0,2.832l3.42,3.42-23.16-.001 .002-23.155 3.568,3.57c0.393,0.392 0.904,0.588 1.418,0.588 0.512,0 1.025-0.196 1.416-0.588 0.783-0.781 0.783-2.051 0-2.834l-6.988-6.99c-0.186-0.186-0.406-0.332-0.652-0.434-0.49-0.203-1.041-0.203-1.531,0-0.244,0.101-0.463,0.246-0.646,0.429 0,0-0.002,0.002-0.004,0.003l-6.844,6.84c-0.781,0.783-0.781,2.051 0,2.834 0.393,0.391 0.904,0.587 1.418,0.587 0.512,0 1.025-0.196 1.416-0.587l3.422-3.42-.002,23.157-23.15-.001 3.417-3.418c0.781-0.782 0.781-2.051 0-2.832-0.783-0.783-2.051-0.783-2.834,0l-6.838,6.84c-0.393,0.391-0.588,0.903-0.588,1.416s0.195,1.025 0.588,1.417l6.988,6.989c0.392,0.393 0.904,0.588 1.417,0.588s1.025-0.195 1.417-0.588c0.782-0.783 0.782-2.051 0-2.833l-3.571-3.571 23.153,.001-.001,23.153-3.418-3.417c-0.783-0.78-2.051-0.782-2.834,0.001-0.781,0.783-0.781,2.052 0,2.834l6.844,6.839c0.391,0.392 0.904,0.587 1.416,0.587 0.513,0 1.025-0.195 1.416-0.587l6.99-6.991c0.783-0.783 0.783-2.053 0-2.834-0.783-0.783-2.051-0.783-2.834,0l-3.572,3.574 .002-23.159 23.16,.001-3.57,3.569c-0.781,0.782-0.781,2.05 0,2.833 0.393,0.393 0.904,0.588 1.418,0.588 0.512,0 1.025-0.195 1.416-0.588l6.989-6.989c0.004-0.005 0.006-0.012 0.012-0.017 0.177-0.182 0.321-0.396 0.421-0.633 0.102-0.246 0.154-0.506 0.154-0.768-0.001-0.259-0.053-0.52-0.155-0.765z\"\/>\n        <\/g>\n    <\/svg>\n<\/div>","flatController.default":"{{=<% %>=}}\n<div class=\"EFOFlatControllerWraper FlatController<%getCssClass%>Wrapper\" id=\"EFOController<%getControllerId%>\">\n    <div class=\"EFOWindowContent <%getCssClass%>WindowContent\" data-role=\"windowContent\">\n        <%{getContentTemplate}%>\n    <\/div>        \n    <div class=\"EFOWindowLoader <%getCssClass%>WindowLoader\" data-role=\"loader\"><\/div>\n<\/div>\n<%={{ }}=%>","windowController.default":"{{=<% %>=}}\n<div class=\"EFOBackdrop <%getCssClass%>Backdrop\" id=\"EFOController<%getControllerId%>\">    \n    <div class=\"EFOWindow <%getCssClass%>Window\" data-role=\"window\">\n        <% > WindowControllerTitle %>\n        <div class=\"EFOWindowContent <%getCssClass%>WindowContent\" data-role=\"windowContent\">\n            <%{getContentTemplate}%>\n        <\/div>\n        <% > WindowControllerFooter %>     \n        <div class=\"EFOWindowLoader <%getCssClass%>WindowLoader\" data-role=\"loader\"><\/div>\n    <\/div>\n<\/div>\n<%={{ }}=%>","windowController.footer":"{{=<% %>=}}\n<div class=\"EFOFooter <%getCssClass%>Footer\">\n    <%#getFooterButtons%>\n    <%> WindowControllerFooterButton%>\n    <%\/getFooterButtons%>\n    <div class=\"EFOWindowResizer <%getCssClass%>WindowResizer\" data-role=\"resizer\"><\/div>\n<\/div>\n<%={{ }}=%>","windowController.footerButton":"{{=<% %>=}}\n<span class=\"EFOFooterButton <%getCssClass%>FooterButton <%buttonClass%>\" data-command=\"<%command%>\" data-role=\"<%button_role%>\"><%text%><\/span>\n<%={{ }}=%>","windowController.icons":"<div style=\"display:none\" data-id=\"EFO.windowController.icons\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" style=\"display: none;\">\n        <symbol id=\"efo-title-info-button\" viewBox=\"0 0 475 475\">        \n            <path  d=\"M238,0C107,0,0,107,0,238s107,237,238,237s237-106,237-237S369,0,238,0z M238,432 c-107,0-194-87-194-194S131,44,238,44s194,87,194,194S345,432,238,432z\"\/>\n            <path  d=\"M270,323l-20,9l26-133c3-14-12-29-28-20l-49,27c-9,5-12,17-7,26s17,12,26,7l12-6l-25,127 c-2,11,7,23,19,23c3,0,6-1,8-2l53-23c10-4,14-15,10-25S280,319,270,323z\"\/>\n            <path  d=\"M257,143c15,0,27-12,27-27s-12-27-27-27s-27,12-27,27S242,143,257,143z\"\/>\n        <\/symbol>\n    <\/svg>\n<\/div>","windowController.title":"{{=<% %>=}}\n<div class=\"EFOTitle <%getCssClass%>Title\">\n    <span class=\"EFOTitleText <%getCssClass%>TitleText\" data-role=\"titleText\">{{getDefaultTitle}}<\/span>\n    {{#efo_element_has_help}}\n    <div class=\"EFOTitleHelp <%getCssClass%>TitleHelp\" data-command=\"{{efo_get_help_command}}\" data-help-id=\"{{efo_get_help_id}}\">\n        <svg><use xlink:href=\"#efo-title-info-button\"\/><\/svg>\n    <\/div>\n    {{\/efo_element_has_help}}\n    <div class=\"EFOTitleClose <%getCssClass%>Close\" data-command=\"cancel\"><\/div>\n<\/div>\n<%={{ }}=%>"});;
/*=====27 TEMPLATES ARE INCLUDED =======*/